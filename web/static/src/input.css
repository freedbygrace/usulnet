@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   usulnet - Custom Styles
   ======================================== */

@layer base {
  html {
    @apply scroll-smooth;
    transition: background-color 0.2s ease, color 0.2s ease;
  }
  
  body {
    font-family: 'IBM Plex Sans', system-ui, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  h1, h2, h3, .font-display {
    font-family: 'Space Grotesk', system-ui, sans-serif;
  }
  
  code, pre, .font-mono {
    font-family: 'IBM Plex Mono', monospace;
  }
  
  /* Scrollbar dark mode */
  .dark ::-webkit-scrollbar { width: 8px; height: 8px; }
  .dark ::-webkit-scrollbar-track { background: #0d1117; }
  .dark ::-webkit-scrollbar-thumb { background: #30363d; border-radius: 4px; }
  .dark ::-webkit-scrollbar-thumb:hover { background: #484f58; }

  /* Scrollbar light mode */
  .light ::-webkit-scrollbar { width: 8px; height: 8px; }
  .light ::-webkit-scrollbar-track { background: #f1f5f9; }
  .light ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
  .light ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
  
  /* Firefox scrollbar */
  * { scrollbar-width: thin; }
  .dark * { scrollbar-color: #30363d #0d1117; }
  .light * { scrollbar-color: #cbd5e1 #f1f5f9; }
}

@layer components {
  /* Buttons */
  .btn-primary {
    @apply px-4 py-2 text-sm font-medium
           bg-gradient-to-r from-primary-500 to-primary-600
           hover:from-primary-600 hover:to-primary-700
           rounded-lg shadow-lg shadow-primary-500/25
           transition-all duration-200;
    color: #ffffff;
  }

  .btn-secondary {
    @apply px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-200;
  }
  .dark .btn-secondary {
    color: #d1d5db;
    background-color: #161b22;
  }
  .dark .btn-secondary:hover {
    background-color: #21262d;
  }
  .light .btn-secondary {
    @apply text-gray-700 bg-slate-100 hover:bg-slate-200;
  }

  .btn-danger {
    @apply px-4 py-2 text-sm font-medium text-red-400
           border border-red-500/30 rounded-lg
           hover:bg-red-500/10 transition-colors;
  }

  .btn-ghost {
    @apply px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-200;
    color: rgb(156 163 175 / var(--tw-text-opacity, 1));
  }
  .btn-ghost:hover {
    @apply bg-gray-500/10;
  }

  /* Card */
  .card {
    @apply rounded-xl border;
  }
  .dark .card {
    background-color: #0d1117;
    border-color: #161b22;
  }
  .light .card {
    @apply bg-white border-slate-200;
  }

  /* Input */
  .input {
    @apply w-full px-4 py-2 rounded-lg border
           focus:outline-none focus:ring-2;
  }
  .input::placeholder { color: #6b7280; }
  .input:focus { --tw-ring-color: rgb(255 107 53 / 0.5); }
  .dark .input {
    background-color: #161b22;
    border-color: #21262d;
    color: #ffffff;
  }
  .light .input {
    @apply bg-slate-50 border-slate-300 text-gray-900;
  }

  /* Badge */
  .badge {
    @apply inline-flex items-center px-2.5 py-1
           rounded-full text-xs font-medium border;
  }
  .badge-success { @apply bg-green-500/10 text-green-400 border-green-500/20; }
  .badge-warning { @apply bg-yellow-500/10 text-yellow-400 border-yellow-500/20; }
  .badge-danger { @apply bg-red-500/10 text-red-400 border-red-500/20; }
  .badge-info { @apply bg-blue-500/10 text-blue-400 border-blue-500/20; }

  /* Nav item */
  .nav-item {
    @apply flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all;
  }
  .dark .nav-item {
    color: #9ca3af;
  }
  .dark .nav-item:hover {
    background-color: #161b22;
    color: #ffffff;
  }
  .light .nav-item {
    @apply text-gray-600 hover:bg-slate-100 hover:text-gray-900;
  }
  .nav-item-active {
    @apply border-r-2 border-primary-500;
  }
  .dark .nav-item-active {
    @apply bg-primary-500/10 text-primary-400;
  }
  .light .nav-item-active {
    @apply bg-primary-50 text-primary-600;
  }

  /* Table */
  .table { @apply w-full; }
  .table thead { @apply border-b; }
  .dark .table thead {
    background-color: rgb(22 27 34 / 0.5);
    border-color: #161b22;
  }
  .light .table thead { @apply bg-slate-50 border-slate-200; }
  .table th {
    @apply px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider;
  }
  .dark .table th { color: #9ca3af; }
  .light .table th { color: #6b7280; }
  .table tbody { @apply divide-y; }
  .dark .table tbody > :not([hidden]) ~ :not([hidden]) {
    border-color: #161b22;
  }
  .light .table tbody { @apply divide-slate-100; }
  .table tbody tr { @apply transition-colors; }
  .dark .table tbody tr:hover {
    background-color: rgb(22 27 34 / 0.3);
  }
  .light .table tbody tr:hover { @apply bg-slate-50; }
  .table td { @apply px-5 py-4; }
}

/* HTMX states */
.htmx-indicator { opacity: 0; transition: opacity 150ms ease-in-out; }
.htmx-request .htmx-indicator, .htmx-request.htmx-indicator { opacity: 1; }

/* Alpine.js */
[x-cloak] { display: none !important; }

/* Accessibility: Focus visible styles for keyboard navigation */
:focus-visible {
  outline: 2px solid rgb(255 107 53 / 0.7);
  outline-offset: 2px;
  border-radius: 4px;
}

/* Screen reader only â€” matching Tailwind's sr-only */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Log output */
.log-output .log-info { @apply text-blue-400; }
.log-output .log-warn { @apply text-yellow-400; }
.log-output .log-error { @apply text-red-400; }

/* Dark mode text visibility */
.dark label,
.dark .label {
  color: rgb(209 213 219 / var(--tw-text-opacity, 1));
}

/* ========================================
   Light theme surface color overrides
   Remaps hardcoded bg-dark-* / border-dark-* / text colors
   so ~115 templates render correctly in light mode
   without editing each .templ file.
   ======================================== */

/* --- Body & root backgrounds --- */
.light .bg-dark-900 { background-color: #f8fafc; }        /* slate-50 */
.light .bg-dark-900\/95 { background-color: rgb(248 250 252 / 0.95); }
.light .bg-dark-800 { background-color: #ffffff; }        /* white */
.light .bg-dark-800\/50 { background-color: rgb(255 255 255 / 0.5); }
.light .bg-dark-700 { background-color: #f1f5f9; }        /* slate-100 */
.light .bg-dark-700\/50 { background-color: rgb(241 245 249 / 0.5); }
.light .bg-dark-700\/30 { background-color: rgb(241 245 249 / 0.3); }
.light .bg-dark-600 { background-color: #e2e8f0; }        /* slate-200 */
.light .bg-dark-500 { background-color: #cbd5e1; }        /* slate-300 */

/* --- Borders --- */
.light .border-dark-700 { border-color: #e2e8f0; }        /* slate-200 */
.light .border-dark-600 { border-color: #cbd5e1; }        /* slate-300 */
.light .border-dark-500 { border-color: #94a3b8; }        /* slate-400 */

/* --- Divide --- */
.light .divide-dark-700 > :not([hidden]) ~ :not([hidden]) { border-color: #e2e8f0; }
.light .divide-dark-600 > :not([hidden]) ~ :not([hidden]) { border-color: #cbd5e1; }

/* --- Text colors --- */
.dark .text-gray-600 { color: #9ca3af; }                  /* gray-400: fix dark-on-dark contrast */
.light .text-white { color: #0f172a; }                    /* slate-900 */
.light .text-gray-300 { color: #475569; }                 /* slate-600 */
.light .text-gray-400 { color: #64748b; }                 /* slate-500 */
.light .text-gray-500 { color: #94a3b8; }                 /* slate-400 */
.light label,
.light .label { color: #334155; }                          /* slate-700 */

/* --- Placeholder --- */
.light .placeholder-gray-500::placeholder { color: #94a3b8; }

/* --- Hover background overrides --- */
.light .hover\:bg-dark-700:hover { background-color: #f1f5f9; }
.light .hover\:bg-dark-600:hover { background-color: #e2e8f0; }
.light .hover\:text-white:hover { color: #0f172a; }

/* --- Focus ring overrides --- */
.light .focus\:ring-primary-500\/50:focus { --tw-ring-color: rgb(255 107 53 / 0.3); }
.light .focus\:border-primary-500:focus { border-color: #ff6b35; }

/* --- Header & sidebar --- */
.light header { box-shadow: 0 1px 3px rgb(0 0 0 / 0.05); }
.light .border-b.border-dark-600 { border-color: #e2e8f0; }

/* --- Ring overrides --- */
.light .ring-dark-600 { --tw-ring-color: #cbd5e1; }

/* --- Shadow adjustments --- */
.light .shadow-xl { --tw-shadow-color: rgb(0 0 0 / 0.08); }

/* --- Tab link/active classes (used in updates and other pages) --- */
.tab-link {
  @apply px-4 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer;
}
.dark .tab-link {
  color: #9ca3af;
}
.dark .tab-link:hover {
  color: #ffffff;
  background-color: #161b22;
}
.light .tab-link {
  color: #6b7280;
}
.light .tab-link:hover {
  @apply text-gray-900 bg-slate-100;
}
.tab-active {
  @apply px-4 py-2 text-sm font-medium rounded-lg;
}
.dark .tab-active {
  @apply text-primary-400 bg-primary-500/10;
}
.light .tab-active {
  @apply text-primary-600 bg-primary-50;
}
