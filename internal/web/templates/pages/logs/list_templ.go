// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package logs

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"fmt"
	"github.com/fr4nsys/usulnet/internal/web/templates/layouts"
)

// ContainerBasicView is the minimal container info for the selector.
type ContainerBasicView struct {
	ID    string
	Name  string
	State string
}

// LogsPageData holds data for the centralized logs page.
type LogsPageData struct {
	PageData   layouts.PageData
	Containers []ContainerBasicView
	Selected   []string // Pre-selected container IDs (from query params)
}

// isSelected checks if a container ID is in the selected list.
func isSelected(id string, selected []string) bool {
	for _, s := range selected {
		if s == id {
			return true
		}
	}
	return false
}

// stateColor returns the dot color class for a container state.
func stateColor(state string) string {
	switch state {
	case "running":
		return "bg-green-400"
	case "paused":
		return "bg-yellow-400"
	case "exited", "dead":
		return "bg-red-400"
	default:
		return "bg-gray-500"
	}
}

func LogsList(data LogsPageData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div x-data=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var3 string
			templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(logsAppInit(data))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/logs/list.templ`, Line: 48, Col: 33}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "\" x-init=\"init()\" class=\"space-y-6\"><!-- Header --><div class=\"flex items-center justify-between\"><div><h1 class=\"text-2xl font-bold text-white\">Centralized Logs</h1><p class=\"text-gray-400 mt-1\">Stream and search logs from multiple containers</p></div><div class=\"flex items-center gap-3\"><button @click=\"exportLogs()\" :disabled=\"logLines.length === 0\" class=\"flex items-center gap-2 bg-dark-700 text-gray-300 hover:text-white px-4 py-2 rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed\"><i class=\"fas fa-download text-sm\"></i> Export</button> <button @click=\"clearLogs()\" :disabled=\"logLines.length === 0\" class=\"flex items-center gap-2 bg-dark-700 text-gray-300 hover:text-white px-4 py-2 rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed\"><i class=\"fas fa-trash-alt text-sm\"></i> Clear</button></div></div><!-- Controls Row --><div class=\"bg-dark-800 border border-dark-700 rounded-xl p-4\"><div class=\"grid grid-cols-1 lg:grid-cols-4 gap-4\"><!-- Container Selector --><div class=\"lg:col-span-2\"><label class=\"block text-sm font-medium text-gray-400 mb-2\"><i class=\"fas fa-cubes mr-1\"></i> Containers</label><div class=\"relative\" x-data=\"{ open: false }\"><button @click=\"open = !open\" class=\"w-full flex items-center justify-between bg-dark-700 border border-dark-600 rounded-lg text-white px-3 py-2 text-sm\"><span x-text=\"selectedContainers.length === 0 ? 'Select containers...' : selectedContainers.length + ' container(s) selected'\"></span> <i class=\"fas fa-chevron-down text-gray-500 text-xs transition-transform\" :class=\"open && 'rotate-180'\"></i></button><div x-show=\"open\" @click.outside=\"open = false\" x-transition class=\"absolute z-20 mt-1 w-full bg-dark-700 border border-dark-600 rounded-lg shadow-xl max-h-64 overflow-y-auto\"><div class=\"p-2 border-b border-dark-600\"><div class=\"flex gap-2\"><button @click=\"selectAll()\" class=\"text-xs text-primary-400 hover:text-primary-300\">Select All</button> <span class=\"text-gray-400\">|</span> <button @click=\"selectNone()\" class=\"text-xs text-gray-400 hover:text-gray-300\">Clear</button> <span class=\"text-gray-400\">|</span> <button @click=\"selectRunning()\" class=\"text-xs text-green-400 hover:text-green-300\">Running Only</button></div></div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			for _, c := range data.Containers {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "<label class=\"flex items-center gap-3 px-3 py-2 hover:bg-dark-600/50 cursor-pointer\"><input type=\"checkbox\" :checked=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var4 string
				templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("selectedContainers.includes('%s')", c.ID))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/logs/list.templ`, Line: 110, Col: 76}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "\" @change=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var5 string
				templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("toggleContainer('%s')", c.ID))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/logs/list.templ`, Line: 111, Col: 63}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "\" class=\"rounded border-dark-500 bg-dark-600 text-primary-500 focus:ring-primary-500\"> ")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var6 = []any{"w-2 h-2 rounded-full flex-shrink-0", stateColor(c.State)}
				templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var6...)
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "<span class=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var7 string
				templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var6).String())
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/logs/list.templ`, Line: 1, Col: 0}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "\"></span> <span class=\"text-sm text-white truncate\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var8 string
				templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinStringErrs(c.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/logs/list.templ`, Line: 115, Col: 60}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "</span> <span class=\"text-xs text-gray-500 ml-auto\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var9 string
				templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinStringErrs(c.State)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/logs/list.templ`, Line: 116, Col: 63}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "</span></label> ")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			if len(data.Containers) == 0 {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "<div class=\"px-3 py-4 text-center text-gray-500 text-sm\">No containers found</div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "</div></div></div><!-- Search --><div><label class=\"block text-sm font-medium text-gray-400 mb-2\"><i class=\"fas fa-search mr-1\"></i> Filter</label> <input type=\"text\" x-model=\"searchFilter\" placeholder=\"Search logs...\" class=\"w-full bg-dark-700 border border-dark-600 rounded-lg text-white px-3 py-2 text-sm placeholder-gray-500 focus:border-primary-500 focus:ring-1 focus:ring-primary-500\"></div><!-- Options --><div><label class=\"block text-sm font-medium text-gray-400 mb-2\"><i class=\"fas fa-sliders-h mr-1\"></i> Options</label><div class=\"flex items-center gap-4\"><select x-model=\"tailLines\" class=\"bg-dark-700 border border-dark-600 rounded-lg text-white px-3 py-2 text-sm\"><option value=\"100\">100 lines</option> <option value=\"500\">500 lines</option> <option value=\"1000\">1000 lines</option> <option value=\"5000\">5000 lines</option></select> <label class=\"flex items-center gap-2 text-sm text-gray-400 cursor-pointer select-none\"><input type=\"checkbox\" x-model=\"autoScroll\" class=\"rounded border-dark-500 bg-dark-600 text-primary-500 focus:ring-primary-500\"> Auto-scroll</label></div></div></div><!-- Action Bar --><div class=\"flex items-center justify-between mt-4 pt-4 border-t border-dark-700\"><div class=\"flex items-center gap-4\"><button @click=\"startStreaming()\" :disabled=\"selectedContainers.length === 0 || streaming\" class=\"flex items-center gap-2 bg-primary-500 hover:bg-primary-600 text-black font-medium px-4 py-2 rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed\"><i class=\"fas fa-play text-sm\"></i> Start</button> <button @click=\"stopStreaming()\" :disabled=\"!streaming\" class=\"flex items-center gap-2 bg-red-500/10 text-red-400 hover:bg-red-500/20 px-4 py-2 rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed\"><i class=\"fas fa-stop text-sm\"></i> Stop</button> <button @click=\"pauseStreaming()\" :disabled=\"!streaming\" class=\"flex items-center gap-2 bg-dark-700 text-gray-300 hover:text-white px-4 py-2 rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed\"><i class=\"fas\" :class=\"paused ? 'fa-play' : 'fa-pause'\"></i> <span x-text=\"paused ? 'Resume' : 'Pause'\"></span></button></div><div class=\"flex items-center gap-4 text-sm text-gray-400\"><span><i class=\"fas fa-circle text-xs mr-1\" :class=\"streaming ? 'text-green-400 animate-pulse' : 'text-gray-400'\"></i> <span x-text=\"streaming ? 'Streaming' : 'Stopped'\"></span></span> <span x-text=\"logLines.length + ' lines'\"></span> <span x-text=\"activeConnections + ' connections'\"></span></div></div></div><!-- Log Output --><div class=\"bg-dark-800 border border-dark-700 rounded-xl overflow-hidden\"><!-- Log container --><div x-ref=\"logOutput\" class=\"font-mono text-xs leading-relaxed overflow-y-auto p-4\" style=\"max-height: 65vh; min-height: 400px;\"><template x-if=\"logLines.length === 0\"><div class=\"flex flex-col items-center justify-center py-20 text-gray-500\"><i class=\"fas fa-terminal text-4xl mb-4\"></i><p class=\"text-lg\">No log output</p><p class=\"text-sm mt-1\">Select containers and click Start to begin streaming</p></div></template><template x-for=\"(line, idx) in filteredLines\" :key=\"idx\"><div class=\"flex gap-3 py-0.5 hover:bg-dark-700/30\" x-show=\"matchesFilter(line)\"><span class=\"text-gray-400 select-none w-12 text-right flex-shrink-0\" x-text=\"idx + 1\"></span> <span class=\"px-1.5 py-0 rounded text-xs font-medium flex-shrink-0\" :class=\"containerColor(line.container)\" x-text=\"line.containerName\" :title=\"line.container\"></span> <span class=\"text-gray-400 flex-shrink-0\" x-text=\"line.timestamp || ''\"></span> <span class=\"text-gray-200 whitespace-pre-wrap break-all\" x-text=\"line.text\"></span></div></template></div></div></div><script>\n\t\t\tfunction logsApp() {\n\t\t\t\treturn {\n\t\t\t\t\t// State\n\t\t\t\t\tselectedContainers: [],\n\t\t\t\t\tcontainerNames: {},\n\t\t\t\t\tlogLines: [],\n\t\t\t\t\tsearchFilter: '',\n\t\t\t\t\ttailLines: '500',\n\t\t\t\t\tautoScroll: true,\n\t\t\t\t\tstreaming: false,\n\t\t\t\t\tpaused: false,\n\t\t\t\t\tactiveConnections: 0,\n\t\t\t\t\tsockets: {},\n\t\t\t\t\tmaxLines: 10000,\n\n\t\t\t\t\t// Container color palette\n\t\t\t\t\tcolorPalette: [\n\t\t\t\t\t\t'bg-blue-500/20 text-blue-400',\n\t\t\t\t\t\t'bg-green-500/20 text-green-400',\n\t\t\t\t\t\t'bg-yellow-500/20 text-yellow-400',\n\t\t\t\t\t\t'bg-purple-500/20 text-purple-400',\n\t\t\t\t\t\t'bg-pink-500/20 text-pink-400',\n\t\t\t\t\t\t'bg-cyan-500/20 text-cyan-400',\n\t\t\t\t\t\t'bg-orange-500/20 text-orange-400',\n\t\t\t\t\t\t'bg-red-500/20 text-red-400',\n\t\t\t\t\t\t'bg-indigo-500/20 text-indigo-400',\n\t\t\t\t\t\t'bg-teal-500/20 text-teal-400',\n\t\t\t\t\t],\n\t\t\t\t\tcontainerColorMap: {},\n\t\t\t\t\tcolorIndex: 0,\n\n\t\t\t\t\tinit() {\n\t\t\t\t\t\t// Build name map from DOM data\n\t\t\t\t\t\tthis.containerNames = JSON.parse(this.$el.dataset.containers || '{}');\n\t\t\t\t\t},\n\n\t\t\t\t\ttoggleContainer(id) {\n\t\t\t\t\t\tconst idx = this.selectedContainers.indexOf(id);\n\t\t\t\t\t\tif (idx === -1) {\n\t\t\t\t\t\t\tthis.selectedContainers.push(id);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.selectedContainers.splice(idx, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\tselectAll() {\n\t\t\t\t\t\tconst allIds = Object.keys(this.containerNames);\n\t\t\t\t\t\tthis.selectedContainers = [...allIds];\n\t\t\t\t\t},\n\n\t\t\t\t\tselectNone() {\n\t\t\t\t\t\tthis.selectedContainers = [];\n\t\t\t\t\t},\n\n\t\t\t\t\tselectRunning() {\n\t\t\t\t\t\tconst running = JSON.parse(this.$el.dataset.running || '[]');\n\t\t\t\t\t\tthis.selectedContainers = [...running];\n\t\t\t\t\t},\n\n\t\t\t\t\tcontainerColor(id) {\n\t\t\t\t\t\tif (!this.containerColorMap[id]) {\n\t\t\t\t\t\t\tthis.containerColorMap[id] = this.colorPalette[this.colorIndex % this.colorPalette.length];\n\t\t\t\t\t\t\tthis.colorIndex++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn this.containerColorMap[id];\n\t\t\t\t\t},\n\n\t\t\t\t\tstartStreaming() {\n\t\t\t\t\t\tthis.stopStreaming();\n\t\t\t\t\t\tthis.streaming = true;\n\t\t\t\t\t\tthis.paused = false;\n\t\t\t\t\t\tthis.activeConnections = 0;\n\n\t\t\t\t\t\tthis.selectedContainers.forEach(id => {\n\t\t\t\t\t\t\tconst proto = location.protocol === 'https:' ? 'wss:' : 'ws:';\n\t\t\t\t\t\t\tconst url = `${proto}//${location.host}/ws/logs/${id}?tail=${this.tailLines}`;\n\t\t\t\t\t\t\tconst ws = new WebSocket(url);\n\t\t\t\t\t\t\tconst name = this.containerNames[id] || id.substring(0, 12);\n\n\t\t\t\t\t\t\tws.onopen = () => {\n\t\t\t\t\t\t\t\tthis.activeConnections++;\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tws.onmessage = (event) => {\n\t\t\t\t\t\t\t\tif (this.paused) return;\n\t\t\t\t\t\t\t\tconst text = event.data;\n\t\t\t\t\t\t\t\tconst ts = this.extractTimestamp(text);\n\t\t\t\t\t\t\t\tthis.logLines.push({\n\t\t\t\t\t\t\t\t\tcontainer: id,\n\t\t\t\t\t\t\t\t\tcontainerName: name,\n\t\t\t\t\t\t\t\t\ttimestamp: ts.timestamp,\n\t\t\t\t\t\t\t\t\ttext: ts.message,\n\t\t\t\t\t\t\t\t\traw: text,\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t// Trim excess lines\n\t\t\t\t\t\t\t\tif (this.logLines.length > this.maxLines) {\n\t\t\t\t\t\t\t\t\tthis.logLines.splice(0, this.logLines.length - this.maxLines);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (this.autoScroll) {\n\t\t\t\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t\t\t\tconst el = this.$refs.logOutput;\n\t\t\t\t\t\t\t\t\t\tif (el) el.scrollTop = el.scrollHeight;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tws.onclose = () => {\n\t\t\t\t\t\t\t\tthis.activeConnections = Math.max(0, this.activeConnections - 1);\n\t\t\t\t\t\t\t\tdelete this.sockets[id];\n\t\t\t\t\t\t\t\tif (Object.keys(this.sockets).length === 0) {\n\t\t\t\t\t\t\t\t\tthis.streaming = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tws.onerror = () => {\n\t\t\t\t\t\t\t\tws.close();\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tthis.sockets[id] = ws;\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tstopStreaming() {\n\t\t\t\t\t\tObject.values(this.sockets).forEach(ws => {\n\t\t\t\t\t\t\ttry { ws.close(); } catch(e) {}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.sockets = {};\n\t\t\t\t\t\tthis.streaming = false;\n\t\t\t\t\t\tthis.paused = false;\n\t\t\t\t\t\tthis.activeConnections = 0;\n\t\t\t\t\t},\n\n\t\t\t\t\tpauseStreaming() {\n\t\t\t\t\t\tthis.paused = !this.paused;\n\t\t\t\t\t},\n\n\t\t\t\t\tclearLogs() {\n\t\t\t\t\t\tthis.logLines = [];\n\t\t\t\t\t},\n\n\t\t\t\t\textractTimestamp(line) {\n\t\t\t\t\t\t// Try ISO timestamp at start\n\t\t\t\t\t\tconst match = line.match(/^(\\d{4}-\\d{2}-\\d{2}T[\\d:.]+Z?)\\s+(.*)/);\n\t\t\t\t\t\tif (match) {\n\t\t\t\t\t\t\tconst d = new Date(match[1]);\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttimestamp: d.toLocaleTimeString(),\n\t\t\t\t\t\t\t\tmessage: match[2],\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn { timestamp: '', message: line };\n\t\t\t\t\t},\n\n\t\t\t\t\tmatchesFilter(line) {\n\t\t\t\t\t\tif (!this.searchFilter) return true;\n\t\t\t\t\t\tconst q = this.searchFilter.toLowerCase();\n\t\t\t\t\t\treturn line.text.toLowerCase().includes(q) ||\n\t\t\t\t\t\t\t   line.containerName.toLowerCase().includes(q);\n\t\t\t\t\t},\n\n\t\t\t\t\tget filteredLines() {\n\t\t\t\t\t\tif (!this.searchFilter) return this.logLines;\n\t\t\t\t\t\tconst q = this.searchFilter.toLowerCase();\n\t\t\t\t\t\treturn this.logLines.filter(l =>\n\t\t\t\t\t\t\tl.text.toLowerCase().includes(q) ||\n\t\t\t\t\t\t\tl.containerName.toLowerCase().includes(q)\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\n\t\t\t\t\texportLogs() {\n\t\t\t\t\t\tconst lines = this.filteredLines.map(l =>\n\t\t\t\t\t\t\t`${l.timestamp}\\t${l.containerName}\\t${l.text}`\n\t\t\t\t\t\t).join('\\n');\n\t\t\t\t\t\tconst blob = new Blob([lines], { type: 'text/plain' });\n\t\t\t\t\t\tconst url = URL.createObjectURL(blob);\n\t\t\t\t\t\tconst a = document.createElement('a');\n\t\t\t\t\t\ta.href = url;\n\t\t\t\t\t\ta.download = `usulnet-logs-${new Date().toISOString().slice(0,19)}.log`;\n\t\t\t\t\t\ta.click();\n\t\t\t\t\t\tURL.revokeObjectURL(url);\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t</script>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = layouts.Base(data.PageData).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

// logsAppInit generates the x-data attribute with container metadata injected.
func logsAppInit(data LogsPageData) string {
	// Build JSON maps for container names and running IDs
	names := "{"
	running := "["
	for i, c := range data.Containers {
		if i > 0 {
			names += ","
		}
		names += fmt.Sprintf("'%s':'%s'", c.ID, c.Name)
		if c.State == "running" {
			if len(running) > 1 {
				running += ","
			}
			running += fmt.Sprintf("'%s'", c.ID)
		}
	}
	names += "}"
	running += "]"

	// Pre-select containers if specified
	selected := "["
	for i, s := range data.Selected {
		if i > 0 {
			selected += ","
		}
		selected += fmt.Sprintf("'%s'", s)
	}
	selected += "]"

	return fmt.Sprintf(
		`{ ...logsApp(), containerNames: %s, selectedContainers: %s, _running: %s, selectRunning() { this.selectedContainers = [...this._running]; } }`,
		names, selected, running,
	)
}

var _ = templruntime.GeneratedTemplate
