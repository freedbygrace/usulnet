// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
// SPDX-License-Identifier: AGPL-3.0-or-later

// Copyright (c) 2024-2026 usulnet contributors

// https://github.com/fr4nsys/usulnet

package enterprise

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"github.com/fr4nsys/usulnet/internal/web/templates/layouts"
)

type GitSyncData struct {
	PageData layouts.PageData
}

func GitSync(data GitSyncData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div x-data=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var3 string
			templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(gitSyncApp(data.PageData.CSRFToken))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/enterprise/git_sync.templ`, Line: 18, Col: 47}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "\" x-init=\"init()\" class=\"space-y-6\" x-cloak><!-- Header --><div class=\"flex items-center justify-between\"><div><h1 class=\"text-2xl font-display font-bold text-white\">Git Sync</h1><p class=\"text-gray-400 mt-1\">Bidirectional synchronization between Git repositories and UI-managed stacks</p></div><button @click=\"showCreateModal = true\" class=\"btn-primary\"><i class=\"fas fa-plus mr-2\"></i>New Sync Config</button></div><!-- Stats Cards --><div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\"><div class=\"bg-dark-800 rounded-xl border border-dark-600 p-5\"><div class=\"flex items-center gap-3\"><div class=\"w-10 h-10 rounded-lg bg-primary-500/10 flex items-center justify-center\"><i class=\"fas fa-cogs text-primary-400\"></i></div><div><p class=\"text-2xl font-bold text-white\" x-text=\"stats.total_configs || 0\"></p><p class=\"text-xs text-gray-500\">Total Configs</p></div></div></div><div class=\"bg-dark-800 rounded-xl border border-dark-600 p-5\"><div class=\"flex items-center gap-3\"><div class=\"w-10 h-10 rounded-lg bg-green-500/10 flex items-center justify-center\"><i class=\"fas fa-sync text-green-400\"></i></div><div><p class=\"text-2xl font-bold text-white\" x-text=\"stats.active_configs || 0\"></p><p class=\"text-xs text-gray-500\">Active Syncs</p></div></div></div><div class=\"bg-dark-800 rounded-xl border border-dark-600 p-5\"><div class=\"flex items-center gap-3\"><div class=\"w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center\"><i class=\"fas fa-clock text-blue-400\"></i></div><div><p class=\"text-2xl font-bold text-white\" x-text=\"stats.total_syncs || 0\"></p><p class=\"text-xs text-gray-500\">Total Syncs</p></div></div></div><div class=\"bg-dark-800 rounded-xl border border-dark-600 p-5\"><div class=\"flex items-center gap-3\"><div class=\"w-10 h-10 rounded-lg bg-yellow-500/10 flex items-center justify-center\"><i class=\"fas fa-exclamation-triangle text-yellow-400\"></i></div><div><p class=\"text-2xl font-bold text-white\" x-text=\"stats.pending_conflicts || 0\"></p><p class=\"text-xs text-gray-500\">Pending Conflicts</p></div></div></div></div><!-- Tabs --><div class=\"border-b border-dark-600\"><nav class=\"flex gap-6\"><button @click=\"activeTab = 'configs'\" :class=\"activeTab === 'configs' ? 'border-primary-500 text-primary-400' : 'border-transparent text-gray-400 hover:text-gray-300'\" class=\"pb-3 border-b-2 text-sm font-medium transition-colors\"><i class=\"fas fa-cogs mr-2\"></i>Configurations</button> <button @click=\"activeTab = 'events'; loadEvents()\" :class=\"activeTab === 'events' ? 'border-primary-500 text-primary-400' : 'border-transparent text-gray-400 hover:text-gray-300'\" class=\"pb-3 border-b-2 text-sm font-medium transition-colors\"><i class=\"fas fa-stream mr-2\"></i>Sync Events</button> <button @click=\"activeTab = 'conflicts'; loadConflicts()\" :class=\"activeTab === 'conflicts' ? 'border-primary-500 text-primary-400' : 'border-transparent text-gray-400 hover:text-gray-300'\" class=\"pb-3 border-b-2 text-sm font-medium transition-colors\"><i class=\"fas fa-code-branch mr-2\"></i>Conflicts <span x-show=\"stats.pending_conflicts > 0\" class=\"ml-1 px-1.5 py-0.5 text-xs rounded-full bg-yellow-500/20 text-yellow-400\" x-text=\"stats.pending_conflicts\"></span></button></nav></div><!-- Configurations Tab --><div x-show=\"activeTab === 'configs'\"><div class=\"bg-dark-800 rounded-xl border border-dark-600 overflow-hidden\"><template x-if=\"loading\"><div class=\"p-8 text-center text-gray-400\"><i class=\"fas fa-spinner fa-spin text-2xl mb-3\"></i><p>Loading configurations...</p></div></template><template x-if=\"!loading && configs.length === 0\"><div class=\"p-8 text-center text-gray-400\"><i class=\"fas fa-code-branch text-3xl mb-3\"></i><p>No sync configurations yet</p><p class=\"text-sm mt-1\">Create one to start syncing between Git and your stacks.</p></div></template><template x-if=\"!loading && configs.length > 0\"><div class=\"overflow-x-auto\"><table class=\"w-full\"><thead><tr class=\"border-b border-dark-600 text-left\"><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Name</th><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Branch</th><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Direction</th><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Auto-Sync</th><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Last Sync</th><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th></tr></thead> <tbody class=\"divide-y divide-dark-700\"><template x-for=\"cfg in configs\" :key=\"cfg.id\"><tr class=\"hover:bg-dark-700/50 transition-colors\"><td class=\"px-4 py-3\"><div class=\"font-medium text-white\" x-text=\"cfg.name\"></div><div class=\"text-xs text-gray-500 truncate max-w-xs\" x-text=\"cfg.stack_name\"></div></td><td class=\"px-4 py-3\"><span class=\"text-sm text-gray-300 font-mono\" x-text=\"cfg.branch\"></span></td><td class=\"px-4 py-3\"><span class=\"px-2 py-1 text-xs rounded font-medium\" :class=\"directionBadge(cfg.sync_direction)\" x-text=\"directionLabel(cfg.sync_direction)\"></span></td><td class=\"px-4 py-3\"><button @click=\"toggleAutoSync(cfg)\" class=\"relative inline-flex h-5 w-10 items-center rounded-full transition-colors\" :class=\"cfg.is_enabled ? 'bg-primary-500' : 'bg-dark-500'\"><span class=\"inline-block h-4 w-4 transform rounded-full bg-white transition-transform\" :class=\"cfg.is_enabled ? 'translate-x-5' : 'translate-x-1'\"></span></button></td><td class=\"px-4 py-3\"><span class=\"text-sm text-gray-400\" x-text=\"cfg.last_sync_at ? new Date(cfg.last_sync_at).toLocaleString() : 'Never'\"></span></td><td class=\"px-4 py-3\"><span class=\"px-2 py-0.5 text-xs rounded\" :class=\"statusBadge(cfg.last_sync_status)\" x-text=\"cfg.last_sync_status || 'idle'\"></span></td><td class=\"px-4 py-3\"><div class=\"flex items-center gap-2\"><button @click=\"triggerSync(cfg)\" class=\"p-1.5 text-gray-400 hover:text-green-400 transition-colors\" title=\"Trigger Sync Now\" :disabled=\"!cfg.is_enabled || cfg.syncing\"><i class=\"fas fa-sync text-sm\" :class=\"cfg.syncing ? 'fa-spin' : ''\"></i></button> <button @click=\"viewEvents(cfg)\" class=\"p-1.5 text-gray-400 hover:text-blue-400 transition-colors\" title=\"View Events\"><i class=\"fas fa-stream text-sm\"></i></button> <button @click=\"deleteConfig(cfg)\" class=\"p-1.5 text-gray-400 hover:text-red-400 transition-colors\" title=\"Delete\"><i class=\"fas fa-trash text-sm\"></i></button></div></td></tr></template></tbody></table></div></template></div></div><!-- Events Tab --><div x-show=\"activeTab === 'events'\"><!-- Config filter for events --><div class=\"mb-4\"><select @change=\"selectedConfigId = $event.target.value; loadEvents()\" class=\"input w-64\"><option value=\"\">All Configurations</option><template x-for=\"cfg in configs\" :key=\"cfg.id\"><option :value=\"cfg.id\" x-text=\"cfg.name\"></option></template></select></div><div class=\"bg-dark-800 rounded-xl border border-dark-600 overflow-hidden\"><template x-if=\"eventsLoading\"><div class=\"p-8 text-center text-gray-400\"><i class=\"fas fa-spinner fa-spin text-2xl mb-3\"></i><p>Loading events...</p></div></template><template x-if=\"!eventsLoading && events.length === 0\"><div class=\"p-8 text-center text-gray-400\"><i class=\"fas fa-stream text-3xl mb-3\"></i><p>No sync events recorded yet</p></div></template><template x-if=\"!eventsLoading && events.length > 0\"><div class=\"overflow-x-auto\"><table class=\"w-full\"><thead><tr class=\"border-b border-dark-600 text-left\"><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Time</th><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Config</th><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Direction</th><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Type</th><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Message</th></tr></thead> <tbody class=\"divide-y divide-dark-700\"><template x-for=\"evt in events\" :key=\"evt.id\"><tr class=\"hover:bg-dark-700/50 transition-colors\"><td class=\"px-4 py-3 text-sm text-gray-400 whitespace-nowrap\" x-text=\"new Date(evt.created_at).toLocaleString()\"></td><td class=\"px-4 py-3 text-sm text-white\" x-text=\"configName(evt.config_id)\"></td><td class=\"px-4 py-3\"><span class=\"px-2 py-1 text-xs rounded font-medium\" :class=\"directionBadge(evt.direction)\" x-text=\"directionLabel(evt.direction)\"></span></td><td class=\"px-4 py-3 text-sm text-gray-300\" x-text=\"evt.event_type\"></td><td class=\"px-4 py-3\"><span class=\"px-2 py-0.5 text-xs rounded\" :class=\"statusBadge(evt.status)\" x-text=\"evt.status\"></span></td><td class=\"px-4 py-3 text-sm text-gray-400 max-w-xs truncate\"><span x-text=\"evt.commit_message || evt.error_message || '-'\"></span></td></tr></template></tbody></table></div></template></div></div><!-- Conflicts Tab --><div x-show=\"activeTab === 'conflicts'\"><div class=\"bg-dark-800 rounded-xl border border-dark-600 overflow-hidden\"><template x-if=\"conflictsLoading\"><div class=\"p-8 text-center text-gray-400\"><i class=\"fas fa-spinner fa-spin text-2xl mb-3\"></i><p>Loading conflicts...</p></div></template><template x-if=\"!conflictsLoading && conflicts.length === 0\"><div class=\"p-8 text-center text-gray-400\"><i class=\"fas fa-check-circle text-3xl mb-3 text-green-500\"></i><p>No unresolved conflicts</p></div></template><template x-if=\"!conflictsLoading && conflicts.length > 0\"><div class=\"overflow-x-auto\"><table class=\"w-full\"><thead><tr class=\"border-b border-dark-600 text-left\"><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Config</th><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">File Path</th><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Detected</th><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th><th class=\"px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th></tr></thead> <tbody class=\"divide-y divide-dark-700\"><template x-for=\"conflict in conflicts\" :key=\"conflict.id\"><tr class=\"hover:bg-dark-700/50 transition-colors\"><td class=\"px-4 py-3 text-sm text-white\" x-text=\"configName(conflict.config_id)\"></td><td class=\"px-4 py-3 text-sm text-gray-300 font-mono\" x-text=\"conflict.file_path\"></td><td class=\"px-4 py-3 text-sm text-gray-400 whitespace-nowrap\" x-text=\"new Date(conflict.created_at).toLocaleString()\"></td><td class=\"px-4 py-3\"><span class=\"px-2 py-0.5 text-xs rounded\" :class=\"conflict.resolution === 'pending' ? 'bg-yellow-500/20 text-yellow-400' : 'bg-green-500/20 text-green-400'\" x-text=\"conflict.resolution\"></span></td><td class=\"px-4 py-3\"><template x-if=\"conflict.resolution === 'pending'\"><div class=\"flex items-center gap-2\"><button @click=\"resolveConflict(conflict, 'use_git')\" class=\"px-2 py-1 text-xs rounded bg-blue-500/20 text-blue-400 hover:bg-blue-500/30 transition-colors\" title=\"Use content from Git\">Use Git</button> <button @click=\"resolveConflict(conflict, 'use_ui')\" class=\"px-2 py-1 text-xs rounded bg-purple-500/20 text-purple-400 hover:bg-purple-500/30 transition-colors\" title=\"Use content from UI\">Use UI</button> <button @click=\"openManualMerge(conflict)\" class=\"px-2 py-1 text-xs rounded bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30 transition-colors\" title=\"Manually merge content\">Manual</button></div></template><template x-if=\"conflict.resolution !== 'pending'\"><span class=\"text-sm text-gray-500\">Resolved</span></template></td></tr></template></tbody></table></div></template></div></div><!-- Create Config Modal --><template x-if=\"showCreateModal\"><div class=\"fixed inset-0 z-50 flex items-center justify-center p-4\" @keydown.escape.window=\"showCreateModal = false\"><div class=\"fixed inset-0 bg-black/60\" @click=\"showCreateModal = false\"></div><div class=\"relative bg-dark-800 rounded-xl border border-dark-600 w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl\"><div class=\"flex items-center justify-between p-5 border-b border-dark-600\"><h3 class=\"text-lg font-semibold text-white\">New Sync Configuration</h3><button @click=\"showCreateModal = false\" class=\"text-gray-400 hover:text-white\"><i class=\"fas fa-times\"></i></button></div><div class=\"p-5 space-y-4\"><div><label class=\"block text-sm font-medium text-gray-300 mb-2\">Name</label> <input type=\"text\" x-model=\"newConfig.name\" class=\"input w-full\" placeholder=\"my-stack-sync\"></div><div><label class=\"block text-sm font-medium text-gray-300 mb-2\">Connection ID</label> <input type=\"text\" x-model=\"newConfig.connection_id\" class=\"input w-full font-mono\" placeholder=\"UUID of the Git connection\"></div><div><label class=\"block text-sm font-medium text-gray-300 mb-2\">Repository ID</label> <input type=\"text\" x-model=\"newConfig.repository_id\" class=\"input w-full font-mono\" placeholder=\"UUID of the Git repository\"></div><div><label class=\"block text-sm font-medium text-gray-300 mb-2\">Repository Full Name</label> <input type=\"text\" x-model=\"newConfig.repo_full_name\" class=\"input w-full font-mono\" placeholder=\"org/repo\"><p class=\"text-xs text-gray-500 mt-1\">Full name of the Git repository (e.g. owner/repo)</p></div><div><label class=\"block text-sm font-medium text-gray-300 mb-2\">Stack Name</label> <input type=\"text\" x-model=\"newConfig.stack_name\" class=\"input w-full\" placeholder=\"my-stack\"></div><div><label class=\"block text-sm font-medium text-gray-300 mb-2\">Target Path</label> <input type=\"text\" x-model=\"newConfig.target_path\" class=\"input w-full font-mono\" placeholder=\"stacks/my-stack\"></div><div><label class=\"block text-sm font-medium text-gray-300 mb-2\">Branch</label> <input type=\"text\" x-model=\"newConfig.branch\" class=\"input w-full font-mono\" placeholder=\"main\"></div><div><label class=\"block text-sm font-medium text-gray-300 mb-2\">File Pattern</label> <input type=\"text\" x-model=\"newConfig.file_pattern\" class=\"input w-full font-mono\" placeholder=\"docker-compose*.yml\"></div><div><label class=\"block text-sm font-medium text-gray-300 mb-2\">Sync Direction</label> <select x-model=\"newConfig.sync_direction\" class=\"input w-full\"><option value=\"from_git\">Git → UI</option> <option value=\"to_git\">UI → Git</option> <option value=\"bidirectional\">Bidirectional</option></select></div><div><label class=\"block text-sm font-medium text-gray-300 mb-2\">Conflict Strategy</label> <select x-model=\"newConfig.conflict_strategy\" class=\"input w-full\"><option value=\"manual\">Manual Resolution</option> <option value=\"prefer_git\">Prefer Git</option> <option value=\"prefer_ui\">Prefer UI</option></select></div><div class=\"flex items-center gap-4\"><label class=\"flex items-center gap-2 cursor-pointer\"><input type=\"checkbox\" x-model=\"newConfig.auto_commit\" class=\"rounded border-dark-600 bg-dark-700 text-primary-500\"> <span class=\"text-sm text-gray-300\">Auto-commit</span></label> <label class=\"flex items-center gap-2 cursor-pointer\"><input type=\"checkbox\" x-model=\"newConfig.auto_deploy\" class=\"rounded border-dark-600 bg-dark-700 text-primary-500\"> <span class=\"text-sm text-gray-300\">Auto-deploy</span></label></div></div><div class=\"flex justify-end gap-3 p-5 border-t border-dark-600\"><button @click=\"showCreateModal = false\" class=\"btn-secondary\">Cancel</button> <button @click=\"createConfig()\" class=\"btn-primary\" :disabled=\"!newConfig.name || creating\"><i class=\"fas fa-plus mr-2\" x-show=\"!creating\"></i> <i class=\"fas fa-spinner fa-spin mr-2\" x-show=\"creating\"></i> <span x-text=\"creating ? 'Creating...' : 'Create'\"></span></button></div></div></div></template><!-- Manual Merge Modal --><template x-if=\"showMergeModal\"><div class=\"fixed inset-0 z-50 flex items-center justify-center p-4\" @keydown.escape.window=\"showMergeModal = false\"><div class=\"fixed inset-0 bg-black/60\" @click=\"showMergeModal = false\"></div><div class=\"relative bg-dark-800 rounded-xl border border-dark-600 w-full max-w-3xl max-h-[90vh] overflow-y-auto shadow-2xl\"><div class=\"flex items-center justify-between p-5 border-b border-dark-600\"><h3 class=\"text-lg font-semibold text-white\">Manual Merge: <span class=\"text-gray-400 font-mono text-sm\" x-text=\"mergeConflict?.file_path\"></span></h3><button @click=\"showMergeModal = false\" class=\"text-gray-400 hover:text-white\"><i class=\"fas fa-times\"></i></button></div><div class=\"p-5 space-y-4\"><div class=\"grid grid-cols-2 gap-4\"><div><label class=\"block text-sm font-medium text-gray-300 mb-2\"><i class=\"fas fa-code-branch mr-1 text-blue-400\"></i>Git Content</label><pre class=\"bg-dark-900 border border-dark-600 rounded-lg p-3 text-sm text-gray-300 font-mono overflow-auto max-h-48 whitespace-pre-wrap\" x-text=\"mergeConflict?.git_content\"></pre></div><div><label class=\"block text-sm font-medium text-gray-300 mb-2\"><i class=\"fas fa-desktop mr-1 text-purple-400\"></i>UI Content</label><pre class=\"bg-dark-900 border border-dark-600 rounded-lg p-3 text-sm text-gray-300 font-mono overflow-auto max-h-48 whitespace-pre-wrap\" x-text=\"mergeConflict?.ui_content\"></pre></div></div><div><label class=\"block text-sm font-medium text-gray-300 mb-2\">Resolved Content</label> <textarea x-model=\"mergeContent\" class=\"input w-full font-mono h-48 resize-y\" placeholder=\"Enter the resolved content here...\"></textarea></div></div><div class=\"flex justify-end gap-3 p-5 border-t border-dark-600\"><button @click=\"showMergeModal = false\" class=\"btn-secondary\">Cancel</button> <button @click=\"submitManualMerge()\" class=\"btn-primary\" :disabled=\"!mergeContent\"><i class=\"fas fa-check mr-2\"></i>Apply Merge</button></div></div></div></template></div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = layouts.Base(data.PageData).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func gitSyncApp(csrfToken string) string {
	return `{
		csrfToken: '` + csrfToken + `',
		activeTab: 'configs',
		loading: true,
		creating: false,
		eventsLoading: false,
		conflictsLoading: false,
		showCreateModal: false,
		showMergeModal: false,

		configs: [],
		events: [],
		conflicts: [],
		stats: {},
		selectedConfigId: '',

		mergeConflict: null,
		mergeContent: '',

		newConfig: {
			name: '',
			connection_id: '',
			repository_id: '',
			repo_full_name: '',
			stack_name: '',
			target_path: '',
			branch: 'main',
			file_pattern: 'docker-compose*.yml',
			sync_direction: 'from_git',
			conflict_strategy: 'manual',
			auto_commit: false,
			auto_deploy: false
		},

		async init() {
			await this.loadConfigs();
			await this.loadStats();
		},

		headers() {
			var h = { 'Content-Type': 'application/json' };
			if (this.csrfToken) h['X-CSRF-Token'] = this.csrfToken;
			return h;
		},

		async loadConfigs() {
			this.loading = true;
			try {
				var resp = await fetch('/api/v1/git-sync/configs');
				if (!resp.ok) throw new Error('Failed to load configs');
				var body = await resp.json();
				this.configs = Array.isArray(body) ? body : (body.data || []);
			} catch (e) {
				if (typeof usulnet !== 'undefined') usulnet.toast(e.message, 'error');
				this.configs = [];
			} finally {
				this.loading = false;
			}
		},

		async loadStats() {
			try {
				var resp = await fetch('/api/v1/git-sync/stats');
				if (!resp.ok) throw new Error('Failed to load stats');
				this.stats = await resp.json() || {};
			} catch (e) {
				this.stats = {};
			}
		},

		async loadEvents() {
			if (!this.selectedConfigId && this.configs.length === 0) {
				this.events = [];
				return;
			}
			this.eventsLoading = true;
			try {
				var allEvents = [];
				var configIds = this.selectedConfigId
					? [this.selectedConfigId]
					: this.configs.map(function(c) { return c.id; });
				for (var i = 0; i < configIds.length; i++) {
					var resp = await fetch('/api/v1/git-sync/configs/' + configIds[i] + '/events?limit=50');
					if (resp.ok) {
						var data = await resp.json();
						var items = Array.isArray(data) ? data : (data.data || []);
						allEvents = allEvents.concat(items);
					}
				}
				allEvents.sort(function(a, b) { return new Date(b.created_at) - new Date(a.created_at); });
				this.events = allEvents.slice(0, 100);
			} catch (e) {
				if (typeof usulnet !== 'undefined') usulnet.toast('Failed to load events', 'error');
				this.events = [];
			} finally {
				this.eventsLoading = false;
			}
		},

		async loadConflicts() {
			this.conflictsLoading = true;
			try {
				var allConflicts = [];
				for (var i = 0; i < this.configs.length; i++) {
					var resp = await fetch('/api/v1/git-sync/configs/' + this.configs[i].id + '/conflicts');
					if (resp.ok) {
						var data = await resp.json();
						var items = Array.isArray(data) ? data : (data.data || []);
						allConflicts = allConflicts.concat(items);
					}
				}
				allConflicts.sort(function(a, b) { return new Date(b.created_at) - new Date(a.created_at); });
				this.conflicts = allConflicts;
			} catch (e) {
				if (typeof usulnet !== 'undefined') usulnet.toast('Failed to load conflicts', 'error');
				this.conflicts = [];
			} finally {
				this.conflictsLoading = false;
			}
		},

		async createConfig() {
			if (!this.newConfig.name) return;
			this.creating = true;
			try {
				var resp = await fetch('/api/v1/git-sync/configs', {
					method: 'POST',
					headers: this.headers(),
					body: JSON.stringify(this.newConfig)
				});
				if (!resp.ok) {
					var errBody = await resp.json().catch(function() { return null; });
					var msg = (errBody && errBody.error) ? errBody.error : 'Failed to create config';
					throw new Error(msg);
				}
				if (typeof usulnet !== 'undefined') usulnet.toast('Sync configuration created', 'success');
				this.showCreateModal = false;
				this.resetNewConfig();
				await this.loadConfigs();
				await this.loadStats();
			} catch (e) {
				if (typeof usulnet !== 'undefined') usulnet.toast(e.message, 'error');
			} finally {
				this.creating = false;
			}
		},

		async toggleAutoSync(cfg) {
			try {
				var resp = await fetch('/api/v1/git-sync/configs/' + cfg.id + '/toggle', {
					method: 'POST',
					headers: this.headers()
				});
				if (!resp.ok) { var eb = await resp.json().catch(function() { return null; }); throw new Error((eb && eb.error) ? eb.error : 'Failed to toggle sync'); }
				var result = await resp.json();
				cfg.is_enabled = result.enabled;
				await this.loadStats();
				if (typeof usulnet !== 'undefined') usulnet.toast('Auto-sync ' + (result.enabled ? 'enabled' : 'disabled'), 'success');
			} catch (e) {
				if (typeof usulnet !== 'undefined') usulnet.toast(e.message, 'error');
			}
		},

		async triggerSync(cfg) {
			if (!cfg.is_enabled) return;
			cfg.syncing = true;
			try {
				var resp = await fetch('/api/v1/git-sync/configs/' + cfg.id + '/trigger', {
					method: 'POST',
					headers: this.headers()
				});
				if (!resp.ok) {
					var eb = await resp.json().catch(function() { return null; });
					throw new Error((eb && eb.error) ? eb.error : 'Sync failed');
				}
				var result = await resp.json();
				if (typeof usulnet !== 'undefined') usulnet.toast('Sync ' + (result.status || 'completed'), 'success');
				await this.loadConfigs();
				await this.loadStats();
			} catch (e) {
				if (typeof usulnet !== 'undefined') usulnet.toast(e.message, 'error');
			} finally {
				cfg.syncing = false;
			}
		},

		async deleteConfig(cfg) {
			if (!confirm('Delete sync configuration "' + cfg.name + '"? This cannot be undone.')) return;
			try {
				var resp = await fetch('/api/v1/git-sync/configs/' + cfg.id, {
					method: 'DELETE',
					headers: this.headers()
				});
				if (!resp.ok) { var eb = await resp.json().catch(function() { return null; }); throw new Error((eb && eb.error) ? eb.error : 'Failed to delete config'); }
				if (typeof usulnet !== 'undefined') usulnet.toast('Configuration deleted', 'success');
				await this.loadConfigs();
				await this.loadStats();
			} catch (e) {
				if (typeof usulnet !== 'undefined') usulnet.toast(e.message, 'error');
			}
		},

		async resolveConflict(conflict, resolution) {
			try {
				var body = { resolution: resolution };
				var resp = await fetch('/api/v1/git-sync/conflicts/' + conflict.id + '/resolve', {
					method: 'POST',
					headers: this.headers(),
					body: JSON.stringify(body)
				});
				if (!resp.ok) throw new Error('Failed to resolve conflict');
				conflict.resolution = resolution;
				await this.loadStats();
				if (typeof usulnet !== 'undefined') usulnet.toast('Conflict resolved', 'success');
			} catch (e) {
				if (typeof usulnet !== 'undefined') usulnet.toast(e.message, 'error');
			}
		},

		openManualMerge(conflict) {
			this.mergeConflict = conflict;
			this.mergeContent = conflict.base_content || conflict.git_content || '';
			this.showMergeModal = true;
		},

		async submitManualMerge() {
			if (!this.mergeConflict || !this.mergeContent) return;
			try {
				var body = { resolution: 'merged', merged_content: this.mergeContent };
				var resp = await fetch('/api/v1/git-sync/conflicts/' + this.mergeConflict.id + '/resolve', {
					method: 'POST',
					headers: this.headers(),
					body: JSON.stringify(body)
				});
				if (!resp.ok) throw new Error('Failed to submit merge');
				this.mergeConflict.resolution = 'merged';
				this.showMergeModal = false;
				this.mergeConflict = null;
				this.mergeContent = '';
				await this.loadStats();
				if (typeof usulnet !== 'undefined') usulnet.toast('Manual merge applied', 'success');
			} catch (e) {
				if (typeof usulnet !== 'undefined') usulnet.toast(e.message, 'error');
			}
		},

		viewEvents(cfg) {
			this.selectedConfigId = cfg.id;
			this.activeTab = 'events';
			this.loadEvents();
		},

		resetNewConfig() {
			this.newConfig = {
				name: '',
				connection_id: '',
				repository_id: '',
				repo_full_name: '',
				stack_name: '',
				target_path: '',
				branch: 'main',
				file_pattern: 'docker-compose*.yml',
				sync_direction: 'from_git',
				conflict_strategy: 'manual',
				auto_commit: false,
				auto_deploy: false
			};
		},

		configName(configId) {
			var found = this.configs.find(function(c) { return c.id === configId; });
			return found ? found.name : configId.substring(0, 8);
		},

		directionLabel(dir) {
			switch (dir) {
				case 'from_git': return 'Git \u2192 UI';
				case 'to_git': return 'UI \u2192 Git';
				case 'bidirectional': return 'Bidirectional';
				default: return dir || '-';
			}
		},

		directionBadge(dir) {
			switch (dir) {
				case 'from_git': return 'bg-blue-500/20 text-blue-400';
				case 'to_git': return 'bg-purple-500/20 text-purple-400';
				case 'bidirectional': return 'bg-green-500/20 text-green-400';
				default: return 'bg-gray-500/20 text-gray-400';
			}
		},

		statusBadge(status) {
			switch (status) {
				case 'success': return 'bg-green-500/20 text-green-400';
				case 'failed': return 'bg-red-500/20 text-red-400';
				case 'conflict': return 'bg-yellow-500/20 text-yellow-400';
				case 'pending': return 'bg-blue-500/20 text-blue-400';
				default: return 'bg-gray-500/20 text-gray-400';
			}
		}
	}`
}

var _ = templruntime.GeneratedTemplate
