// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package containers

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"fmt"
	"github.com/fr4nsys/usulnet/internal/web/templates/layouts"
)

type ContainerFilesData struct {
	PageData    layouts.PageData
	ContainerID string
	Name        string
	State       string
	Image       string
	HostID      string
	CurrentPath string
}

func ContainerFiles(data ContainerFilesData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<!-- Breadcrumb --> <nav class=\"flex items-center gap-2 text-sm text-gray-400 mb-4\"><a href=\"/containers\" class=\"hover:text-primary-400 transition-colors\">Containers</a> <i class=\"fas fa-chevron-right text-xs\"></i> <a href=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var3 templ.SafeURL
			templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL("/containers/" + data.ContainerID))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/containers/files.templ`, Line: 24, Col: 61}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "\" class=\"hover:text-primary-400 transition-colors\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var4 string
			templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(data.Name)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/containers/files.templ`, Line: 24, Col: 124}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "</a> <i class=\"fas fa-chevron-right text-xs\"></i> <span class=\"text-white\">Files</span></nav><!-- Header --> <div class=\"flex items-center justify-between mb-6\"><div class=\"flex items-center gap-4\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var5 = []any{"w-10 h-10 rounded-lg flex items-center justify-center", stateIconBg(data.State)}
			templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var5...)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "<div class=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var6 string
			templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var5).String())
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/containers/files.templ`, Line: 1, Col: 0}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "\"><i class=\"fas fa-folder-open text-lg text-gray-300\"></i></div><div><h1 class=\"text-2xl font-bold font-display text-white\">File Browser</h1><p class=\"text-gray-400 text-sm\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var7 string
			templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(data.Name)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/containers/files.templ`, Line: 37, Col: 49}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, " &middot; ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var8 string
			templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinStringErrs(data.Image)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/containers/files.templ`, Line: 37, Col: 73}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "</p></div></div><div class=\"flex items-center gap-2\"><a href=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var9 templ.SafeURL
			templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL("/containers/" + data.ContainerID))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/containers/files.templ`, Line: 41, Col: 62}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "\" class=\"px-4 py-2 bg-dark-700 hover:bg-dark-600 text-gray-300 rounded-lg transition-colors\"><i class=\"fas fa-arrow-left mr-2\"></i>Back</a></div></div><!-- Container state warning --> ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.State != "running" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "<div class=\"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg\"><div class=\"flex items-center gap-3\"><i class=\"fas fa-exclamation-triangle text-yellow-400\"></i> <span class=\"text-yellow-200\">Container is not running. File browsing requires a running container.</span></div></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "<!-- File Browser --> ")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = containerBrowser(data).Render(ctx, templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			return nil
		})
		templ_7745c5c3_Err = layouts.Base(data.PageData).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func containerBrowser(data ContainerFilesData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var10 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var10 == nil {
			templ_7745c5c3_Var10 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "<div x-data=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var11 string
		templ_7745c5c3_Var11, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("containerBrowser('%s', '%s', '%s')", data.HostID, data.ContainerID, data.CurrentPath))
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/containers/files.templ`, Line: 66, Col: 109}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var11))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, "\" class=\"bg-dark-800 rounded-xl border border-dark-600 overflow-hidden\"><!-- Toolbar --><div class=\"flex items-center gap-4 p-4 border-b border-dark-600 bg-dark-850\"><!-- Breadcrumb Navigation --><nav class=\"flex items-center gap-1 text-sm flex-1 overflow-x-auto\"><button @click=\"navigateTo('/')\" class=\"text-primary-400 hover:text-primary-300\"><i class=\"fas fa-home\"></i></button><template x-for=\"(part, index) in pathParts\" :key=\"index\"><span class=\"flex items-center\"><span class=\"text-gray-500 mx-1\">/</span> <button @click=\"navigateTo(pathParts.slice(0, index + 1).join('/'))\" :class=\"index === pathParts.length - 1 ? 'text-white font-medium' : 'text-primary-400 hover:text-primary-300'\" x-text=\"part\"></button></span></template></nav><!-- Actions --><div class=\"flex items-center gap-2\"><button @click=\"showUploadModal = true\" class=\"px-3 py-1.5 bg-dark-600 hover:bg-dark-500 text-gray-300 text-sm rounded-lg\"><i class=\"fas fa-upload mr-1\"></i> Upload</button> <button @click=\"showNewFolderModal = true\" class=\"px-3 py-1.5 bg-dark-600 hover:bg-dark-500 text-gray-300 text-sm rounded-lg\"><i class=\"fas fa-folder-plus mr-1\"></i> New Folder</button> <button @click=\"refresh()\" class=\"px-3 py-1.5 bg-dark-600 hover:bg-dark-500 text-gray-300 text-sm rounded-lg\"><i class=\"fas fa-sync-alt mr-1\"></i> Refresh</button></div></div><!-- Loading State --><div x-show=\"loading\" class=\"flex items-center justify-center py-12\"><i class=\"fas fa-spinner fa-spin text-2xl text-primary-400\"></i></div><!-- Error State --><div x-show=\"error\" class=\"text-center py-12\" style=\"display: none;\"><div class=\"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-4\"><i class=\"fas fa-exclamation-triangle text-red-400 text-2xl\"></i></div><p class=\"text-red-400\" x-text=\"error\"></p><button @click=\"refresh()\" class=\"mt-4 px-4 py-2 bg-dark-600 hover:bg-dark-500 text-gray-300 rounded-lg\">Retry</button></div><!-- File List --><div x-show=\"!loading && !error\" class=\"space-y-1 p-4\" style=\"display: none;\"><!-- Parent Directory --><template x-if=\"currentPath !== '/'\"><button @click=\"navigateUp()\" class=\"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-dark-700 text-left group\"><div class=\"w-8 h-8 rounded-lg bg-yellow-500/10 flex items-center justify-center\"><i class=\"fas fa-level-up-alt text-yellow-400\"></i></div><div class=\"flex-1\"><span class=\"text-gray-300\">..</span></div></button></template><!-- Directories first, then files --><template x-for=\"file in sortedFiles\" :key=\"file.path\"><div class=\"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-dark-700 group\"><!-- Icon --><div :class=\"file.is_dir ? 'bg-yellow-500/10' : 'bg-blue-500/10'\" class=\"w-8 h-8 rounded-lg flex items-center justify-center\"><i :class=\"file.is_dir ? 'fas fa-folder text-yellow-400' : getFileIcon(file.name)\"></i></div><!-- Name --><div class=\"flex-1 min-w-0\"><template x-if=\"file.is_dir\"><button @click=\"navigateTo(file.path)\" class=\"text-white hover:text-primary-400 truncate block\" x-text=\"file.name\"></button></template><template x-if=\"!file.is_dir\"><button @click=\"viewFile(file)\" class=\"text-gray-300 hover:text-white truncate block\" x-text=\"file.name\"></button></template><template x-if=\"file.is_symlink\"><span class=\"text-xs text-gray-500 ml-2\"><i class=\"fas fa-arrow-right\"></i> <span x-text=\"file.link_target\"></span></span></template></div><!-- Size --><div class=\"text-sm text-gray-500 w-20 text-right\" x-text=\"file.is_dir ? '-' : file.size_human\"></div><!-- Modified --><div class=\"text-sm text-gray-500 w-32 text-right hidden md:block\" x-text=\"file.mod_time_ago\"></div><!-- Permissions --><div class=\"text-xs text-gray-400 font-mono w-24 hidden lg:block\" x-text=\"file.mode\"></div><!-- Actions --><div class=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity\"><template x-if=\"!file.is_dir\"><a :href=\"getDownloadUrl(file)\" class=\"p-2 text-gray-400 hover:text-primary-400 hover:bg-primary-500/10 rounded-lg\" title=\"Download\"><i class=\"fas fa-download text-sm\"></i></a></template><template x-if=\"!file.is_dir\"><button @click=\"editFile(file)\" class=\"p-2 text-gray-400 hover:text-cyan-400 hover:bg-cyan-500/10 rounded-lg\" title=\"Edit\"><i class=\"fas fa-edit text-sm\"></i></button></template><button @click=\"deleteFile(file)\" class=\"p-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg\" title=\"Delete\"><i class=\"fas fa-trash text-sm\"></i></button></div></div></template><!-- Empty State --><div x-show=\"files.length === 0\" class=\"text-center py-12\"><div class=\"w-16 h-16 rounded-full bg-dark-700 flex items-center justify-center mx-auto mb-4\"><i class=\"fas fa-folder-open text-gray-500 text-2xl\"></i></div><p class=\"text-gray-400\">This directory is empty</p></div></div><!-- File Viewer/Editor Modal with Monaco --><div x-show=\"viewingFile\" x-transition class=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\" @click.self=\"closeFileModal()\" style=\"display: none;\"><div class=\"bg-dark-800 rounded-xl border border-dark-600 w-full max-w-6xl h-[85vh] mx-4 flex flex-col shadow-2xl\"><div class=\"flex items-center justify-between px-6 py-3 border-b border-dark-600\"><div class=\"flex items-center gap-3 min-w-0\"><i class=\"fas fa-file-code text-blue-400\"></i> <span class=\"text-sm text-white font-medium truncate\" x-text=\"viewingFile?.name\"></span> <span class=\"text-xs px-2 py-0.5 rounded bg-dark-700 text-gray-400\" x-text=\"getLanguage(viewingFile?.name)\"></span><template x-if=\"editingFile\"><span class=\"text-xs px-2 py-0.5 rounded bg-cyan-500/20 text-cyan-400\"><i class=\"fas fa-edit mr-1\"></i>Editing</span></template></div><div class=\"flex items-center gap-2\"><template x-if=\"!editingFile && !fileContent?.binary\"><button @click=\"startEditing()\" class=\"px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg text-sm\"><i class=\"fas fa-edit mr-1\"></i> Edit</button></template><button @click=\"closeFileModal()\" class=\"text-gray-400 hover:text-white p-2\"><i class=\"fas fa-times\"></i></button></div></div><div class=\"flex-1 overflow-hidden\"><template x-if=\"fileContent?.binary\"><div class=\"flex items-center justify-center h-full text-gray-400\"><div class=\"text-center\"><i class=\"fas fa-file-alt text-4xl mb-4\"></i><p>Binary file cannot be displayed</p></div></div></template><template x-if=\"!fileContent?.binary\"><div class=\"h-full\" x-ref=\"monacoContainer\" x-show=\"monacoReady\"></div></template><template x-if=\"!monacoReady && !fileContent?.binary\"><div class=\"flex items-center justify-center h-full\"><i class=\"fas fa-spinner fa-spin text-2xl text-primary-400\"></i></div></template><template x-if=\"fileContent?.truncated\"><div class=\"absolute bottom-16 left-0 right-0 px-6\"><p class=\"text-sm text-yellow-400 bg-yellow-500/10 border border-yellow-500/30 rounded-lg px-3 py-2\"><i class=\"fas fa-info-circle mr-1\"></i> File truncated to 1MB. Download for full content.</p></div></template></div><div class=\"flex justify-between items-center px-6 py-3 border-t border-dark-600\"><div class=\"text-xs text-gray-500\"><span x-text=\"fileContent?.size ? (fileContent.size + ' bytes') : ''\"></span></div><div class=\"flex items-center gap-3\"><template x-if=\"editingFile && monacoEditor\"><button @click=\"saveFile()\" :disabled=\"saving\" class=\"px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg disabled:opacity-50\"><i class=\"fas fa-save mr-2\" x-show=\"!saving\"></i> <i class=\"fas fa-spinner fa-spin mr-2\" x-show=\"saving\"></i> <span x-text=\"saving ? 'Saving...' : 'Save'\"></span></button></template><a :href=\"getDownloadUrl(viewingFile)\" class=\"px-4 py-2 bg-primary-600 hover:bg-primary-500 text-white rounded-lg\"><i class=\"fas fa-download mr-2\"></i>Download</a> <button @click=\"closeFileModal()\" class=\"px-4 py-2 bg-dark-600 hover:bg-dark-500 text-gray-300 rounded-lg\">Close</button></div></div></div></div><!-- New Folder Modal --><div x-show=\"showNewFolderModal\" x-transition class=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\" @click.self=\"showNewFolderModal = false\" style=\"display: none;\"><div class=\"bg-dark-800 rounded-xl border border-dark-600 w-full max-w-md mx-4 p-6 shadow-2xl\"><h3 class=\"text-lg font-medium text-white mb-4\">Create New Folder</h3><input type=\"text\" x-model=\"newFolderName\" placeholder=\"Folder name...\" class=\"w-full px-4 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 mb-4\" @keyup.enter=\"createFolder()\"><div class=\"flex justify-end gap-3\"><button @click=\"showNewFolderModal = false; newFolderName = ''\" class=\"px-4 py-2 bg-dark-600 hover:bg-dark-500 text-gray-300 rounded-lg\">Cancel</button> <button @click=\"createFolder()\" :disabled=\"!newFolderName\" class=\"px-4 py-2 bg-primary-600 hover:bg-primary-500 text-white rounded-lg disabled:opacity-50\">Create</button></div></div></div><!-- Delete Confirmation Modal --><div x-show=\"deleteConfirm\" x-transition class=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\" @click.self=\"deleteConfirm = null\" style=\"display: none;\"><div class=\"bg-dark-800 rounded-xl border border-dark-600 w-full max-w-md mx-4 p-6 shadow-2xl\"><h3 class=\"text-lg font-medium text-white mb-4\"><i class=\"fas fa-exclamation-triangle text-red-400 mr-2\"></i> Delete <span x-text=\"deleteConfirm?.is_dir ? 'Directory' : 'File'\"></span></h3><p class=\"text-gray-400 mb-4\">Are you sure you want to delete <span class=\"text-white font-mono\" x-text=\"deleteConfirm?.name\"></span>?<template x-if=\"deleteConfirm?.is_dir\"><span class=\"text-red-400 block mt-2\">This will delete all contents.</span></template></p><div class=\"flex justify-end gap-3\"><button @click=\"deleteConfirm = null\" class=\"px-4 py-2 bg-dark-600 hover:bg-dark-500 text-gray-300 rounded-lg\">Cancel</button> <button @click=\"confirmDelete()\" class=\"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg\"><i class=\"fas fa-trash mr-2\"></i>Delete</button></div></div></div><!-- Upload Modal --><div x-show=\"showUploadModal\" x-transition class=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\" @click.self=\"showUploadModal = false\" style=\"display: none;\"><div class=\"bg-dark-800 rounded-xl border border-dark-600 w-full max-w-md mx-4 p-6 shadow-2xl\"><h3 class=\"text-lg font-medium text-white mb-4\">Upload File</h3><div class=\"border-2 border-dashed border-dark-500 rounded-lg p-8 text-center mb-4 transition-colors\" :class=\"dragOver ? 'border-primary-500 bg-primary-500/5' : ''\" @dragover.prevent=\"dragOver = true\" @dragleave.prevent=\"dragOver = false\" @drop.prevent=\"handleFileDrop($event)\"><i class=\"fas fa-cloud-upload-alt text-4xl text-gray-500 mb-4\"></i><p class=\"text-gray-400 mb-2\">Drag & drop files here or</p><label class=\"px-4 py-2 bg-primary-600 hover:bg-primary-500 text-white rounded-lg cursor-pointer inline-block\"><input type=\"file\" multiple class=\"hidden\" @change=\"handleFileSelect($event)\"> Browse Files</label></div><template x-if=\"uploadFiles.length > 0\"><div class=\"space-y-2 mb-4 max-h-32 overflow-y-auto\"><template x-for=\"(file, idx) in uploadFiles\" :key=\"idx\"><div class=\"flex items-center justify-between p-2 bg-dark-700 rounded-lg\"><span class=\"text-sm text-gray-300 truncate\" x-text=\"file.name\"></span> <button @click=\"uploadFiles.splice(idx, 1)\" class=\"text-gray-500 hover:text-red-400\"><i class=\"fas fa-times\"></i></button></div></template></div></template><div class=\"flex justify-end gap-3\"><button @click=\"showUploadModal = false; uploadFiles = []\" class=\"px-4 py-2 bg-dark-600 hover:bg-dark-500 text-gray-300 rounded-lg\">Cancel</button> <button @click=\"uploadToContainer()\" :disabled=\"uploadFiles.length === 0 || uploading\" class=\"px-4 py-2 bg-primary-600 hover:bg-primary-500 text-white rounded-lg disabled:opacity-50\"><i class=\"fas fa-upload mr-2\" x-show=\"!uploading\"></i> <i class=\"fas fa-spinner fa-spin mr-2\" x-show=\"uploading\"></i> <span x-text=\"uploading ? 'Uploading...' : 'Upload'\"></span></button></div></div></div></div><!-- Monaco Editor CDN --><script src=\"/static/vendor/monaco-editor/min/vs/loader.js\"></script><script>\n\t\t// Monaco loader config\n\t\trequire.config({\n\t\t\tpaths: { vs: '/static/vendor/monaco-editor/min/vs' }\n\t\t});\n\n\t\tfunction containerBrowser(hostID, containerID, initialPath) {\n\t\t\treturn {\n\t\t\t\thostID: hostID,\n\t\t\t\tcontainerID: containerID,\n\t\t\t\tcurrentPath: initialPath || '/',\n\t\t\t\tfiles: [],\n\t\t\t\tloading: true,\n\t\t\t\terror: null,\n\t\t\t\tviewingFile: null,\n\t\t\t\tfileContent: null,\n\t\t\t\teditingFile: false,\n\t\t\t\teditedContent: '',\n\t\t\t\tsaving: false,\n\t\t\t\tshowNewFolderModal: false,\n\t\t\t\tnewFolderName: '',\n\t\t\t\tdeleteConfirm: null,\n\t\t\t\tshowUploadModal: false,\n\t\t\t\tuploadFiles: [],\n\t\t\t\tuploading: false,\n\t\t\t\tdragOver: false,\n\t\t\t\tmonacoEditor: null,\n\t\t\t\tmonacoReady: false,\n\t\t\t\tmonacoLoaded: false,\n\n\t\t\t\tget pathParts() {\n\t\t\t\t\treturn this.currentPath.split('/').filter(p => p);\n\t\t\t\t},\n\n\t\t\t\tget sortedFiles() {\n\t\t\t\t\treturn [...this.files].sort((a, b) => {\n\t\t\t\t\t\tif (a.is_dir !== b.is_dir) return a.is_dir ? -1 : 1;\n\t\t\t\t\t\treturn a.name.localeCompare(b.name);\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tasync init() {\n\t\t\t\t\tawait this.loadFiles();\n\t\t\t\t\t// Pre-load Monaco\n\t\t\t\t\tthis.loadMonaco();\n\t\t\t\t},\n\n\t\t\t\tloadMonaco() {\n\t\t\t\t\tif (this.monacoLoaded) return;\n\t\t\t\t\tthis.monacoLoaded = true;\n\t\t\t\t\trequire(['vs/editor/editor.main'], () => {\n\t\t\t\t\t\t// Define usulnet theme\n\t\t\t\t\t\tmonaco.editor.defineTheme('usulnet-dark', {\n\t\t\t\t\t\t\tbase: 'vs-dark',\n\t\t\t\t\t\t\tinherit: true,\n\t\t\t\t\t\t\trules: [\n\t\t\t\t\t\t\t\t{ token: '', foreground: 'e6edf3', background: '0d1117' },\n\t\t\t\t\t\t\t\t{ token: 'comment', foreground: '8b949e', fontStyle: 'italic' },\n\t\t\t\t\t\t\t\t{ token: 'keyword', foreground: 'ff7b72' },\n\t\t\t\t\t\t\t\t{ token: 'string', foreground: 'a5d6ff' },\n\t\t\t\t\t\t\t\t{ token: 'number', foreground: '79c0ff' },\n\t\t\t\t\t\t\t\t{ token: 'type', foreground: 'ffa657' },\n\t\t\t\t\t\t\t\t{ token: 'function', foreground: 'd2a8ff' },\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tcolors: {\n\t\t\t\t\t\t\t\t'editor.background': '#0d1117',\n\t\t\t\t\t\t\t\t'editor.foreground': '#e6edf3',\n\t\t\t\t\t\t\t\t'editor.lineHighlightBackground': '#161b2233',\n\t\t\t\t\t\t\t\t'editor.selectionBackground': '#ff6b3540',\n\t\t\t\t\t\t\t\t'editorCursor.foreground': '#ff6b35',\n\t\t\t\t\t\t\t\t'editorLineNumber.foreground': '#484f58',\n\t\t\t\t\t\t\t\t'editorLineNumber.activeForeground': '#e6edf3',\n\t\t\t\t\t\t\t\t'editorIndentGuide.background': '#21262d',\n\t\t\t\t\t\t\t\t'editorWidget.background': '#161b22',\n\t\t\t\t\t\t\t\t'editorWidget.border': '#30363d',\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tasync loadFiles() {\n\t\t\t\t\tthis.loading = true;\n\t\t\t\t\tthis.error = null;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst response = await fetch(`/containers/${this.containerID}/files/api/browse${this.currentPath}`);\n\t\t\t\t\t\tif (!response.ok) throw new Error(await response.text());\n\t\t\t\t\t\tconst data = await response.json();\n\t\t\t\t\t\tthis.files = data.files || [];\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthis.error = e.message;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tasync refresh() {\n\t\t\t\t\tawait this.loadFiles();\n\t\t\t\t},\n\n\t\t\t\tnavigateTo(path) {\n\t\t\t\t\tif (!path.startsWith('/')) path = '/' + path;\n\t\t\t\t\tthis.currentPath = path;\n\t\t\t\t\tthis.loadFiles();\n\t\t\t\t},\n\n\t\t\t\tnavigateUp() {\n\t\t\t\t\tconst parts = this.currentPath.split('/').filter(p => p);\n\t\t\t\t\tparts.pop();\n\t\t\t\t\tthis.currentPath = '/' + parts.join('/');\n\t\t\t\t\tif (this.currentPath === '') this.currentPath = '/';\n\t\t\t\t\tthis.loadFiles();\n\t\t\t\t},\n\n\t\t\t\tasync viewFile(file) {\n\t\t\t\t\tthis.viewingFile = file;\n\t\t\t\t\tthis.fileContent = null;\n\t\t\t\t\tthis.editingFile = false;\n\t\t\t\t\tthis.editedContent = '';\n\t\t\t\t\tthis.monacoReady = false;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst response = await fetch(`/containers/${this.containerID}/files/api/file${file.path}`);\n\t\t\t\t\t\tif (!response.ok) throw new Error(await response.text());\n\t\t\t\t\t\tthis.fileContent = await response.json();\n\t\t\t\t\t\tthis.editedContent = this.fileContent.content || '';\n\n\t\t\t\t\t\t// Initialize Monaco after content is loaded\n\t\t\t\t\t\tif (!this.fileContent.binary) {\n\t\t\t\t\t\t\tthis.$nextTick(() => this.initMonaco(false));\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthis.fileContent = { content: 'Error loading file: ' + e.message, binary: false };\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tstartEditing() {\n\t\t\t\t\tthis.editingFile = true;\n\t\t\t\t\tif (this.monacoEditor) {\n\t\t\t\t\t\tthis.monacoEditor.updateOptions({ readOnly: false });\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tinitMonaco(editable) {\n\t\t\t\t\tconst container = this.$refs.monacoContainer;\n\t\t\t\t\tif (!container) return;\n\n\t\t\t\t\t// Dispose existing editor\n\t\t\t\t\tif (this.monacoEditor) {\n\t\t\t\t\t\tthis.monacoEditor.dispose();\n\t\t\t\t\t\tthis.monacoEditor = null;\n\t\t\t\t\t}\n\n\t\t\t\t\trequire(['vs/editor/editor.main'], () => {\n\t\t\t\t\t\tconst lang = this.getLanguage(this.viewingFile?.name);\n\t\t\t\t\t\tthis.monacoEditor = monaco.editor.create(container, {\n\t\t\t\t\t\t\tvalue: this.editedContent,\n\t\t\t\t\t\t\tlanguage: lang,\n\t\t\t\t\t\t\ttheme: 'usulnet-dark',\n\t\t\t\t\t\t\treadOnly: !editable && !this.editingFile,\n\t\t\t\t\t\t\tfontSize: 13,\n\t\t\t\t\t\t\tfontFamily: \"'IBM Plex Mono', 'JetBrains Mono', 'Fira Code', monospace\",\n\t\t\t\t\t\t\tminimap: { enabled: true, scale: 1 },\n\t\t\t\t\t\t\tscrollBeyondLastLine: false,\n\t\t\t\t\t\t\tsmoothScrolling: true,\n\t\t\t\t\t\t\tcursorBlinking: 'smooth',\n\t\t\t\t\t\t\trenderLineHighlight: 'all',\n\t\t\t\t\t\t\tbracketPairColorization: { enabled: true },\n\t\t\t\t\t\t\tguides: { bracketPairs: true, indentation: true },\n\t\t\t\t\t\t\tpadding: { top: 12, bottom: 12 },\n\t\t\t\t\t\t\twordWrap: 'off',\n\t\t\t\t\t\t\ttabSize: 4,\n\t\t\t\t\t\t\tautomaticLayout: true,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Update editedContent when editor changes\n\t\t\t\t\t\tthis.monacoEditor.onDidChangeModelContent(() => {\n\t\t\t\t\t\t\tthis.editedContent = this.monacoEditor.getValue();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Ctrl+S to save\n\t\t\t\t\t\tthis.monacoEditor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyS, () => {\n\t\t\t\t\t\t\tif (this.editingFile) this.saveFile();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.monacoReady = true;\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\teditFile(file) {\n\t\t\t\t\tthis.viewFile(file).then(() => {\n\t\t\t\t\t\tthis.editingFile = true;\n\t\t\t\t\t\tif (this.monacoEditor) {\n\t\t\t\t\t\t\tthis.monacoEditor.updateOptions({ readOnly: false });\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tcloseFileModal() {\n\t\t\t\t\tif (this.monacoEditor) {\n\t\t\t\t\t\tthis.monacoEditor.dispose();\n\t\t\t\t\t\tthis.monacoEditor = null;\n\t\t\t\t\t}\n\t\t\t\t\tthis.viewingFile = null;\n\t\t\t\t\tthis.editingFile = false;\n\t\t\t\t\tthis.monacoReady = false;\n\t\t\t\t},\n\n\t\t\t\tasync saveFile() {\n\t\t\t\t\tif (!this.viewingFile || !this.monacoEditor) return;\n\t\t\t\t\tthis.saving = true;\n\t\t\t\t\tconst content = this.monacoEditor.getValue();\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst response = await fetch(`/containers/${this.containerID}/files/api/file${this.viewingFile.path}`, {\n\t\t\t\t\t\t\tmethod: 'PUT',\n\t\t\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\t\t\t\tbody: JSON.stringify({ content: content })\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!response.ok) throw new Error(await response.text());\n\t\t\t\t\t\tthis.fileContent.content = content;\n\t\t\t\t\t\tthis.editedContent = content;\n\t\t\t\t\t\tthis.editingFile = false;\n\t\t\t\t\t\tthis.monacoEditor.updateOptions({ readOnly: true });\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\talert('Failed to save: ' + e.message);\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.saving = false;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tgetDownloadUrl(file) {\n\t\t\t\t\tif (!file) return '#';\n\t\t\t\t\treturn `/containers/${this.containerID}/files/api/download${file.path}`;\n\t\t\t\t},\n\n\t\t\t\tdeleteFile(file) {\n\t\t\t\t\tthis.deleteConfirm = file;\n\t\t\t\t},\n\n\t\t\t\tasync confirmDelete() {\n\t\t\t\t\tif (!this.deleteConfirm) return;\n\t\t\t\t\tconst file = this.deleteConfirm;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst response = await fetch(`/containers/${this.containerID}/files/api/file${file.path}?recursive=${file.is_dir}`, {\n\t\t\t\t\t\t\tmethod: 'DELETE'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!response.ok) throw new Error(await response.text());\n\t\t\t\t\t\tthis.deleteConfirm = null;\n\t\t\t\t\t\tawait this.loadFiles();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\talert('Failed to delete: ' + e.message);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tasync createFolder() {\n\t\t\t\t\tif (!this.newFolderName) return;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet path = this.currentPath;\n\t\t\t\t\t\tif (!path.endsWith('/')) path += '/';\n\t\t\t\t\t\tpath += this.newFolderName;\n\n\t\t\t\t\t\tconst response = await fetch(`/containers/${this.containerID}/files/api/mkdir${path}`, {\n\t\t\t\t\t\t\tmethod: 'POST'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!response.ok) throw new Error(await response.text());\n\t\t\t\t\t\tthis.showNewFolderModal = false;\n\t\t\t\t\t\tthis.newFolderName = '';\n\t\t\t\t\t\tawait this.loadFiles();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\talert('Failed to create folder: ' + e.message);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\thandleFileDrop(event) {\n\t\t\t\t\tthis.dragOver = false;\n\t\t\t\t\tconst files = Array.from(event.dataTransfer.files);\n\t\t\t\t\tthis.uploadFiles = [...this.uploadFiles, ...files];\n\t\t\t\t},\n\n\t\t\t\thandleFileSelect(event) {\n\t\t\t\t\tconst files = Array.from(event.target.files);\n\t\t\t\t\tthis.uploadFiles = [...this.uploadFiles, ...files];\n\t\t\t\t\tevent.target.value = '';\n\t\t\t\t},\n\n\t\t\t\tasync uploadToContainer() {\n\t\t\t\t\talert('File upload via UI is not yet supported. Use \"docker cp\" command or the API with tar format.');\n\t\t\t\t\tthis.showUploadModal = false;\n\t\t\t\t\tthis.uploadFiles = [];\n\t\t\t\t},\n\n\t\t\t\tgetLanguage(filename) {\n\t\t\t\t\tif (!filename) return 'plaintext';\n\t\t\t\t\tconst ext = filename.split('.').pop()?.toLowerCase();\n\t\t\t\t\tconst langs = {\n\t\t\t\t\t\t'js': 'javascript', 'jsx': 'javascript', 'mjs': 'javascript',\n\t\t\t\t\t\t'ts': 'typescript', 'tsx': 'typescript',\n\t\t\t\t\t\t'json': 'json', 'jsonc': 'json',\n\t\t\t\t\t\t'yml': 'yaml', 'yaml': 'yaml',\n\t\t\t\t\t\t'md': 'markdown', 'mdx': 'markdown',\n\t\t\t\t\t\t'html': 'html', 'htm': 'html',\n\t\t\t\t\t\t'css': 'css', 'scss': 'scss', 'less': 'less',\n\t\t\t\t\t\t'py': 'python',\n\t\t\t\t\t\t'go': 'go',\n\t\t\t\t\t\t'rs': 'rust',\n\t\t\t\t\t\t'rb': 'ruby',\n\t\t\t\t\t\t'php': 'php',\n\t\t\t\t\t\t'java': 'java',\n\t\t\t\t\t\t'c': 'c', 'h': 'c',\n\t\t\t\t\t\t'cpp': 'cpp', 'cc': 'cpp', 'cxx': 'cpp', 'hpp': 'cpp',\n\t\t\t\t\t\t'sh': 'shell', 'bash': 'shell', 'zsh': 'shell',\n\t\t\t\t\t\t'sql': 'sql',\n\t\t\t\t\t\t'xml': 'xml',\n\t\t\t\t\t\t'dockerfile': 'dockerfile',\n\t\t\t\t\t\t'conf': 'ini', 'cfg': 'ini', 'ini': 'ini',\n\t\t\t\t\t\t'env': 'shell',\n\t\t\t\t\t\t'toml': 'ini',\n\t\t\t\t\t\t'makefile': 'makefile',\n\t\t\t\t\t\t'nginx': 'nginx',\n\t\t\t\t\t\t'lua': 'lua',\n\t\t\t\t\t};\n\t\t\t\t\t// Special filename handling\n\t\t\t\t\tconst lowerName = filename.toLowerCase();\n\t\t\t\t\tif (lowerName === 'dockerfile' || lowerName.startsWith('dockerfile.')) return 'dockerfile';\n\t\t\t\t\tif (lowerName === 'makefile' || lowerName === 'gnumakefile') return 'makefile';\n\t\t\t\t\tif (lowerName.endsWith('.conf') && lowerName.includes('nginx')) return 'nginx';\n\n\t\t\t\t\treturn langs[ext] || 'plaintext';\n\t\t\t\t},\n\n\t\t\t\tgetFileIcon(filename) {\n\t\t\t\t\tconst ext = filename.split('.').pop()?.toLowerCase();\n\t\t\t\t\tconst icons = {\n\t\t\t\t\t\t'js': 'fab fa-js text-yellow-400',\n\t\t\t\t\t\t'ts': 'fab fa-js text-blue-400',\n\t\t\t\t\t\t'json': 'fas fa-code text-yellow-400',\n\t\t\t\t\t\t'yml': 'fas fa-file-code text-red-400',\n\t\t\t\t\t\t'yaml': 'fas fa-file-code text-red-400',\n\t\t\t\t\t\t'md': 'fab fa-markdown text-white',\n\t\t\t\t\t\t'txt': 'fas fa-file-alt text-gray-400',\n\t\t\t\t\t\t'log': 'fas fa-file-alt text-gray-400',\n\t\t\t\t\t\t'sh': 'fas fa-terminal text-green-400',\n\t\t\t\t\t\t'bash': 'fas fa-terminal text-green-400',\n\t\t\t\t\t\t'py': 'fab fa-python text-blue-400',\n\t\t\t\t\t\t'go': 'fas fa-code text-cyan-400',\n\t\t\t\t\t\t'html': 'fab fa-html5 text-orange-400',\n\t\t\t\t\t\t'css': 'fab fa-css3 text-blue-400',\n\t\t\t\t\t\t'sql': 'fas fa-database text-blue-400',\n\t\t\t\t\t\t'db': 'fas fa-database text-purple-400',\n\t\t\t\t\t\t'png': 'fas fa-image text-pink-400',\n\t\t\t\t\t\t'jpg': 'fas fa-image text-pink-400',\n\t\t\t\t\t\t'jpeg': 'fas fa-image text-pink-400',\n\t\t\t\t\t\t'gif': 'fas fa-image text-pink-400',\n\t\t\t\t\t\t'svg': 'fas fa-image text-pink-400',\n\t\t\t\t\t\t'zip': 'fas fa-file-archive text-yellow-400',\n\t\t\t\t\t\t'tar': 'fas fa-file-archive text-yellow-400',\n\t\t\t\t\t\t'gz': 'fas fa-file-archive text-yellow-400',\n\t\t\t\t\t\t'pdf': 'fas fa-file-pdf text-red-400',\n\t\t\t\t\t\t'conf': 'fas fa-cog text-gray-400',\n\t\t\t\t\t\t'cfg': 'fas fa-cog text-gray-400',\n\t\t\t\t\t\t'ini': 'fas fa-cog text-gray-400',\n\t\t\t\t\t\t'env': 'fas fa-key text-green-400',\n\t\t\t\t\t};\n\t\t\t\t\treturn icons[ext] || 'fas fa-file text-blue-400';\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t</script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
