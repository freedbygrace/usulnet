// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package containers

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"github.com/fr4nsys/usulnet/internal/web/templates/layouts"
)

type ContainerStatsData struct {
	PageData    layouts.PageData
	ContainerID string
	Name        string
	State       string
	Image       string
}

func ContainerStats(data ContainerStatsData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<!-- Breadcrumb --> <nav class=\"flex items-center gap-2 text-sm text-gray-400 mb-4\"><a href=\"/containers\" class=\"hover:text-primary-400 transition-colors\">Containers</a> <i class=\"fas fa-chevron-right text-xs\"></i> <a href=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var3 templ.SafeURL
			templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL("/containers/" + data.ContainerID))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/containers/stats.templ`, Line: 21, Col: 61}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "\" class=\"hover:text-primary-400 transition-colors\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var4 string
			templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(data.Name)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/containers/stats.templ`, Line: 21, Col: 124}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "</a> <i class=\"fas fa-chevron-right text-xs\"></i> <span class=\"text-white\">Stats</span></nav><!-- Header --> <div class=\"flex items-center justify-between mb-6\"><div class=\"flex items-center gap-4\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var5 = []any{"w-10 h-10 rounded-lg flex items-center justify-center", stateIconBg(data.State)}
			templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var5...)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "<div class=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var6 string
			templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var5).String())
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/containers/stats.templ`, Line: 1, Col: 0}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "\"><i class=\"fas fa-chart-line text-lg text-gray-300\"></i></div><div><h1 class=\"text-2xl font-bold font-display text-white\">Resource Stats</h1><p class=\"text-gray-400 text-sm\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var7 string
			templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(data.Name)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/containers/stats.templ`, Line: 34, Col: 49}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, " &middot; ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var8 string
			templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinStringErrs(data.Image)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/containers/stats.templ`, Line: 34, Col: 73}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "</p></div></div><a href=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var9 templ.SafeURL
			templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL("/containers/" + data.ContainerID))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/containers/stats.templ`, Line: 37, Col: 61}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "\" class=\"px-4 py-2 bg-dark-700 hover:bg-dark-600 text-gray-300 rounded-lg transition-colors\"><i class=\"fas fa-arrow-left mr-2\"></i>Back</a></div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.State != "running" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "<div class=\"bg-yellow-500/10 border border-yellow-500/30 rounded-xl p-6 text-center\"><i class=\"fas fa-exclamation-triangle text-3xl text-yellow-400 mb-3\"></i><p class=\"text-yellow-300 font-medium\">Container is not running</p><p class=\"text-gray-400 text-sm mt-1\">Stats are only available for running containers.</p></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "<!-- Stats Dashboard --> <div x-data=\"statsViewer()\" data-container-id=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var10 string
				templ_7745c5c3_Var10, templ_7745c5c3_Err = templ.JoinStringErrs(data.ContainerID)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/containers/stats.templ`, Line: 52, Col: 40}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var10))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "\"><!-- Top Cards --><div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\"><!-- CPU --><div class=\"bg-dark-800 border border-dark-600 rounded-xl p-4\"><div class=\"flex items-center justify-between mb-2\"><span class=\"text-gray-400 text-sm\">CPU Usage</span> <i class=\"fas fa-microchip text-blue-400\"></i></div><div class=\"text-2xl font-bold text-white\" x-text=\"cpuPercent.toFixed(2) + '%'\">-</div><div class=\"mt-2 bg-dark-700 rounded-full h-2\"><div class=\"bg-blue-500 h-2 rounded-full transition-all duration-500\" :style=\"'width:' + Math.min(cpuPercent, 100) + '%'\"></div></div></div><!-- Memory --><div class=\"bg-dark-800 border border-dark-600 rounded-xl p-4\"><div class=\"flex items-center justify-between mb-2\"><span class=\"text-gray-400 text-sm\">Memory</span> <i class=\"fas fa-memory text-green-400\"></i></div><div class=\"text-2xl font-bold text-white\" x-text=\"formatBytes(memoryUsage)\">-</div><div class=\"text-xs text-gray-500 mt-1\" x-text=\"'/ ' + formatBytes(memoryLimit) + ' (' + memoryPct.toFixed(1) + '%)'\"></div><div class=\"mt-2 bg-dark-700 rounded-full h-2\"><div class=\"h-2 rounded-full transition-all duration-500\" :class=\"memoryPct > 90 ? 'bg-red-500' : memoryPct > 70 ? 'bg-yellow-500' : 'bg-green-500'\" :style=\"'width:' + Math.min(memoryPct, 100) + '%'\"></div></div></div><!-- Network --><div class=\"bg-dark-800 border border-dark-600 rounded-xl p-4\"><div class=\"flex items-center justify-between mb-2\"><span class=\"text-gray-400 text-sm\">Network I/O</span> <i class=\"fas fa-network-wired text-purple-400\"></i></div><div class=\"flex items-center gap-3\"><div><div class=\"text-xs text-gray-500\">↓ RX</div><div class=\"text-sm font-bold text-white\" x-text=\"formatBytes(netRx)\">-</div></div><div><div class=\"text-xs text-gray-500\">↑ TX</div><div class=\"text-sm font-bold text-white\" x-text=\"formatBytes(netTx)\">-</div></div></div></div><!-- Block I/O + PIDs --><div class=\"bg-dark-800 border border-dark-600 rounded-xl p-4\"><div class=\"flex items-center justify-between mb-2\"><span class=\"text-gray-400 text-sm\">Block I/O &middot; PIDs</span> <i class=\"fas fa-hdd text-orange-400\"></i></div><div class=\"flex items-center gap-3\"><div><div class=\"text-xs text-gray-500\">Read</div><div class=\"text-sm font-bold text-white\" x-text=\"formatBytes(blockRead)\">-</div></div><div><div class=\"text-xs text-gray-500\">Write</div><div class=\"text-sm font-bold text-white\" x-text=\"formatBytes(blockWrite)\">-</div></div><div><div class=\"text-xs text-gray-500\">PIDs</div><div class=\"text-sm font-bold text-white\" x-text=\"pids\">-</div></div></div></div></div><!-- Charts --><div class=\"grid grid-cols-1 lg:grid-cols-2 gap-4\"><!-- CPU History --><div class=\"bg-dark-800 border border-dark-600 rounded-xl p-4\"><h3 class=\"text-sm font-medium text-gray-300 mb-3\">CPU History (last 5 min)</h3><div class=\"h-48 flex items-end gap-0.5\"><template x-for=\"(val, i) in cpuHistory\" :key=\"i\"><div class=\"flex-1 bg-blue-500/60 hover:bg-blue-400/80 rounded-t transition-all duration-300 min-h-[2px]\" :style=\"'height:' + Math.max(val, 0.5) + '%'\" :title=\"val.toFixed(2) + '%'\"></div></template></div><div class=\"flex justify-between text-xs text-gray-500 mt-1\"><span>-5m</span> <span>now</span></div></div><!-- Memory History --><div class=\"bg-dark-800 border border-dark-600 rounded-xl p-4\"><h3 class=\"text-sm font-medium text-gray-300 mb-3\">Memory History (last 5 min)</h3><div class=\"h-48 flex items-end gap-0.5\"><template x-for=\"(val, i) in memHistory\" :key=\"i\"><div class=\"flex-1 rounded-t transition-all duration-300 min-h-[2px]\" :class=\"val > 90 ? 'bg-red-500/60 hover:bg-red-400/80' : val > 70 ? 'bg-yellow-500/60 hover:bg-yellow-400/80' : 'bg-green-500/60 hover:bg-green-400/80'\" :style=\"'height:' + Math.max(val, 0.5) + '%'\" :title=\"val.toFixed(1) + '%'\"></div></template></div><div class=\"flex justify-between text-xs text-gray-500 mt-1\"><span>-5m</span> <span>now</span></div></div></div><!-- Connection Status --><div class=\"mt-4 flex items-center justify-between text-xs text-gray-500\"><span x-show=\"connected\" class=\"flex items-center gap-1.5\"><span class=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></span> Live streaming</span> <span x-show=\"!connected\" class=\"flex items-center gap-1.5\"><span class=\"w-2 h-2 bg-red-500 rounded-full\"></span> Disconnected</span> <span x-text=\"'Last update: ' + lastUpdate\"></span></div></div><script>\n\t\t\t\tfunction statsViewer() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tconnected: false,\n\t\t\t\t\t\tws: null,\n\t\t\t\t\t\tcontainerId: '',\n\t\t\t\t\t\tcpuPercent: 0,\n\t\t\t\t\t\tmemoryUsage: 0,\n\t\t\t\t\t\tmemoryLimit: 0,\n\t\t\t\t\t\tmemoryPct: 0,\n\t\t\t\t\t\tnetRx: 0,\n\t\t\t\t\t\tnetTx: 0,\n\t\t\t\t\t\tblockRead: 0,\n\t\t\t\t\t\tblockWrite: 0,\n\t\t\t\t\t\tpids: 0,\n\t\t\t\t\t\tlastUpdate: '-',\n\t\t\t\t\t\tcpuHistory: new Array(60).fill(0),\n\t\t\t\t\t\tmemHistory: new Array(60).fill(0),\n\t\t\t\t\t\t_initialized: false,\n\t\t\t\t\t\t_destroyed: false,\n\t\t\t\t\t\t_reconnectAttempts: 0,\n\t\t\t\t\t\t_maxReconnectAttempts: 5,\n\t\t\t\t\t\t\n\t\t\t\t\t\tinit() {\n\t\t\t\t\t\t\tif (this._initialized) return;\n\t\t\t\t\t\t\tthis._initialized = true;\n\t\t\t\t\t\t\tthis.containerId = this.$el.dataset.containerId;\n\t\t\t\t\t\t\tthis.connect();\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\n\t\t\t\t\t\tdestroy() {\n\t\t\t\t\t\t\tthis._destroyed = true;\n\t\t\t\t\t\t\tif (this.ws) {\n\t\t\t\t\t\t\t\tthis.ws.onclose = null;\n\t\t\t\t\t\t\t\tthis.ws.close();\n\t\t\t\t\t\t\t\tthis.ws = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\n\t\t\t\t\t\tconnect() {\n\t\t\t\t\t\t\tconst protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n\t\t\t\t\t\t\tconst url = `${protocol}//${window.location.host}/ws/stats/${this.containerId}`;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.ws = new WebSocket(url);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.ws.onopen = () => {\n\t\t\t\t\t\t\t\tthis._reconnectAttempts = 0;\n\t\t\t\t\t\t\t\tthis.connected = true;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.ws.onmessage = (event) => {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tconst msg = JSON.parse(event.data);\n\t\t\t\t\t\t\t\t\tif (msg.type === 'stats') {\n\t\t\t\t\t\t\t\t\t\tthis.cpuPercent = msg.cpu_percent || 0;\n\t\t\t\t\t\t\t\t\t\tthis.memoryUsage = msg.memory_usage || 0;\n\t\t\t\t\t\t\t\t\t\tthis.memoryLimit = msg.memory_limit || 0;\n\t\t\t\t\t\t\t\t\t\tthis.memoryPct = msg.memory_percent || 0;\n\t\t\t\t\t\t\t\t\t\tthis.netRx = msg.net_rx || 0;\n\t\t\t\t\t\t\t\t\t\tthis.netTx = msg.net_tx || 0;\n\t\t\t\t\t\t\t\t\t\tthis.blockRead = msg.block_read || 0;\n\t\t\t\t\t\t\t\t\t\tthis.blockWrite = msg.block_write || 0;\n\t\t\t\t\t\t\t\t\t\tthis.pids = msg.pids || 0;\n\t\t\t\t\t\t\t\t\t\tthis.lastUpdate = new Date().toLocaleTimeString();\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// Push to history\n\t\t\t\t\t\t\t\t\t\tthis.cpuHistory.push(this.cpuPercent);\n\t\t\t\t\t\t\t\t\t\tif (this.cpuHistory.length > 60) this.cpuHistory.shift();\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tthis.memHistory.push(this.memoryPct);\n\t\t\t\t\t\t\t\t\t\tif (this.memHistory.length > 60) this.memHistory.shift();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} catch(e) {}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.ws.onclose = (e) => {\n\t\t\t\t\t\t\t\tthis.connected = false;\n\t\t\t\t\t\t\t\tif (this._destroyed) return;\n\t\t\t\t\t\t\t\tif (e.code === 1000 || e.code === 1001) return;\n\t\t\t\t\t\t\t\tif (this._reconnectAttempts >= this._maxReconnectAttempts) return;\n\t\t\t\t\t\t\t\tconst delay = Math.min(30000, 1000 * Math.pow(2, this._reconnectAttempts));\n\t\t\t\t\t\t\t\tthis._reconnectAttempts++;\n\t\t\t\t\t\t\t\tsetTimeout(() => this.connect(), delay);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.ws.onerror = () => {\n\t\t\t\t\t\t\t\tthis.connected = false;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\n\t\t\t\t\t\tformatBytes(bytes) {\n\t\t\t\t\t\t\tif (bytes === 0) return '0 B';\n\t\t\t\t\t\t\tconst k = 1024;\n\t\t\t\t\t\t\tconst sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n\t\t\t\t\t\t\tconst i = Math.floor(Math.log(bytes) / Math.log(k));\n\t\t\t\t\t\t\treturn parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t</script>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			return nil
		})
		templ_7745c5c3_Err = layouts.Base(data.PageData).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
