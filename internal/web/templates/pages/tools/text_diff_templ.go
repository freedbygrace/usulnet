// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package tools

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import "github.com/fr4nsys/usulnet/internal/web/templates/layouts"

func TextDiff(data ToolsData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = toolHeader("Text Diff", "Compare two texts and see the differences", "/tools").Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, " <div x-data=\"textDiff()\" class=\"space-y-4\"><div class=\"grid grid-cols-1 lg:grid-cols-2 gap-4\"><div class=\"bg-dark-800 rounded-xl border border-dark-600 p-5\"><h3 class=\"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-3\">Original</h3><textarea x-model=\"left\" @input=\"compare()\" rows=\"14\" class=\"w-full bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 text-sm text-white font-mono placeholder-gray-500 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 outline-none resize-none\" placeholder=\"Original text...\"></textarea></div><div class=\"bg-dark-800 rounded-xl border border-dark-600 p-5\"><h3 class=\"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-3\">Modified</h3><textarea x-model=\"right\" @input=\"compare()\" rows=\"14\" class=\"w-full bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 text-sm text-white font-mono placeholder-gray-500 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 outline-none resize-none\" placeholder=\"Modified text...\"></textarea></div></div><!-- Stats --><div x-show=\"diffLines.length > 0\" class=\"flex items-center gap-4\"><span class=\"text-xs text-green-400\"><i class=\"fas fa-plus mr-1\"></i><span x-text=\"added\"></span> added</span> <span class=\"text-xs text-red-400\"><i class=\"fas fa-minus mr-1\"></i><span x-text=\"removed\"></span> removed</span> <span class=\"text-xs text-gray-500\"><span x-text=\"unchanged\"></span> unchanged</span></div><!-- Diff output --><div x-show=\"diffLines.length > 0\" class=\"bg-dark-800 rounded-xl border border-dark-600 p-5\"><div class=\"flex items-center justify-between mb-3\"><h3 class=\"text-sm font-semibold text-gray-400 uppercase tracking-wider\">Diff Output</h3><button @click=\"copyDiff()\" class=\"text-xs text-primary-400 hover:text-primary-300\"><i class=\"fas fa-copy mr-1\"></i>Copy</button></div><div class=\"bg-dark-700 rounded-lg overflow-hidden font-mono text-sm max-h-[50vh] overflow-y-auto\"><template x-for=\"(line, i) in diffLines\" :key=\"i\"><div :class=\"{\n\t\t\t\t\t\t\t'px-4 py-1 border-l-3': true,\n\t\t\t\t\t\t\t'bg-green-500/10 border-l-green-500 text-green-300': line.type === 'add',\n\t\t\t\t\t\t\t'bg-red-500/10 border-l-red-500 text-red-300': line.type === 'del',\n\t\t\t\t\t\t\t'border-l-transparent text-gray-400': line.type === 'same'\n\t\t\t\t\t\t}\"><span class=\"inline-block w-5 text-gray-600 select-none\" x-text=\"line.prefix\"></span> <span x-text=\"line.text\"></span></div></template></div></div></div><script>\n\t\tfunction textDiff() {\n\t\t\treturn {\n\t\t\t\tleft: '', right: '', diffLines: [], added: 0, removed: 0, unchanged: 0,\n\t\t\t\tcompare() {\n\t\t\t\t\tif (!this.left && !this.right) { this.diffLines = []; return; }\n\t\t\t\t\tconst a = this.left.split('\\n'), b = this.right.split('\\n');\n\t\t\t\t\t// Simple LCS-based diff\n\t\t\t\t\tconst lcs = this.lcsMatrix(a, b);\n\t\t\t\t\tthis.diffLines = [];\n\t\t\t\t\tthis.added = 0; this.removed = 0; this.unchanged = 0;\n\t\t\t\t\tlet i = a.length, j = b.length;\n\t\t\t\t\tconst result = [];\n\t\t\t\t\twhile (i > 0 || j > 0) {\n\t\t\t\t\t\tif (i > 0 && j > 0 && a[i-1] === b[j-1]) {\n\t\t\t\t\t\t\tresult.unshift({ type: 'same', prefix: ' ', text: a[i-1] });\n\t\t\t\t\t\t\tthis.unchanged++; i--; j--;\n\t\t\t\t\t\t} else if (j > 0 && (i === 0 || lcs[i][j-1] >= lcs[i-1][j])) {\n\t\t\t\t\t\t\tresult.unshift({ type: 'add', prefix: '+', text: b[j-1] });\n\t\t\t\t\t\t\tthis.added++; j--;\n\t\t\t\t\t\t} else if (i > 0) {\n\t\t\t\t\t\t\tresult.unshift({ type: 'del', prefix: '-', text: a[i-1] });\n\t\t\t\t\t\t\tthis.removed++; i--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.diffLines = result;\n\t\t\t\t},\n\t\t\t\tlcsMatrix(a, b) {\n\t\t\t\t\tconst m = a.length, n = b.length;\n\t\t\t\t\tconst dp = Array.from({length: m+1}, () => new Array(n+1).fill(0));\n\t\t\t\t\tfor (let i = 1; i <= m; i++)\n\t\t\t\t\t\tfor (let j = 1; j <= n; j++)\n\t\t\t\t\t\t\tdp[i][j] = a[i-1] === b[j-1] ? dp[i-1][j-1]+1 : Math.max(dp[i-1][j], dp[i][j-1]);\n\t\t\t\t\treturn dp;\n\t\t\t\t},\n\t\t\t\tcopyDiff() {\n\t\t\t\t\tconst text = this.diffLines.map(l => l.prefix + ' ' + l.text).join('\\n');\n\t\t\t\t\tnavigator.clipboard.writeText(text); usulnet.toast('Diff copied!','success',1500);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t</script>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = layouts.Base(data.PageData).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
