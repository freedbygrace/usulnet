// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package editor

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"fmt"
	"github.com/fr4nsys/usulnet/internal/web/templates/layouts"
	"path/filepath"
)

// ============================================================================
// Data Types
// ============================================================================

type MonacoData struct {
	PageData    layouts.PageData
	RepoID      string
	RepoName    string
	FilePath    string
	Ref         string // branch
	Content     string
	Language    string // monaco language id
	ReadOnly    bool
	SnippetID   string // if set, editor is in snippet mode
	SnippetName string // display name for snippet
}

// ============================================================================
// Monaco Editor Template
// ============================================================================
func Monaco(data MonacoData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div class=\"flex flex-col h-full\"><!-- Editor Toolbar --><div class=\"flex items-center justify-between px-4 py-2 bg-dark-800 border-b border-dark-600\"><div class=\"flex items-center gap-3 min-w-0\"><!-- Back button -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.RepoID != "" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<a href=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var3 templ.SafeURL
				templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL(fmt.Sprintf("/integrations/gitea/repos/%s?ref=%s", data.RepoID, data.Ref)))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/editor/monaco.templ`, Line: 38, Col: 104}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "\" class=\"text-gray-400 hover:text-white transition-colors\" title=\"Back to repo\"><i class=\"fas fa-arrow-left\"></i></a>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "<a href=\"/editor\" class=\"text-gray-400 hover:text-white transition-colors\" title=\"Back to editor\"><i class=\"fas fa-arrow-left\"></i></a>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "<!-- File info --><div class=\"flex items-center gap-2 min-w-0\"><i class=\"fas fa-file-code text-blue-400\"></i> <span class=\"text-sm text-white font-medium truncate\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var4 string
			templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(data.FilePath)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/editor/monaco.templ`, Line: 51, Col: 75}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "</span> ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.Ref != "" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "<span class=\"text-xs px-1.5 py-0.5 rounded bg-gray-700 text-gray-400 whitespace-nowrap\"><i class=\"fas fa-code-branch mr-1\"></i>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var5 string
				templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(data.Ref)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/editor/monaco.templ`, Line: 54, Col: 57}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "</span> ")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			if data.RepoName != "" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "<span class=\"text-xs text-gray-500\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var6 string
				templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs(data.RepoName)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/editor/monaco.templ`, Line: 58, Col: 58}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "</span>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else if data.SnippetID != "" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "<span class=\"text-xs px-1.5 py-0.5 rounded bg-yellow-500/10 text-yellow-400\"><i class=\"fas fa-file-alt mr-1\"></i>snippet</span>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, "<span class=\"text-xs px-1.5 py-0.5 rounded bg-blue-500/10 text-blue-400\">scratch</span>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 13, "</div></div><div class=\"flex items-center gap-2\"><!-- Save indicator --><span id=\"save-status\" class=\"text-xs text-gray-500 hidden\"><i class=\"fas fa-check text-green-400 mr-1\"></i>Saved</span> <span id=\"save-dirty\" class=\"text-xs text-yellow-400 hidden\"><i class=\"fas fa-circle text-[6px] mr-1\"></i>Modified</span><!-- Language indicator --><span class=\"text-xs px-2 py-1 rounded bg-dark-700 text-gray-400\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var7 string
			templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(data.Language)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/editor/monaco.templ`, Line: 77, Col: 86}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 14, "</span><!-- Save button (git mode) -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.RepoID != "" && !data.ReadOnly {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 15, "<button id=\"btn-save\" onclick=\"saveFile()\" class=\"btn-primary text-sm\" title=\"Ctrl+S\"><i class=\"fas fa-save mr-1\"></i>Save & Commit</button>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 16, "<!-- Save button (snippet mode) -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.SnippetID != "" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 17, "<button id=\"btn-save-snippet\" onclick=\"saveSnippet()\" class=\"btn-primary text-sm\" title=\"Ctrl+S\"><i class=\"fas fa-save mr-1\"></i>Save</button>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 18, "<!-- Open in nvim -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.RepoID != "" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 19, "<a href=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var8 templ.SafeURL
				templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL(fmt.Sprintf("/editor/nvim?repo=%s&file=%s&ref=%s", data.RepoID, data.FilePath, data.Ref)))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/editor/monaco.templ`, Line: 92, Col: 119}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 20, "\" class=\"btn-ghost text-sm\" title=\"Open in Neovim\"><i class=\"fas fa-terminal mr-1\"></i>nvim</a>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 21, "<a href=\"/editor/nvim\" class=\"btn-ghost text-sm\" title=\"Open Neovim\"><i class=\"fas fa-terminal mr-1\"></i>nvim</a>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 22, "</div></div><!-- Monaco Container --><div id=\"monaco-container\" class=\"flex-1 overflow-hidden\" data-repo-id=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var9 string
			templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinStringErrs(data.RepoID)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/editor/monaco.templ`, Line: 108, Col: 30}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 23, "\" data-file-path=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var10 string
			templ_7745c5c3_Var10, templ_7745c5c3_Err = templ.JoinStringErrs(data.FilePath)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/editor/monaco.templ`, Line: 109, Col: 34}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var10))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 24, "\" data-ref=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var11 string
			templ_7745c5c3_Var11, templ_7745c5c3_Err = templ.JoinStringErrs(data.Ref)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/editor/monaco.templ`, Line: 110, Col: 23}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var11))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 25, "\" data-language=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var12 string
			templ_7745c5c3_Var12, templ_7745c5c3_Err = templ.JoinStringErrs(data.Language)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/editor/monaco.templ`, Line: 111, Col: 33}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var12))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 26, "\" data-read-only=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var13 string
			templ_7745c5c3_Var13, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%v", data.ReadOnly))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/editor/monaco.templ`, Line: 112, Col: 53}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var13))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 27, "\" data-snippet-id=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var14 string
			templ_7745c5c3_Var14, templ_7745c5c3_Err = templ.JoinStringErrs(data.SnippetID)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/editor/monaco.templ`, Line: 113, Col: 36}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var14))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 28, "\" data-content=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var15 string
			templ_7745c5c3_Var15, templ_7745c5c3_Err = templ.JoinStringErrs(data.Content)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/editor/monaco.templ`, Line: 114, Col: 31}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var15))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 29, "\"></div><!-- Commit Modal --><div id=\"commit-modal\" class=\"hidden fixed inset-0 z-50 overflow-y-auto\"><div class=\"flex min-h-screen items-center justify-center p-4\"><div class=\"fixed inset-0 bg-black/60\" onclick=\"closeCommitModal()\"></div><div class=\"relative card w-full max-w-md p-6\"><h3 class=\"text-lg font-semibold text-white mb-4\"><i class=\"fas fa-code-commit text-green-400 mr-2\"></i>Commit Changes</h3><div class=\"space-y-4\"><div><label class=\"block text-sm font-medium text-gray-300 mb-1\">Commit message</label> <input type=\"text\" id=\"commit-message\" placeholder=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var16 string
			templ_7745c5c3_Var16, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("Update %s", filepath.Base(data.FilePath)))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/editor/monaco.templ`, Line: 128, Col: 77}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var16))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 30, "\" class=\"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:border-blue-500 focus:ring-1 focus:ring-blue-500\"></div><div class=\"flex justify-end gap-3\"><button onclick=\"closeCommitModal()\" class=\"btn-ghost\">Cancel</button> <button onclick=\"doCommit()\" class=\"btn-primary\"><i class=\"fas fa-check mr-1\"></i>Commit</button></div></div></div></div></div></div><!-- Monaco Editor CDN --> <script src=\"/static/vendor/monaco-editor/min/vs/loader.js\"></script> <script>\n\t\t// ====================================================================\n\t\t// usulnet Monaco Theme + Init\n\t\t// ====================================================================\n\t\tvar monacoEditor = null;\n\t\tvar isDirty = false;\n\t\tvar monacoContainer = document.getElementById('monaco-container');\n\t\tvar repoID = monacoContainer.dataset.repoId || '';\n\t\tvar filePath = monacoContainer.dataset.filePath || '';\n\t\tvar ref = monacoContainer.dataset.ref || '';\n\t\tvar lang = monacoContainer.dataset.language || 'plaintext';\n\t\tvar readOnly = monacoContainer.dataset.readOnly === 'true';\n\t\tvar snippetID = monacoContainer.dataset.snippetId || '';\n\t\tvar initialContent = monacoContainer.dataset.content || '';\n\n\t\tconsole.log('[Monaco] Init mode:', repoID ? 'git' : (snippetID ? 'snippet' : 'scratch'), 'readOnly:', readOnly, 'lang:', lang, 'file:', filePath);\n\n\t\trequire.config({\n\t\t\tpaths: { vs: '/static/vendor/monaco-editor/min/vs' }\n\t\t});\n\n\t\trequire(['vs/editor/editor.main'], function() {\n\t\t\tconsole.log('[Monaco] Editor module loaded');\n\t\t\t// Define usulnet theme\n\t\t\tmonaco.editor.defineTheme('usulnet-dark', {\n\t\t\t\tbase: 'vs-dark',\n\t\t\t\tinherit: true,\n\t\t\t\trules: [\n\t\t\t\t\t{ token: '', foreground: 'e6edf3', background: '0d1117' },\n\t\t\t\t\t{ token: 'comment', foreground: '8b949e', fontStyle: 'italic' },\n\t\t\t\t\t{ token: 'keyword', foreground: 'ff7b72' },\n\t\t\t\t\t{ token: 'string', foreground: 'a5d6ff' },\n\t\t\t\t\t{ token: 'number', foreground: '79c0ff' },\n\t\t\t\t\t{ token: 'type', foreground: 'ffa657' },\n\t\t\t\t\t{ token: 'function', foreground: 'd2a8ff' },\n\t\t\t\t\t{ token: 'variable', foreground: 'ffa657' },\n\t\t\t\t\t{ token: 'constant', foreground: '79c0ff' },\n\t\t\t\t\t{ token: 'operator', foreground: 'ff7b72' },\n\t\t\t\t\t{ token: 'delimiter', foreground: 'e6edf3' },\n\t\t\t\t\t{ token: 'tag', foreground: '7ee787' },\n\t\t\t\t\t{ token: 'attribute.name', foreground: '79c0ff' },\n\t\t\t\t\t{ token: 'attribute.value', foreground: 'a5d6ff' },\n\t\t\t\t\t{ token: 'regexp', foreground: '7ee787' },\n\t\t\t\t],\n\t\t\t\tcolors: {\n\t\t\t\t\t'editor.background': '#0d1117',\n\t\t\t\t\t'editor.foreground': '#e6edf3',\n\t\t\t\t\t'editor.lineHighlightBackground': '#161b2233',\n\t\t\t\t\t'editor.selectionBackground': '#ff6b3540',\n\t\t\t\t\t'editor.selectionHighlightBackground': '#ff6b3520',\n\t\t\t\t\t'editorCursor.foreground': '#ff6b35',\n\t\t\t\t\t'editorLineNumber.foreground': '#484f58',\n\t\t\t\t\t'editorLineNumber.activeForeground': '#e6edf3',\n\t\t\t\t\t'editorIndentGuide.background': '#21262d',\n\t\t\t\t\t'editorIndentGuide.activeBackground': '#30363d',\n\t\t\t\t\t'editor.inactiveSelectionBackground': '#ff6b3520',\n\t\t\t\t\t'editorBracketMatch.background': '#ff6b3530',\n\t\t\t\t\t'editorBracketMatch.border': '#ff6b35',\n\t\t\t\t\t'editorGutter.background': '#0d1117',\n\t\t\t\t\t'editorWidget.background': '#161b22',\n\t\t\t\t\t'editorWidget.border': '#30363d',\n\t\t\t\t\t'editorSuggestWidget.background': '#161b22',\n\t\t\t\t\t'editorSuggestWidget.border': '#30363d',\n\t\t\t\t\t'editorSuggestWidget.selectedBackground': '#ff6b3530',\n\t\t\t\t\t'input.background': '#0d1117',\n\t\t\t\t\t'input.border': '#30363d',\n\t\t\t\t\t'input.foreground': '#e6edf3',\n\t\t\t\t\t'scrollbar.shadow': '#0008',\n\t\t\t\t\t'scrollbarSlider.background': '#484f5866',\n\t\t\t\t\t'scrollbarSlider.hoverBackground': '#484f58aa',\n\t\t\t\t\t'scrollbarSlider.activeBackground': '#484f58dd',\n\t\t\t\t\t'minimap.background': '#0d1117',\n\t\t\t\t\t'minimapSlider.background': '#484f5833',\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Get content from data attribute\n\t\t\tvar content = initialContent;\n\t\t\t// Try to decode as base64 if it looks like base64\n\t\t\tif (content && /^[A-Za-z0-9+/=]+$/.test(content) && content.length > 20) {\n\t\t\t\ttry {\n\t\t\t\t\tcontent = atob(content);\n\t\t\t\t} catch(e) {\n\t\t\t\t\t// Not base64, use as-is\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tmonacoEditor = monaco.editor.create(monacoContainer, {\n\t\t\t\tvalue: content,\n\t\t\t\tlanguage: lang,\n\t\t\t\ttheme: 'usulnet-dark',\n\t\t\t\treadOnly: readOnly,\n\t\t\t\tfontSize: 14,\n\t\t\t\tfontFamily: \"'IBM Plex Mono', 'JetBrains Mono', 'Fira Code', monospace\",\n\t\t\t\tfontLigatures: true,\n\t\t\t\tminimap: { enabled: true, scale: 1 },\n\t\t\t\tscrollBeyondLastLine: false,\n\t\t\t\tsmoothScrolling: true,\n\t\t\t\tcursorBlinking: 'smooth',\n\t\t\t\tcursorSmoothCaretAnimation: 'on',\n\t\t\t\trenderLineHighlight: 'all',\n\t\t\t\tbracketPairColorization: { enabled: true },\n\t\t\t\tguides: { bracketPairs: true, indentation: true },\n\t\t\t\tpadding: { top: 12, bottom: 12 },\n\t\t\t\twordWrap: 'off',\n\t\t\t\ttabSize: 4,\n\t\t\t\tinsertSpaces: false,\n\t\t\t\tautomaticLayout: true,\n\t\t\t});\n\n\t\t\tconsole.log('[Monaco] Editor created, readOnly:', monacoEditor.getOption(monaco.editor.EditorOption.readOnly));\n\t\t\t// Focus editor for immediate typing\n\t\t\tmonacoEditor.focus();\n\n\t\t\t// Ctrl+S â†’ save (git or snippet mode)\n\t\t\tmonacoEditor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyS, function() {\n\t\t\t\tif (snippetID) {\n\t\t\t\t\tsaveSnippet();\n\t\t\t\t} else {\n\t\t\t\t\tsaveFile();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Track dirty state\n\t\t\tmonacoEditor.onDidChangeModelContent(function() {\n\t\t\t\tif (!isDirty) {\n\t\t\t\t\tisDirty = true;\n\t\t\t\t\tdocument.getElementById('save-dirty').classList.remove('hidden');\n\t\t\t\t\tdocument.getElementById('save-status').classList.add('hidden');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// ====================================================================\n\t\t// Save / Commit\n\t\t// ====================================================================\n\n\t\tfunction saveFile() {\n\t\t\tif (readOnly || !isDirty) return;\n\t\t\tdocument.getElementById('commit-modal').classList.remove('hidden');\n\t\t\tvar msgInput = document.getElementById('commit-message');\n\t\t\tif (msgInput.value === '') {\n\t\t\t\tmsgInput.value = 'Update ' + filePath.split('/').pop() + ' via usulnet editor';\n\t\t\t}\n\t\t\tmsgInput.focus();\n\t\t\tmsgInput.select();\n\t\t}\n\n\t\tfunction closeCommitModal() {\n\t\t\tdocument.getElementById('commit-modal').classList.add('hidden');\n\t\t}\n\n\t\tfunction doCommit() {\n\t\t\tvar message = document.getElementById('commit-message').value.trim();\n\t\t\tif (!message) {\n\t\t\t\tmessage = 'Update ' + filePath.split('/').pop() + ' via usulnet editor';\n\t\t\t}\n\n\t\t\tvar btn = document.querySelector('#commit-modal .btn-primary');\n\t\t\tbtn.disabled = true;\n\t\t\tbtn.innerHTML = '<i class=\"fas fa-spinner fa-spin mr-1\"></i>Committing...';\n\n\t\t\tvar content = monacoEditor.getValue();\n\t\t\tvar csrfToken = (document.querySelector('meta[name=\"csrf-token\"]') || {}).content || '';\n\t\t\tvar form = new FormData();\n\t\t\tform.append('path', filePath);\n\t\t\tform.append('ref', ref);\n\t\t\tform.append('content', content);\n\t\t\tform.append('message', message);\n\t\t\tform.append('csrf_token', csrfToken);\n\n\t\t\tfetch('/integrations/gitea/repos/' + repoID + '/file', {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: { 'X-CSRF-Token': csrfToken },\n\t\t\t\tbody: form,\n\t\t\t})\n\t\t\t.then(function(resp) {\n\t\t\t\tif (!resp.ok) {\n\t\t\t\t\treturn resp.text().then(function(text) { throw new Error(text || resp.statusText); });\n\t\t\t\t}\n\t\t\t\treturn resp.json();\n\t\t\t})\n\t\t\t.then(function(data) {\n\t\t\t\tif (data.error) {\n\t\t\t\t\talert('Commit failed: ' + data.error);\n\t\t\t\t} else {\n\t\t\t\t\tisDirty = false;\n\t\t\t\t\tdocument.getElementById('save-dirty').classList.add('hidden');\n\t\t\t\t\tdocument.getElementById('save-status').classList.remove('hidden');\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tdocument.getElementById('save-status').classList.add('hidden');\n\t\t\t\t\t}, 3000);\n\t\t\t\t}\n\t\t\t\tcloseCommitModal();\n\t\t\t})\n\t\t\t.catch(function(err) {\n\t\t\t\talert('Error: ' + err.message);\n\t\t\t\tcloseCommitModal();\n\t\t\t})\n\t\t\t.finally(function() {\n\t\t\t\tbtn.disabled = false;\n\t\t\t\tbtn.innerHTML = '<i class=\"fas fa-check mr-1\"></i>Commit';\n\t\t\t});\n\t\t}\n\n\t\t// ====================================================================\n\t\t// Save Snippet\n\t\t// ====================================================================\n\n\t\tfunction saveSnippet() {\n\t\t\tif (!snippetID || !isDirty) return;\n\n\t\t\tvar btn = document.getElementById('btn-save-snippet');\n\t\t\tif (btn) {\n\t\t\t\tbtn.disabled = true;\n\t\t\t\tbtn.innerHTML = '<i class=\"fas fa-spinner fa-spin mr-1\"></i>Saving...';\n\t\t\t}\n\n\t\t\tvar content = monacoEditor.getValue();\n\t\t\tvar csrfToken = (document.querySelector('meta[name=\"csrf-token\"]') || {}).content || '';\n\n\t\t\tfetch('/api/snippets/' + snippetID, {\n\t\t\t\tmethod: 'PUT',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'X-CSRF-Token': csrfToken,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({ content: content }),\n\t\t\t})\n\t\t\t.then(function(resp) {\n\t\t\t\tif (!resp.ok) throw new Error('Save failed: ' + resp.statusText);\n\t\t\t\treturn resp.json();\n\t\t\t})\n\t\t\t.then(function(data) {\n\t\t\t\tisDirty = false;\n\t\t\t\tdocument.getElementById('save-dirty').classList.add('hidden');\n\t\t\t\tdocument.getElementById('save-status').classList.remove('hidden');\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tdocument.getElementById('save-status').classList.add('hidden');\n\t\t\t\t}, 3000);\n\t\t\t})\n\t\t\t.catch(function(err) {\n\t\t\t\talert('Error saving snippet: ' + err.message);\n\t\t\t})\n\t\t\t.finally(function() {\n\t\t\t\tif (btn) {\n\t\t\t\t\tbtn.disabled = false;\n\t\t\t\t\tbtn.innerHTML = '<i class=\"fas fa-save mr-1\"></i>Save';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Warn before leaving with unsaved changes\n\t\twindow.addEventListener('beforeunload', function(e) {\n\t\t\tif (isDirty) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.returnValue = '';\n\t\t\t}\n\t\t});\n\t\t</script>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = layouts.Base(data.PageData).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
