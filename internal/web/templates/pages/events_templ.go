// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package pages

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"github.com/fr4nsys/usulnet/internal/web/templates/layouts"
)

type EventsData struct {
	PageData layouts.PageData
	Events   []EventItem
}

type EventItem struct {
	ID            string
	Type          string
	Action        string
	Actor         string
	ActorType     string
	Target        string
	TargetType    string
	Message       string
	Timestamp     string
	TimestampUnix int64
}

func eventTypeIcon(eventType string) string {
	switch eventType {
	case "container":
		return "fa-box"
	case "image":
		return "fa-layer-group"
	case "volume":
		return "fa-database"
	case "network":
		return "fa-network-wired"
	case "system":
		return "fa-server"
	default:
		return "fa-bell"
	}
}

func actionColor(action string) string {
	switch action {
	case "start", "create", "connect":
		return "text-green-400"
	case "stop", "kill", "destroy", "remove", "delete", "disconnect":
		return "text-red-400"
	case "restart", "update", "pull":
		return "text-yellow-400"
	default:
		return "text-blue-400"
	}
}

func Events(data EventsData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div class=\"space-y-6\"><!-- Header --><div class=\"flex items-center justify-between\"><div><h1 class=\"text-2xl font-display font-bold text-white\">Events</h1><p class=\"text-gray-400 mt-1\">Real-time Docker events stream</p></div><div class=\"flex items-center gap-2\"><select id=\"event-filter\" class=\"input w-40\" onchange=\"filterEvents(this.value)\"><option value=\"\">All Events</option> <option value=\"container\">Containers</option> <option value=\"image\">Images</option> <option value=\"volume\">Volumes</option> <option value=\"network\">Networks</option></select></div></div><!-- Connection Status --><div id=\"ws-status\" class=\"hidden bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3 text-yellow-400 text-sm\"><i class=\"fas fa-plug mr-2\"></i>Connecting to event stream...</div><!-- Events List --><div class=\"card\"><div id=\"events-list\" class=\"divide-y divide-dark-700 max-h-[70vh] overflow-y-auto\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			for _, event := range data.Events {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<div class=\"p-4 flex items-start gap-4\" data-event-type=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var3 string
				templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(event.Type)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/events.templ`, Line: 84, Col: 74}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var4 = []any{"w-10 h-10 rounded-lg flex items-center justify-center bg-dark-700", actionColor(event.Action)}
				templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var4...)
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "<div class=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var5 string
				templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var4).String())
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/events.templ`, Line: 1, Col: 0}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var6 = []any{"fas", eventTypeIcon(event.Type)}
				templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var6...)
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "<i class=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var7 string
				templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var6).String())
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/events.templ`, Line: 1, Col: 0}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "\"></i></div><div class=\"flex-1 min-w-0\"><div class=\"flex items-center gap-2 mb-1\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var8 = []any{"font-medium", actionColor(event.Action)}
				templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var8...)
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "<span class=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var9 string
				templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var8).String())
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/events.templ`, Line: 1, Col: 0}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var10 string
				templ_7745c5c3_Var10, templ_7745c5c3_Err = templ.JoinStringErrs(event.Action)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/events.templ`, Line: 90, Col: 80}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var10))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "</span> <span class=\"text-gray-400\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var11 string
				templ_7745c5c3_Var11, templ_7745c5c3_Err = templ.JoinStringErrs(event.TargetType)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/events.templ`, Line: 91, Col: 55}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var11))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "</span> <span class=\"text-white font-medium truncate\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var12 string
				templ_7745c5c3_Var12, templ_7745c5c3_Err = templ.JoinStringErrs(event.Target)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/events.templ`, Line: 92, Col: 69}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var12))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, "</span></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				if event.Message != "" {
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 13, "<p class=\"text-sm text-gray-400\">")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					var templ_7745c5c3_Var13 string
					templ_7745c5c3_Var13, templ_7745c5c3_Err = templ.JoinStringErrs(event.Message)
					if templ_7745c5c3_Err != nil {
						return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/events.templ`, Line: 95, Col: 57}
					}
					_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var13))
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 14, "</p>")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 15, "<div class=\"text-xs text-gray-500 mt-1\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var14 string
				templ_7745c5c3_Var14, templ_7745c5c3_Err = templ.JoinStringErrs(event.Timestamp)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/events.templ`, Line: 97, Col: 65}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var14))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 16, "</div></div></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 17, "<div id=\"empty-state\" class=\"p-8 text-center text-gray-400\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if len(data.Events) == 0 {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 18, "<i class=\"fas fa-stream text-3xl mb-3\"></i><p>Waiting for events... Events will appear here in real-time.</p>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 19, "</div></div></div></div><script>\n\t\t\t(function() {\n\t\t\t\tfunction escapeHtml(str) {\n\t\t\t\t\tif (!str) return '';\n\t\t\t\t\treturn String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\"/g,'&quot;').replace(/'/g,'&#039;');\n\t\t\t\t}\n\n\t\t\t\tconst eventsList = document.getElementById('events-list');\n\t\t\t\tconst emptyState = document.getElementById('empty-state');\n\t\t\t\tconst wsStatus = document.getElementById('ws-status');\n\t\t\t\tlet ws = null;\n\t\t\t\tlet activeFilter = '';\n\t\t\t\tlet reconnectAttempts = 0;\n\t\t\t\tconst MAX_RECONNECT_ATTEMPTS = 5;\n\n\t\t\t\tconst iconMap = {\n\t\t\t\t\tcontainer: 'fa-box', image: 'fa-layer-group',\n\t\t\t\t\tvolume: 'fa-database', network: 'fa-network-wired',\n\t\t\t\t\tsystem: 'fa-server'\n\t\t\t\t};\n\t\t\t\tconst colorMap = {\n\t\t\t\t\tstart: 'text-green-400', create: 'text-green-400', connect: 'text-green-400',\n\t\t\t\t\tstop: 'text-red-400', kill: 'text-red-400', destroy: 'text-red-400',\n\t\t\t\t\tremove: 'text-red-400', delete: 'text-red-400', disconnect: 'text-red-400',\n\t\t\t\t\trestart: 'text-yellow-400', update: 'text-yellow-400', pull: 'text-yellow-400'\n\t\t\t\t};\n\n\t\t\t\tfunction connectWS() {\n\t\t\t\t\tconst protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n\t\t\t\t\tws = new WebSocket(`${protocol}//${window.location.host}/ws/events`);\n\n\t\t\t\t\tws.onopen = function() {\n\t\t\t\t\t\treconnectAttempts = 0;\n\t\t\t\t\t\twsStatus.classList.add('hidden');\n\t\t\t\t\t};\n\n\t\t\t\t\tws.onmessage = function(e) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst msg = JSON.parse(e.data);\n\t\t\t\t\t\t\tif (msg.type === 'event') {\n\t\t\t\t\t\t\t\taddEvent(msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch(err) {}\n\t\t\t\t\t};\n\n\t\t\t\t\tws.onclose = function(e) {\n\t\t\t\t\t\tif (e.code === 1000 || e.code === 1001) return;\n\t\t\t\t\t\tif (reconnectAttempts >= MAX_RECONNECT_ATTEMPTS) {\n\t\t\t\t\t\t\twsStatus.textContent = 'Event stream connection lost. Please refresh the page.';\n\t\t\t\t\t\t\twsStatus.classList.remove('hidden');\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst delay = Math.min(30000, 1000 * Math.pow(2, reconnectAttempts));\n\t\t\t\t\t\treconnectAttempts++;\n\t\t\t\t\t\twsStatus.textContent = 'Disconnected from event stream. Reconnecting in ' + (delay / 1000) + 's...';\n\t\t\t\t\t\twsStatus.classList.remove('hidden');\n\t\t\t\t\t\tsetTimeout(connectWS, delay);\n\t\t\t\t\t};\n\n\t\t\t\t\tws.onerror = function() {\n\t\t\t\t\t\twsStatus.textContent = 'Event stream error. Retrying...';\n\t\t\t\t\t\twsStatus.classList.remove('hidden');\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tfunction addEvent(msg) {\n\t\t\t\t\tif (emptyState) emptyState.remove();\n\t\t\t\t\tconst icon = iconMap[msg.event_type] || 'fa-bell';\n\t\t\t\t\tconst color = colorMap[msg.action] || 'text-blue-400';\n\t\t\t\t\tconst display = activeFilter && msg.event_type !== activeFilter ? 'none' : '';\n\n\t\t\t\t\tconst html = `<div class=\"p-4 flex items-start gap-4\" data-event-type=\"${escapeHtml(msg.event_type)}\" style=\"display:${display}\">\n\t\t\t\t\t\t<div class=\"w-10 h-10 rounded-lg flex items-center justify-center bg-dark-700 ${color}\">\n\t\t\t\t\t\t\t<i class=\"fas ${icon}\"></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t<div class=\"flex items-center gap-2 mb-1\">\n\t\t\t\t\t\t\t\t<span class=\"font-medium ${color}\">${escapeHtml(msg.action)}</span>\n\t\t\t\t\t\t\t\t<span class=\"text-gray-400\">${escapeHtml(msg.event_type)}</span>\n\t\t\t\t\t\t\t\t<span class=\"text-white font-medium truncate\">${escapeHtml(msg.actor_name)}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<p class=\"text-sm text-gray-400\">${escapeHtml(msg.message)}</p>\n\t\t\t\t\t\t\t<div class=\"text-xs text-gray-500 mt-1\">${escapeHtml(msg.time_human || msg.timestamp)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`;\n\t\t\t\t\teventsList.insertAdjacentHTML('afterbegin', html);\n\n\t\t\t\t\t// Keep max 500 events\n\t\t\t\t\twhile (eventsList.children.length > 500) {\n\t\t\t\t\t\teventsList.removeChild(eventsList.lastChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\twindow.filterEvents = function(type) {\n\t\t\t\t\tactiveFilter = type;\n\t\t\t\t\tdocument.querySelectorAll('[data-event-type]').forEach(item => {\n\t\t\t\t\t\titem.style.display = (!type || item.dataset.eventType === type) ? '' : 'none';\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tconnectWS();\n\t\t\t})();\n\t\t</script>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = layouts.Base(data.PageData).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
