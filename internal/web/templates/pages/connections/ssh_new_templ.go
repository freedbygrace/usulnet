// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package connections

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"github.com/fr4nsys/usulnet/internal/web/templates/layouts"
)

// SSHConnectionNew renders the new SSH connection form.
func SSHConnectionNew(data SSHConnectionNewData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div class=\"max-w-2xl mx-auto space-y-6\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = ConnectionsNav("ssh").Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<!-- Header --><div class=\"flex items-center space-x-4\"><a href=\"/connections/ssh\" class=\"text-gray-400 hover:text-white\"><svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"></path></svg></a><div><h1 class=\"text-2xl font-display font-bold text-white\">New SSH Connection</h1><p class=\"text-gray-400 mt-1\">Add a new SSH connection to a remote server</p></div></div><!-- Form --><form action=\"/connections/ssh\" method=\"POST\" class=\"bg-dark-800 rounded-lg border border-dark-700 p-6 space-y-6\"><input type=\"hidden\" name=\"csrf_token\" value=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var3 string
			templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(data.PageData.CSRFToken)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/connections/ssh_new.templ`, Line: 32, Col: 74}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "\"><!-- Basic Info --><div class=\"space-y-4\"><h3 class=\"text-white font-medium\">Connection Details</h3><div><label class=\"block text-sm font-medium text-gray-300 mb-1\">Connection Name</label> <input type=\"text\" name=\"name\" required placeholder=\"My Server\" class=\"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\"></div><div class=\"grid grid-cols-3 gap-4\"><div class=\"col-span-2\"><label class=\"block text-sm font-medium text-gray-300 mb-1\">Host / IP Address</label> <input type=\"text\" name=\"host\" required placeholder=\"192.168.1.100 or server.example.com\" class=\"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\"></div><div><label class=\"block text-sm font-medium text-gray-300 mb-1\">Port</label> <input type=\"number\" name=\"port\" value=\"22\" min=\"1\" max=\"65535\" class=\"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\"></div></div><div><label class=\"block text-sm font-medium text-gray-300 mb-1\">Username</label> <input type=\"text\" name=\"username\" placeholder=\"root (leave empty to prompt on connect)\" class=\"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\"></div></div><!-- Authentication --><div class=\"space-y-4\"><h3 class=\"text-white font-medium\">Authentication</h3><div><label class=\"block text-sm font-medium text-gray-300 mb-2\">Authentication Method</label><div class=\"space-y-2\" id=\"auth-methods\"><label class=\"flex items-center p-3 bg-dark-700 border border-dark-600 rounded-lg cursor-pointer hover:border-dark-500 has-[:checked]:border-primary-500\"><input type=\"radio\" name=\"auth_type\" value=\"password\" class=\"mr-3 text-primary-500 focus:ring-primary-500\" checked onchange=\"toggleAuthFields()\"><div><span class=\"text-white font-medium\">Password</span><p class=\"text-gray-400 text-sm\">Authenticate with username and password</p></div></label> <label class=\"flex items-center p-3 bg-dark-700 border border-dark-600 rounded-lg cursor-pointer hover:border-dark-500 has-[:checked]:border-primary-500\"><input type=\"radio\" name=\"auth_type\" value=\"key\" class=\"mr-3 text-primary-500 focus:ring-primary-500\" onchange=\"toggleAuthFields()\"><div><span class=\"text-white font-medium\">SSH Key</span><p class=\"text-gray-400 text-sm\">Authenticate with a private key</p></div></label> <label class=\"flex items-center p-3 bg-dark-700 border border-dark-600 rounded-lg cursor-pointer hover:border-dark-500 has-[:checked]:border-primary-500\"><input type=\"radio\" name=\"auth_type\" value=\"agent\" class=\"mr-3 text-primary-500 focus:ring-primary-500\" onchange=\"toggleAuthFields()\"><div><span class=\"text-white font-medium\">SSH Agent</span><p class=\"text-gray-400 text-sm\">Use keys from the SSH agent</p></div></label></div></div><!-- Password Field --><div id=\"password-field\"><label class=\"block text-sm font-medium text-gray-300 mb-1\">Password</label> <input type=\"password\" name=\"password\" placeholder=\"Enter password\" class=\"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\"></div><!-- Key Selection --><div id=\"key-field\" class=\"hidden\"><label class=\"block text-sm font-medium text-gray-300 mb-1\">SSH Key</label> ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if len(data.Keys) > 0 {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "<select name=\"key_id\" class=\"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\"><option value=\"\">Select a key...</option> ")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				for _, key := range data.Keys {
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "<option value=\"")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					var templ_7745c5c3_Var4 string
					templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(key.ID)
					if templ_7745c5c3_Err != nil {
						return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/connections/ssh_new.templ`, Line: 135, Col: 31}
					}
					_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "\">")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					var templ_7745c5c3_Var5 string
					templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(key.Name)
					if templ_7745c5c3_Err != nil {
						return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/connections/ssh_new.templ`, Line: 135, Col: 44}
					}
					_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, " (")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					var templ_7745c5c3_Var6 string
					templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs(key.Type)
					if templ_7745c5c3_Err != nil {
						return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/connections/ssh_new.templ`, Line: 135, Col: 58}
					}
					_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, ")</option>")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "</select><p class=\"mt-1 text-sm text-gray-500\"><a href=\"/connections/keys/new\" class=\"text-primary-400 hover:text-primary-300\">Generate a new key</a></p>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "<p class=\"text-gray-400 text-sm\">No SSH keys available. <a href=\"/connections/keys/new\" class=\"text-primary-400 hover:text-primary-300\">Generate one first</a></p>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "</div></div><!-- Advanced Options --><div class=\"space-y-4\"><button type=\"button\" class=\"text-primary-400 hover:text-primary-300 text-sm flex items-center\" onclick=\"toggleAdvanced()\"><svg id=\"advanced-icon\" class=\"w-4 h-4 mr-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path></svg> Advanced Options</button><div id=\"advanced-options\" class=\"hidden space-y-4 pl-5 border-l-2 border-dark-600\"><!-- Jump Host --><div><label class=\"block text-sm font-medium text-gray-300 mb-1\">Jump Host (Bastion)</label> <select name=\"jump_host_id\" class=\"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\"><option value=\"\">None (direct connection)</option> ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			for _, host := range data.JumpHosts {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, "<option value=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var7 string
				templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(host.ID)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/connections/ssh_new.templ`, Line: 169, Col: 32}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 13, "\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var8 string
				templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinStringErrs(host.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/connections/ssh_new.templ`, Line: 169, Col: 46}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 14, " (")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var9 string
				templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinStringErrs(host.Host)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/connections/ssh_new.templ`, Line: 169, Col: 61}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 15, ")</option>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 16, "</select><p class=\"mt-1 text-sm text-gray-500\">Connect through another server (ProxyJump)</p></div><!-- Connection Timeout --><div><label class=\"block text-sm font-medium text-gray-300 mb-1\">Connection Timeout (seconds)</label> <input type=\"number\" name=\"timeout\" value=\"30\" min=\"5\" max=\"300\" class=\"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\"></div><!-- Tags --><div><label class=\"block text-sm font-medium text-gray-300 mb-1\">Tags</label> <input type=\"text\" name=\"tags\" placeholder=\"production, web-server, linux\" class=\"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\"><p class=\"mt-1 text-sm text-gray-500\">Comma-separated tags for organization</p></div></div></div><!-- Actions --><div class=\"flex items-center justify-between pt-4 border-t border-dark-700\"><button type=\"button\" onclick=\"testConnection()\" class=\"px-4 py-2 text-gray-400 hover:text-white border border-dark-600 rounded-lg hover:bg-dark-700 transition-colors\">Test Connection</button><div class=\"flex items-center space-x-3\"><a href=\"/connections/ssh\" class=\"px-4 py-2 text-gray-400 hover:text-white\">Cancel</a> <button type=\"submit\" class=\"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors\">Save Connection</button></div></div></form></div><script>\n\t\t\tfunction toggleAuthFields() {\n\t\t\t\tconst authType = document.querySelector('input[name=\"auth_type\"]:checked').value;\n\t\t\t\tdocument.getElementById('password-field').classList.toggle('hidden', authType !== 'password');\n\t\t\t\tdocument.getElementById('key-field').classList.toggle('hidden', authType !== 'key');\n\t\t\t}\n\n\t\t\tfunction toggleAdvanced() {\n\t\t\t\tconst options = document.getElementById('advanced-options');\n\t\t\t\tconst icon = document.getElementById('advanced-icon');\n\t\t\t\toptions.classList.toggle('hidden');\n\t\t\t\ticon.classList.toggle('rotate-90');\n\t\t\t}\n\n\t\t\tfunction testConnection() {\n\t\t\t\tconst btn = event.currentTarget;\n\t\t\t\tconst form = document.querySelector('form');\n\t\t\t\tconst formData = new FormData(form);\n\n\t\t\t\t// Validate required fields before saving\n\t\t\t\tconst name = formData.get('name');\n\t\t\t\tconst host = formData.get('host');\n\t\t\t\tconst username = formData.get('username');\n\t\t\t\tif (!name || !host || !username) {\n\t\t\t\t\tif (window.usulnet && window.usulnet.toast) { window.usulnet.toast('Please fill in Name, Host, and Username first', 'error'); }\n\t\t\t\t\telse { alert('Please fill in Name, Host, and Username first'); }\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tbtn.disabled = true;\n\t\t\t\tbtn.textContent = 'Saving & Testing...';\n\n\t\t\t\t// Save the connection first, then test it\n\t\t\t\tfetch('/connections/ssh', {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tbody: formData,\n\t\t\t\t}).then(function(resp) {\n\t\t\t\t\tif (resp.redirected) {\n\t\t\t\t\t\t// Extract connection ID from redirect URL (e.g. /connections/ssh/UUID/edit)\n\t\t\t\t\t\tconst url = new URL(resp.url);\n\t\t\t\t\t\tconst parts = url.pathname.split('/');\n\t\t\t\t\t\tconst idIdx = parts.indexOf('ssh') + 1;\n\t\t\t\t\t\tif (idIdx > 0 && idIdx < parts.length) {\n\t\t\t\t\t\t\tconst connId = parts[idIdx];\n\t\t\t\t\t\t\t// Now test the saved connection\n\t\t\t\t\t\t\treturn fetch('/connections/ssh/' + connId + '/test', {\n\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\theaders: { 'X-CSRF-Token': formData.get('csrf_token') },\n\t\t\t\t\t\t\t}).then(function(testResp) { return testResp.json(); })\n\t\t\t\t\t\t\t.then(function(result) {\n\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\tif (window.usulnet && window.usulnet.toast) { window.usulnet.toast('Connection successful (' + result.latency_ms + 'ms)', 'success'); }\n\t\t\t\t\t\t\t\t\telse { alert('Connection successful!'); }\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (window.usulnet && window.usulnet.toast) { window.usulnet.toast('Connection failed: ' + result.message, 'error'); }\n\t\t\t\t\t\t\t\t\telse { alert('Connection failed: ' + result.message); }\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Redirect to edit page\n\t\t\t\t\t\t\t\twindow.location.href = resp.url;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// If not redirected, there was an error â€” reload to show flash messages\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t}).catch(function(err) {\n\t\t\t\t\tif (window.usulnet && window.usulnet.toast) { window.usulnet.toast('Error: ' + err.message, 'error'); }\n\t\t\t\t\telse { alert('Error: ' + err.message); }\n\t\t\t\t}).finally(function() {\n\t\t\t\t\tbtn.disabled = false;\n\t\t\t\t\tbtn.textContent = 'Test Connection';\n\t\t\t\t});\n\t\t\t}\n\t\t</script>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = layouts.Base(data.PageData).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
