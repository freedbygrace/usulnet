// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package gitea

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"fmt"
	"github.com/fr4nsys/usulnet/internal/web/templates/layouts"
	"strings"
)

// ============================================================================
// Detail Data Types
// ============================================================================

type RepoDetailData struct {
	PageData      layouts.PageData
	Repo          RepoDetail
	Branches      []BranchItem
	Tags          []TagItem // Tier 1: Tags
	Commits       []CommitItem
	Files         []FileItem
	CurrentBranch string
	CurrentPath   string
	CSRFToken     string // For forms
	// Tier 2: Counts for tabs
	OpenPRs    int
	OpenIssues int
}

type RepoDetail struct {
	ID             string
	ConnectionID   string // Tier 1: for templates API
	ConnectionName string
	FullName       string
	Description    string
	DefaultBranch  string
	IsPrivate      bool
	IsFork         bool
	IsArchived     bool
	Stars          int
	Forks          int
	HTMLURL        string
	Size           int64
}

type BranchItem struct {
	Name      string
	IsDefault bool
	Protected bool // Tier 1: branch protection status
}

type TagItem struct {
	Name    string
	SHA     string // commit SHA
	Message string // annotated tag message
}

type CommitItem struct {
	SHA      string
	Message  string
	Author   string
	Date     string
	ShortSHA string
}

type FileItem struct {
	Name string
	Path string
	Type string // "file", "dir", "symlink"
	Size int64
	SHA  string
}

// ============================================================================
// Tier 2: Pull Request Types
// ============================================================================

type PRItem struct {
	Number    int64
	Title     string
	State     string // "open", "closed"
	User      string
	CreatedAt string
	Comments  int
	Merged    bool
	HeadRef   string
	BaseRef   string
}

type PRDetailData struct {
	PageData  layouts.PageData
	Repo      RepoDetail
	PR        PRDetail
	CSRFToken string
}

type PRDetail struct {
	Number     int64
	Title      string
	Body       string
	State      string
	Merged     bool
	Mergeable  bool
	User       string
	UserAvatar string
	HeadRef    string
	BaseRef    string
	CreatedAt  string
	UpdatedAt  string
	Comments   int
	Reviews    []PRReviewItem
	Diff       string
}

type PRReviewItem struct {
	ID        int64
	User      string
	State     string // "APPROVED", "REQUEST_CHANGES", "COMMENT", "PENDING"
	Body      string
	CreatedAt string
}

// ============================================================================
// Tier 2: Issue Types
// ============================================================================

type IssueItem struct {
	Number    int64
	Title     string
	State     string // "open", "closed"
	User      string
	CreatedAt string
	Comments  int
	Labels    []LabelItem
}

type IssueDetailData struct {
	PageData  layouts.PageData
	Repo      RepoDetail
	Issue     IssueDetail
	CSRFToken string
}

type IssueDetail struct {
	Number     int64
	Title      string
	Body       string
	State      string
	User       string
	UserAvatar string
	CreatedAt  string
	UpdatedAt  string
	Labels     []LabelItem
	Milestone  string
	Assignees  []string
	Comments   []CommentItem
}

type LabelItem struct {
	ID    int64
	Name  string
	Color string
}

type CommentItem struct {
	ID        int64
	User      string
	Avatar    string
	Body      string
	CreatedAt string
}

// ============================================================================
// Tier 2: Collaborator Types
// ============================================================================

type CollaboratorItem struct {
	ID         int64
	Login      string
	FullName   string
	AvatarURL  string
	Permission string // "admin", "write", "read"
}

// ============================================================================
// Detail Template
// ============================================================================
func Detail(data RepoDetailData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div class=\"space-y-6\"><!-- Breadcrumb --><div class=\"flex items-center gap-2 text-sm text-gray-400\"><a href=\"/integrations/gitea\" class=\"hover:text-white transition-colors\"><i class=\"fas fa-code-branch mr-1\"></i>Gitea</a> <i class=\"fas fa-chevron-right text-[10px] text-gray-400\"></i> <span class=\"text-white\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var3 string
			templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(data.Repo.FullName)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 196, Col: 49}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "</span> ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.CurrentPath != "" {
				for _, crumb := range pathCrumbs(data.CurrentPath) {
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "<i class=\"fas fa-chevron-right text-[10px] text-gray-400\"></i> ")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					if crumb.IsLast {
						templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "<span class=\"text-white\">")
						if templ_7745c5c3_Err != nil {
							return templ_7745c5c3_Err
						}
						var templ_7745c5c3_Var4 string
						templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(crumb.Name)
						if templ_7745c5c3_Err != nil {
							return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 201, Col: 44}
						}
						_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
						if templ_7745c5c3_Err != nil {
							return templ_7745c5c3_Err
						}
						templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "</span>")
						if templ_7745c5c3_Err != nil {
							return templ_7745c5c3_Err
						}
					} else {
						templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "<a href=\"")
						if templ_7745c5c3_Err != nil {
							return templ_7745c5c3_Err
						}
						var templ_7745c5c3_Var5 templ.SafeURL
						templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL(fmt.Sprintf("/integrations/gitea/repos/%s?ref=%s&path=%s", data.Repo.ID, data.CurrentBranch, crumb.Path)))
						if templ_7745c5c3_Err != nil {
							return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 203, Col: 136}
						}
						_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
						if templ_7745c5c3_Err != nil {
							return templ_7745c5c3_Err
						}
						templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "\" class=\"hover:text-white transition-colors\">")
						if templ_7745c5c3_Err != nil {
							return templ_7745c5c3_Err
						}
						var templ_7745c5c3_Var6 string
						templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs(crumb.Name)
						if templ_7745c5c3_Err != nil {
							return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 205, Col: 20}
						}
						_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
						if templ_7745c5c3_Err != nil {
							return templ_7745c5c3_Err
						}
						templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "</a>")
						if templ_7745c5c3_Err != nil {
							return templ_7745c5c3_Err
						}
					}
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "</div><!-- Header --><div class=\"flex items-start justify-between\"><div><div class=\"flex items-center gap-3\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var7 = []any{"fas text-2xl", repoIcon(RepoItem{IsPrivate: data.Repo.IsPrivate, IsFork: data.Repo.IsFork, IsArchived: data.Repo.IsArchived})}
			templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var7...)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "<i class=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var8 string
			templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var7).String())
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 1, Col: 0}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "\"></i><div><h1 class=\"text-2xl font-display font-bold text-white\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var9 string
			templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinStringErrs(data.Repo.FullName)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 218, Col: 82}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, "</h1>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.Repo.Description != "" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 13, "<p class=\"text-gray-400 mt-1\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var10 string
				templ_7745c5c3_Var10, templ_7745c5c3_Err = templ.JoinStringErrs(data.Repo.Description)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 220, Col: 61}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var10))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 14, "</p>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 15, "</div></div><div class=\"flex items-center gap-3 mt-2 text-sm text-gray-400\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.Repo.IsPrivate {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 16, "<span class=\"text-yellow-400\"><i class=\"fas fa-lock mr-1\"></i>Private</span> ")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 17, "<span class=\"text-green-400\"><i class=\"fas fa-globe mr-1\"></i>Public</span> ")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			if data.Repo.IsFork {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 18, "<span class=\"text-purple-400\"><i class=\"fas fa-code-branch mr-1\"></i>Fork</span> ")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			if data.Repo.IsArchived {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 19, "<span class=\"text-gray-500\"><i class=\"fas fa-archive mr-1\"></i>Archived</span> ")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			if data.Repo.Stars > 0 {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 20, "<span><i class=\"fas fa-star text-yellow-500 mr-1\"></i>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var11 string
				templ_7745c5c3_Var11, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%d", data.Repo.Stars))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 237, Col: 97}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var11))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 21, "</span> ")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			if data.Repo.Forks > 0 {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 22, "<span><i class=\"fas fa-code-branch mr-1\"></i>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var12 string
				templ_7745c5c3_Var12, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%d", data.Repo.Forks))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 240, Col: 88}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var12))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 23, "</span> ")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 24, "<span class=\"text-gray-500\">via ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var13 string
			templ_7745c5c3_Var13, templ_7745c5c3_Err = templ.JoinStringErrs(data.Repo.ConnectionName)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 242, Col: 64}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var13))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 25, "</span></div></div><div class=\"flex items-center gap-2\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.Repo.HTMLURL != "" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 26, "<a href=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var14 templ.SafeURL
				templ_7745c5c3_Var14, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL(data.Repo.HTMLURL))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 247, Col: 48}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var14))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 27, "\" target=\"_blank\" class=\"btn-ghost text-sm\"><i class=\"fas fa-external-link-alt mr-1\"></i>Open in Gitea</a>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 28, "<!-- Repo Actions Menu --><div x-data=\"{ open: false }\" class=\"relative\"><button @click=\"open = !open\" class=\"btn-ghost text-sm\"><i class=\"fas fa-cog mr-1\"></i>Settings <i class=\"fas fa-chevron-down ml-1 text-xs\"></i></button><div x-show=\"open\" @click.outside=\"open = false\" x-transition:enter=\"transition ease-out duration-100\" x-transition:enter-start=\"opacity-0 scale-95\" x-transition:enter-end=\"opacity-100 scale-100\" class=\"absolute right-0 mt-2 w-48 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50\"><button onclick=\"openEditRepoModal()\" class=\"w-full px-4 py-2 text-left text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors flex items-center\"><i class=\"fas fa-edit w-5\"></i>Edit Repository</button><hr class=\"border-gray-700\"><button onclick=\"openDeleteRepoModal()\" class=\"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-red-500/10 hover:text-red-300 transition-colors flex items-center\"><i class=\"fas fa-trash w-5\"></i>Delete Repository</button></div></div></div></div><!-- Tab Navigation (Tier 2) --><div class=\"border-b border-gray-700 -mb-px\"><nav class=\"flex gap-1\" aria-label=\"Repository tabs\"><a href=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var15 templ.SafeURL
			templ_7745c5c3_Var15, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL(fmt.Sprintf("/integrations/gitea/repos/%s?ref=%s", data.Repo.ID, data.CurrentBranch)))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 278, Col: 114}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var15))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 29, "\" class=\"px-4 py-2 text-sm font-medium text-white border-b-2 border-blue-500 bg-gray-800/50 rounded-t-lg\"><i class=\"fas fa-code mr-2\"></i>Code</a> <a href=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var16 templ.SafeURL
			templ_7745c5c3_Var16, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL(fmt.Sprintf("/integrations/gitea/repos/%s/pulls?tab=pulls", data.Repo.ID)))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 282, Col: 103}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var16))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 30, "\" class=\"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white hover:bg-gray-800/30 rounded-t-lg transition-colors flex items-center gap-2\"><i class=\"fas fa-code-pull-request\"></i>Pull Requests ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.OpenPRs > 0 {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 31, "<span class=\"bg-gray-700 text-xs px-1.5 py-0.5 rounded-full\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var17 string
				templ_7745c5c3_Var17, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%d", data.OpenPRs))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 286, Col: 101}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var17))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 32, "</span>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 33, "</a> <a href=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var18 templ.SafeURL
			templ_7745c5c3_Var18, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL(fmt.Sprintf("/integrations/gitea/repos/%s/issues?tab=issues", data.Repo.ID)))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 289, Col: 105}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var18))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 34, "\" class=\"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white hover:bg-gray-800/30 rounded-t-lg transition-colors flex items-center gap-2\"><i class=\"fas fa-circle-exclamation\"></i>Issues ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.OpenIssues > 0 {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 35, "<span class=\"bg-gray-700 text-xs px-1.5 py-0.5 rounded-full\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var19 string
				templ_7745c5c3_Var19, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%d", data.OpenIssues))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 293, Col: 104}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var19))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 36, "</span>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 37, "</a> <button onclick=\"openCollaboratorsModal()\" class=\"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white hover:bg-gray-800/30 rounded-t-lg transition-colors\"><i class=\"fas fa-users mr-2\"></i>Collaborators</button></nav></div><!-- Branch/Tag Selector + Actions --><div class=\"flex items-center justify-between flex-wrap gap-4\"><div class=\"flex items-center gap-4\"><!-- Branch selector --><div class=\"relative\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templ.RenderScriptItems(ctx, templ_7745c5c3_Buffer, goToRef(data.Repo.ID))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 38, "<select onchange=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var20 templ.ComponentScript = goToRef(data.Repo.ID)
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ_7745c5c3_Var20.Call)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 39, "\" id=\"branch-select\" class=\"appearance-none bg-gray-800 border border-gray-600 rounded-lg pl-8 pr-10 py-2 text-sm text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 cursor-pointer\"><optgroup label=\"Branches\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			for _, branch := range data.Branches {
				if branch.Name == data.CurrentBranch {
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 40, "<option value=\"")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					var templ_7745c5c3_Var21 string
					templ_7745c5c3_Var21, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
					if templ_7745c5c3_Err != nil {
						return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 316, Col: 37}
					}
					_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var21))
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 41, "\" selected>")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					var templ_7745c5c3_Var22 string
					templ_7745c5c3_Var22, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
					if templ_7745c5c3_Err != nil {
						return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 316, Col: 62}
					}
					_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var22))
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 42, "</option>")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
				} else {
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 43, "<option value=\"")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					var templ_7745c5c3_Var23 string
					templ_7745c5c3_Var23, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
					if templ_7745c5c3_Err != nil {
						return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 318, Col: 37}
					}
					_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var23))
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 44, "\">")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					var templ_7745c5c3_Var24 string
					templ_7745c5c3_Var24, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
					if templ_7745c5c3_Err != nil {
						return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 318, Col: 53}
					}
					_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var24))
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 45, "</option>")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 46, "</optgroup> ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if len(data.Tags) > 0 {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 47, "<optgroup label=\"Tags\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				for _, tag := range data.Tags {
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 48, "<option value=\"")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					var templ_7745c5c3_Var25 string
					templ_7745c5c3_Var25, templ_7745c5c3_Err = templ.JoinStringErrs(tag.Name)
					if templ_7745c5c3_Err != nil {
						return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 325, Col: 34}
					}
					_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var25))
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 49, "\">")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					var templ_7745c5c3_Var26 string
					templ_7745c5c3_Var26, templ_7745c5c3_Err = templ.JoinStringErrs(tag.Name)
					if templ_7745c5c3_Err != nil {
						return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 325, Col: 47}
					}
					_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var26))
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 50, "</option>")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 51, "</optgroup>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 52, "</select> <i class=\"fas fa-code-branch absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400 text-xs pointer-events-none\"></i> <i class=\"fas fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs pointer-events-none\"></i></div><div class=\"flex items-center gap-3 text-sm text-gray-400\"><span><i class=\"fas fa-code-branch mr-1\"></i>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var27 string
			templ_7745c5c3_Var27, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%d", len(data.Branches)))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 335, Col: 85}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var27))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 53, "</span> <span><i class=\"fas fa-tag mr-1\"></i>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var28 string
			templ_7745c5c3_Var28, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%d", len(data.Tags)))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 338, Col: 73}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var28))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 54, "</span></div></div><!-- Branch/Tag Actions --><div class=\"flex items-center gap-2\"><button onclick=\"openCreateBranchModal()\" class=\"btn-ghost text-sm\"><i class=\"fas fa-code-branch mr-1\"></i>New Branch</button> <button onclick=\"openCreateTagModal()\" class=\"btn-ghost text-sm\"><i class=\"fas fa-tag mr-1\"></i>New Tag</button> <button onclick=\"openCompareModal()\" class=\"btn-ghost text-sm\"><i class=\"fas fa-code-compare mr-1\"></i>Compare</button></div></div><!-- Two column layout: Files + Commits --><div class=\"grid grid-cols-1 lg:grid-cols-3 gap-6\"><!-- File Browser (2/3) --><div class=\"lg:col-span-2\"><div class=\"card\"><div class=\"p-3 border-b border-gray-700/50 flex items-center justify-between\"><h3 class=\"text-sm font-medium text-gray-300\"><i class=\"fas fa-folder-open mr-2 text-gray-500\"></i> ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.CurrentPath == "" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 55, "Files")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				var templ_7745c5c3_Var29 string
				templ_7745c5c3_Var29, templ_7745c5c3_Err = templ.JoinStringErrs(data.CurrentPath)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 368, Col: 27}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var29))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 56, "</h3>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.CurrentPath != "" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 57, "<a href=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var30 templ.SafeURL
				templ_7745c5c3_Var30, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL(fmt.Sprintf("/integrations/gitea/repos/%s?ref=%s&path=%s", data.Repo.ID, data.CurrentBranch, parentPath(data.CurrentPath))))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 372, Col: 155}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var30))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 58, "\" class=\"text-sm text-gray-400 hover:text-white transition-colors\"><i class=\"fas fa-level-up-alt mr-1\"></i>Up</a>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 59, "</div><div id=\"file-tree\" hx-get=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var31 string
			templ_7745c5c3_Var31, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("/integrations/gitea/repos/%s/files?ref=%s&path=%s", data.Repo.ID, data.CurrentBranch, data.CurrentPath))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 379, Col: 132}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var31))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 60, "\" hx-trigger=\"load\" hx-swap=\"innerHTML\"><!-- Static fallback while HTMX loads -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if len(data.Files) > 0 {
				templ_7745c5c3_Err = fileList(data.Files, data.Repo.ID, data.CurrentBranch).Render(ctx, templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 61, "<div class=\"p-8 text-center text-gray-500\"><i class=\"fas fa-spinner fa-spin mr-2\"></i>Loading files...</div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 62, "</div></div></div><!-- Recent Commits (1/3) --><div><div class=\"card\"><div class=\"p-3 border-b border-gray-700/50\"><h3 class=\"text-sm font-medium text-gray-300\"><i class=\"fas fa-history mr-2 text-gray-500\"></i>Recent Commits</h3></div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if len(data.Commits) == 0 {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 63, "<div class=\"p-6 text-center text-gray-500 text-sm\">No commits found</div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 64, "<div class=\"divide-y divide-gray-700/30 max-h-[600px] overflow-y-auto\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				for _, commit := range data.Commits {
					templ_7745c5c3_Err = commitRow(commit, data.Repo.HTMLURL).Render(ctx, templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 65, "</div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 66, "</div></div></div><!-- File Viewer (hidden by default, shown by JS) --><div id=\"file-viewer\" class=\"hidden\"><div class=\"card\"><div class=\"p-3 border-b border-gray-700/50 flex items-center justify-between\"><h3 id=\"file-viewer-path\" class=\"text-sm font-medium text-gray-300\"><i class=\"fas fa-file-code mr-2 text-gray-500\"></i></h3><div class=\"flex items-center gap-2\"><a id=\"btn-edit-monaco\" href=\"#\" class=\"hidden btn-sm btn-primary\" title=\"Edit in Monaco\"><i class=\"fas fa-edit mr-1\"></i> Monaco</a> <a id=\"btn-edit-nvim\" href=\"#\" class=\"hidden btn-sm btn-ghost\" title=\"Edit in Neovim\"><i class=\"fas fa-terminal mr-1\"></i> Neovim</a> <button onclick=\"closeFileViewer()\" class=\"btn-sm btn-ghost\" title=\"Close\"><i class=\"fas fa-times\"></i></button></div></div><div id=\"file-viewer-content\" class=\"p-0\"><!-- Content loaded via JS --></div></div></div></div><!-- JS for branch switching and file viewing --> <script>\n\t\tfunction goToRef(repoID) {\n\t\t\tvar sel = document.getElementById('branch-select');\n\t\t\tvar ref = sel.value;\n\t\t\twindow.location.href = '/integrations/gitea/repos/' + repoID + '?ref=' + encodeURIComponent(ref);\n\t\t}\n\n\t\tfunction viewFile(repoID, path, ref) {\n\t\t\tvar viewer = document.getElementById('file-viewer');\n\t\t\tvar pathEl = document.getElementById('file-viewer-path');\n\t\t\tvar contentEl = document.getElementById('file-viewer-content');\n\t\t\tvar btnMonaco = document.getElementById('btn-edit-monaco');\n\t\t\tvar btnNvim = document.getElementById('btn-edit-nvim');\n\n\t\t\tpathEl.innerHTML = '<i class=\"fas fa-file-code mr-2 text-gray-500\"></i>' + path;\n\t\t\tcontentEl.innerHTML = '<div class=\"p-8 text-center text-gray-500\"><i class=\"fas fa-spinner fa-spin mr-2\"></i>Loading...</div>';\n\t\t\tbtnMonaco.classList.add('hidden');\n\t\t\tbtnNvim.classList.add('hidden');\n\t\t\tviewer.classList.remove('hidden');\n\n\t\t\tvar editorQuery = '?repo=' + encodeURIComponent(repoID) + '&file=' + encodeURIComponent(path) + '&ref=' + encodeURIComponent(ref);\n\n\t\t\tfetch('/integrations/gitea/repos/' + repoID + '/file?path=' + encodeURIComponent(path) + '&ref=' + encodeURIComponent(ref))\n\t\t\t\t.then(function(resp) {\n\t\t\t\t\tif (!resp.ok) throw new Error('Failed to load');\n\t\t\t\t\treturn resp.text();\n\t\t\t\t})\n\t\t\t\t.then(function(text) {\n\t\t\t\t\tvar ext = path.split('.').pop().toLowerCase();\n\t\t\t\t\tvar binaryExts = ['png','jpg','jpeg','gif','svg','webp','ico','bmp','tiff','pdf','zip','gz','tar','7z','rar','exe','dll','so','woff','woff2','ttf','eot','mp3','mp4','avi','mov','wav'];\n\t\t\t\t\tvar isBinary = binaryExts.indexOf(ext) !== -1;\n\n\t\t\t\t\tif (isBinary) {\n\t\t\t\t\t\tcontentEl.innerHTML = '<div class=\"p-4 text-center\"><p class=\"text-gray-400 text-sm mb-2\">Binary file â€” cannot be edited</p></div>';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Show edit buttons for text files\n\t\t\t\t\t\tbtnMonaco.href = '/editor/monaco' + editorQuery;\n\t\t\t\t\t\tbtnMonaco.classList.remove('hidden');\n\t\t\t\t\t\tbtnNvim.href = '/editor/nvim' + editorQuery;\n\t\t\t\t\t\tbtnNvim.classList.remove('hidden');\n\n\t\t\t\t\t\tvar escaped = text.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');\n\t\t\t\t\t\tvar lines = escaped.split('\\n');\n\t\t\t\t\t\tvar numbered = lines.map(function(line, i) {\n\t\t\t\t\t\t\treturn '<tr><td class=\"select-none text-right pr-4 text-gray-400 text-xs w-12 align-top\">' + (i+1) + '</td><td class=\"whitespace-pre\">' + (line || ' ') + '</td></tr>';\n\t\t\t\t\t\t}).join('');\n\t\t\t\t\t\tcontentEl.innerHTML = '<div class=\"overflow-x-auto\"><table class=\"w-full text-sm font-mono text-gray-300\"><tbody>' + numbered + '</tbody></table></div>';\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(function(err) {\n\t\t\t\t\tcontentEl.innerHTML = '<div class=\"p-8 text-center text-red-400\"><i class=\"fas fa-exclamation-triangle mr-2\"></i>' + err.message + '</div>';\n\t\t\t\t});\n\n\t\t\tviewer.scrollIntoView({ behavior: 'smooth' });\n\t\t}\n\n\t\tfunction closeFileViewer() {\n\t\t\tdocument.getElementById('file-viewer').classList.add('hidden');\n\t\t}\n\t\t</script> ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = tier1Modals(data).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 67, " ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = tier2Modals(data).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = layouts.Base(data.PageData).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

// ============================================================================
// File List
// ============================================================================

// FileListPartial is the exported wrapper for HTMX partial rendering.
func FileListPartial(files []FileItem, repoID string, currentBranch string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var32 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var32 == nil {
			templ_7745c5c3_Var32 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = fileList(files, repoID, currentBranch).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func fileList(files []FileItem, repoID string, currentBranch string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var33 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var33 == nil {
			templ_7745c5c3_Var33 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 68, "<div class=\"divide-y divide-gray-700/30\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		for _, f := range files {
			if f.Type == "dir" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 69, "<a href=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var34 templ.SafeURL
				templ_7745c5c3_Var34, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL(fmt.Sprintf("/integrations/gitea/repos/%s?ref=%s&path=%s", repoID, currentBranch, f.Path)))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 524, Col: 118}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var34))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 70, "\" class=\"flex items-center gap-3 px-4 py-2.5 hover:bg-gray-800/30 transition-colors group\"><i class=\"fas fa-folder text-blue-400\"></i> <span class=\"text-sm text-gray-300 group-hover:text-white\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var35 string
				templ_7745c5c3_Var35, templ_7745c5c3_Err = templ.JoinStringErrs(f.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 527, Col: 72}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var35))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 71, "</span></a>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templ.RenderScriptItems(ctx, templ_7745c5c3_Buffer, openFile(repoID, f.Path, currentBranch))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 72, "<div class=\"flex items-center justify-between px-4 py-2.5 hover:bg-gray-800/30 transition-colors group cursor-pointer\" onclick=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var36 templ.ComponentScript = openFile(repoID, f.Path, currentBranch)
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ_7745c5c3_Var36.Call)
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 73, "\"><div class=\"flex items-center gap-3\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var37 = []any{"fas", fileIcon(f.Name)}
				templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var37...)
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 74, "<i class=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var38 string
				templ_7745c5c3_Var38, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var37).String())
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 1, Col: 0}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var38))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 75, "\"></i> <span class=\"text-sm text-gray-300 group-hover:text-white\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var39 string
				templ_7745c5c3_Var39, templ_7745c5c3_Err = templ.JoinStringErrs(f.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 534, Col: 73}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var39))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 76, "</span></div><span class=\"text-xs text-gray-500\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var40 string
				templ_7745c5c3_Var40, templ_7745c5c3_Err = templ.JoinStringErrs(formatFileSize(f.Size))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 536, Col: 65}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var40))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 77, "</span></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 78, "</div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

// ============================================================================
// Commit Row
// ============================================================================
func commitRow(commit CommitItem, repoURL string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var41 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var41 == nil {
			templ_7745c5c3_Var41 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templ.RenderScriptItems(ctx, templ_7745c5c3_Buffer, viewCommitClick(commit.SHA))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 79, "<div class=\"px-4 py-3 hover:bg-gray-800/30 cursor-pointer transition-colors\" onclick=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var42 templ.ComponentScript = viewCommitClick(commit.SHA)
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ_7745c5c3_Var42.Call)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 80, "\"><div class=\"flex items-start gap-2\"><div class=\"flex-1 min-w-0\"><p class=\"text-sm text-gray-300 line-clamp-2\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var43 string
		templ_7745c5c3_Var43, templ_7745c5c3_Err = templ.JoinStringErrs(firstLine(commit.Message))
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 551, Col: 77}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var43))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 81, "</p><div class=\"flex items-center gap-2 mt-1 text-xs text-gray-500\"><span>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var44 string
		templ_7745c5c3_Var44, templ_7745c5c3_Err = templ.JoinStringErrs(commit.Author)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 553, Col: 26}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var44))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 82, "</span> <span>Â·</span> <span>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var45 string
		templ_7745c5c3_Var45, templ_7745c5c3_Err = templ.JoinStringErrs(commit.Date)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 555, Col: 24}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var45))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 83, "</span></div></div><code class=\"text-xs px-1.5 py-0.5 bg-gray-800 rounded text-gray-400 font-mono whitespace-nowrap\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var46 string
		templ_7745c5c3_Var46, templ_7745c5c3_Err = templ.JoinStringErrs(commit.ShortSHA)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 559, Col: 21}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var46))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 84, "</code></div></div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func viewCommitClick(sha string) templ.ComponentScript {
	return templ.ComponentScript{
		Name: `__templ_viewCommitClick_7896`,
		Function: `function __templ_viewCommitClick_7896(sha){viewCommit(sha);
}`,
		Call:       templ.SafeScript(`__templ_viewCommitClick_7896`, sha),
		CallInline: templ.SafeScriptInline(`__templ_viewCommitClick_7896`, sha),
	}
}

// ============================================================================
// Helpers
// ============================================================================

type pathCrumb struct {
	Name   string
	Path   string
	IsLast bool
}

func pathCrumbs(path string) []pathCrumb {
	parts := strings.Split(path, "/")
	var crumbs []pathCrumb
	for i, part := range parts {
		if part == "" {
			continue
		}
		crumbs = append(crumbs, pathCrumb{
			Name:   part,
			Path:   strings.Join(parts[:i+1], "/"),
			IsLast: i == len(parts)-1,
		})
	}
	return crumbs
}

func parentPath(path string) string {
	parts := strings.Split(path, "/")
	if len(parts) <= 1 {
		return ""
	}
	return strings.Join(parts[:len(parts)-1], "/")
}

func firstLine(msg string) string {
	if idx := strings.Index(msg, "\n"); idx != -1 {
		return msg[:idx]
	}
	return msg
}

func fileIcon(name string) string {
	ext := ""
	if idx := strings.LastIndex(name, "."); idx != -1 {
		ext = strings.ToLower(name[idx+1:])
	}
	switch ext {
	case "go":
		return "fa-file-code text-cyan-400"
	case "js", "ts", "jsx", "tsx":
		return "fa-file-code text-yellow-400"
	case "py":
		return "fa-file-code text-green-400"
	case "rs":
		return "fa-file-code text-orange-400"
	case "md", "txt", "rst":
		return "fa-file-alt text-gray-400"
	case "json", "yaml", "yml", "toml":
		return "fa-file-code text-purple-400"
	case "html", "css", "scss":
		return "fa-file-code text-pink-400"
	case "sh", "bash", "zsh":
		return "fa-terminal text-green-400"
	case "sql":
		return "fa-database text-blue-400"
	case "dockerfile":
		return "fa-docker text-blue-400"
	case "png", "jpg", "jpeg", "gif", "svg", "webp":
		return "fa-file-image text-emerald-400"
	case "zip", "tar", "gz", "bz2":
		return "fa-file-archive text-amber-400"
	default:
		return "fa-file text-gray-500"
	}
}

func formatFileSize(size int64) string {
	if size < 1024 {
		return fmt.Sprintf("%d B", size)
	}
	if size < 1024*1024 {
		return fmt.Sprintf("%.1f KB", float64(size)/1024)
	}
	return fmt.Sprintf("%.1f MB", float64(size)/(1024*1024))
}

func goToRef(repoID string) templ.ComponentScript {
	return templ.ComponentScript{
		Name: `__templ_goToRef_6adc`,
		Function: `function __templ_goToRef_6adc(repoID){var sel = document.getElementById('branch-select');
	var ref = sel.value;
	window.location.href = '/integrations/gitea/repos/' + repoID + '?ref=' + encodeURIComponent(ref);
}`,
		Call:       templ.SafeScript(`__templ_goToRef_6adc`, repoID),
		CallInline: templ.SafeScriptInline(`__templ_goToRef_6adc`, repoID),
	}
}

func openFile(repoID string, path string, ref string) templ.ComponentScript {
	return templ.ComponentScript{
		Name: `__templ_openFile_8fe7`,
		Function: `function __templ_openFile_8fe7(repoID, path, ref){viewFile(repoID, path, ref);
}`,
		Call:       templ.SafeScript(`__templ_openFile_8fe7`, repoID, path, ref),
		CallInline: templ.SafeScriptInline(`__templ_openFile_8fe7`, repoID, path, ref),
	}
}

// ============================================================================
// Tier 1 Modal Functions
// ============================================================================
func tier1Modals(data RepoDetailData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var47 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var47 == nil {
			templ_7745c5c3_Var47 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 85, "<!-- Create Branch Modal --><div id=\"create-branch-modal\" class=\"fixed inset-0 bg-black/60 z-50 hidden items-center justify-center\"><div class=\"bg-gray-800 rounded-xl border border-gray-700 p-6 w-full max-w-md mx-4\"><h3 class=\"text-lg font-semibold text-white mb-4\"><i class=\"fas fa-code-branch mr-2 text-blue-400\"></i>Create Branch</h3><form id=\"create-branch-form\" class=\"space-y-4\"><input type=\"hidden\" name=\"csrf_token\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var48 string
		templ_7745c5c3_Var48, templ_7745c5c3_Err = templ.JoinStringErrs(data.CSRFToken)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 677, Col: 65}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var48))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 86, "\"><div><label class=\"block text-sm text-gray-400 mb-1\">Branch Name</label> <input type=\"text\" name=\"name\" required placeholder=\"feature/my-branch\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500\"></div><div><label class=\"block text-sm text-gray-400 mb-1\">Source Branch</label> <select name=\"source\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		for _, branch := range data.Branches {
			if branch.Name == data.CurrentBranch {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 87, "<option value=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var49 string
				templ_7745c5c3_Var49, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 688, Col: 35}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var49))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 88, "\" selected>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var50 string
				templ_7745c5c3_Var50, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 688, Col: 60}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var50))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 89, "</option>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 90, "<option value=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var51 string
				templ_7745c5c3_Var51, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 690, Col: 35}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var51))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 91, "\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var52 string
				templ_7745c5c3_Var52, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 690, Col: 51}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var52))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 92, "</option>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 93, "</select></div><div class=\"flex justify-end gap-3 pt-2\"><button type=\"button\" onclick=\"closeModal('create-branch-modal')\" class=\"btn-ghost\">Cancel</button> <button type=\"submit\" class=\"btn-primary\">Create Branch</button></div></form></div></div><!-- Create Tag Modal --><div id=\"create-tag-modal\" class=\"fixed inset-0 bg-black/60 z-50 hidden items-center justify-center\"><div class=\"bg-gray-800 rounded-xl border border-gray-700 p-6 w-full max-w-md mx-4\"><h3 class=\"text-lg font-semibold text-white mb-4\"><i class=\"fas fa-tag mr-2 text-green-400\"></i>Create Tag</h3><form id=\"create-tag-form\" class=\"space-y-4\"><input type=\"hidden\" name=\"csrf_token\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var53 string
		templ_7745c5c3_Var53, templ_7745c5c3_Err = templ.JoinStringErrs(data.CSRFToken)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 710, Col: 65}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var53))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 94, "\"><div><label class=\"block text-sm text-gray-400 mb-1\">Tag Name</label> <input type=\"text\" name=\"name\" required placeholder=\"v1.0.0\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500\"></div><div><label class=\"block text-sm text-gray-400 mb-1\">Target (branch or commit)</label> <input type=\"text\" name=\"target\" placeholder=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var54 string
		templ_7745c5c3_Var54, templ_7745c5c3_Err = templ.JoinStringErrs(data.CurrentBranch)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 718, Col: 70}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var54))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 95, "\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white\"><p class=\"text-xs text-gray-500 mt-1\">Leave empty to use current branch</p></div><div><label class=\"block text-sm text-gray-400 mb-1\">Message (optional, for annotated tag)</label> <textarea name=\"message\" rows=\"2\" placeholder=\"Release notes...\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white resize-none\"></textarea></div><div class=\"flex justify-end gap-3 pt-2\"><button type=\"button\" onclick=\"closeModal('create-tag-modal')\" class=\"btn-ghost\">Cancel</button> <button type=\"submit\" class=\"btn-primary\">Create Tag</button></div></form></div></div><!-- Compare Modal --><div id=\"compare-modal\" class=\"fixed inset-0 bg-black/60 z-50 hidden items-center justify-center\"><div class=\"bg-gray-800 rounded-xl border border-gray-700 p-6 w-full max-w-lg mx-4\"><h3 class=\"text-lg font-semibold text-white mb-4\"><i class=\"fas fa-code-compare mr-2 text-purple-400\"></i>Compare Branches</h3><form id=\"compare-form\" class=\"space-y-4\"><div class=\"grid grid-cols-2 gap-4\"><div><label class=\"block text-sm text-gray-400 mb-1\">Base</label> <select name=\"base\" id=\"compare-base\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		for _, branch := range data.Branches {
			if branch.IsDefault {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 96, "<option value=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var55 string
				templ_7745c5c3_Var55, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 748, Col: 36}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var55))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 97, "\" selected>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var56 string
				templ_7745c5c3_Var56, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 748, Col: 61}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var56))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 98, "</option>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 99, "<option value=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var57 string
				templ_7745c5c3_Var57, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 750, Col: 36}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var57))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 100, "\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var58 string
				templ_7745c5c3_Var58, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 750, Col: 52}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var58))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 101, "</option>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 102, "</select></div><div><label class=\"block text-sm text-gray-400 mb-1\">Compare</label> <select name=\"head\" id=\"compare-head\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		for _, branch := range data.Branches {
			if branch.Name == data.CurrentBranch && !branch.IsDefault {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 103, "<option value=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var59 string
				templ_7745c5c3_Var59, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 760, Col: 36}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var59))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 104, "\" selected>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var60 string
				templ_7745c5c3_Var60, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 760, Col: 61}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var60))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 105, "</option>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 106, "<option value=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var61 string
				templ_7745c5c3_Var61, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 762, Col: 36}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var61))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 107, "\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var62 string
				templ_7745c5c3_Var62, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 762, Col: 52}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var62))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 108, "</option>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 109, "</select></div></div><div class=\"flex justify-end gap-3 pt-2\"><button type=\"button\" onclick=\"closeModal('compare-modal')\" class=\"btn-ghost\">Cancel</button> <button type=\"submit\" class=\"btn-primary\">Compare</button></div></form><!-- Compare results will be shown here --><div id=\"compare-results\" class=\"mt-4 hidden\"><div class=\"border-t border-gray-700 pt-4\"><div id=\"compare-stats\" class=\"text-sm text-gray-400 mb-3\"></div><div id=\"compare-diff\" class=\"bg-gray-900 rounded-lg p-3 overflow-x-auto max-h-96\"><pre class=\"text-xs text-gray-300 font-mono whitespace-pre\"></pre></div></div></div></div></div><!-- Edit Repo Modal --><div id=\"edit-repo-modal\" class=\"fixed inset-0 bg-black/60 z-50 hidden items-center justify-center\"><div class=\"bg-gray-800 rounded-xl border border-gray-700 p-6 w-full max-w-md mx-4\"><h3 class=\"text-lg font-semibold text-white mb-4\"><i class=\"fas fa-edit mr-2 text-blue-400\"></i>Edit Repository</h3><form action=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var63 templ.SafeURL
		templ_7745c5c3_Var63, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL(fmt.Sprintf("/integrations/gitea/repos/%s/edit", data.Repo.ID)))
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 791, Col: 95}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var63))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 110, "\" method=\"POST\" class=\"space-y-4\"><input type=\"hidden\" name=\"csrf_token\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var64 string
		templ_7745c5c3_Var64, templ_7745c5c3_Err = templ.JoinStringErrs(data.CSRFToken)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 792, Col: 65}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var64))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 111, "\"><div><label class=\"block text-sm text-gray-400 mb-1\">Description</label> <textarea name=\"description\" rows=\"3\" placeholder=\"Repository description...\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white resize-none\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var65 string
		templ_7745c5c3_Var65, templ_7745c5c3_Err = templ.JoinStringErrs(data.Repo.Description)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 796, Col: 123}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var65))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 112, "</textarea></div><div><label class=\"block text-sm text-gray-400 mb-1\">Default Branch</label> <select name=\"default_branch\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		for _, branch := range data.Branches {
			if branch.Name == data.Repo.DefaultBranch {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 113, "<option value=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var66 string
				templ_7745c5c3_Var66, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 803, Col: 35}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var66))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 114, "\" selected>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var67 string
				templ_7745c5c3_Var67, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 803, Col: 60}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var67))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 115, "</option>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 116, "<option value=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var68 string
				templ_7745c5c3_Var68, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 805, Col: 35}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var68))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 117, "\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var69 string
				templ_7745c5c3_Var69, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 805, Col: 51}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var69))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 118, "</option>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 119, "</select></div><div class=\"flex items-center gap-4\"><label class=\"flex items-center gap-2 cursor-pointer\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if data.Repo.IsPrivate {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 120, "<input type=\"checkbox\" name=\"private\" value=\"true\" checked class=\"rounded bg-gray-900 border-gray-600 text-blue-500\"> ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		} else {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 121, "<input type=\"checkbox\" name=\"private\" value=\"true\" class=\"rounded bg-gray-900 border-gray-600 text-blue-500\"> ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 122, "<span class=\"text-sm text-gray-300\">Private</span></label> <label class=\"flex items-center gap-2 cursor-pointer\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if data.Repo.IsArchived {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 123, "<input type=\"checkbox\" name=\"archived\" value=\"true\" checked class=\"rounded bg-gray-900 border-gray-600 text-yellow-500\"> ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		} else {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 124, "<input type=\"checkbox\" name=\"archived\" value=\"true\" class=\"rounded bg-gray-900 border-gray-600 text-yellow-500\"> ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 125, "<span class=\"text-sm text-gray-300\">Archived</span></label></div><div class=\"flex justify-end gap-3 pt-2\"><button type=\"button\" onclick=\"closeModal('edit-repo-modal')\" class=\"btn-ghost\">Cancel</button> <button type=\"submit\" class=\"btn-primary\">Save Changes</button></div></form></div></div><!-- Delete Repo Modal --><div id=\"delete-repo-modal\" class=\"fixed inset-0 bg-black/60 z-50 hidden items-center justify-center\"><div class=\"bg-gray-800 rounded-xl border border-gray-700 p-6 w-full max-w-md mx-4\"><h3 class=\"text-lg font-semibold text-red-400 mb-4\"><i class=\"fas fa-exclamation-triangle mr-2\"></i>Delete Repository</h3><p class=\"text-gray-300 mb-4\">Are you sure you want to delete <strong class=\"text-white\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var70 string
		templ_7745c5c3_Var70, templ_7745c5c3_Err = templ.JoinStringErrs(data.Repo.FullName)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 843, Col: 83}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var70))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 126, "</strong>? This action cannot be undone.</p><form action=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var71 templ.SafeURL
		templ_7745c5c3_Var71, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL(fmt.Sprintf("/integrations/gitea/repos/%s/delete", data.Repo.ID)))
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 846, Col: 97}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var71))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 127, "\" method=\"POST\" class=\"space-y-4\"><input type=\"hidden\" name=\"csrf_token\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var72 string
		templ_7745c5c3_Var72, templ_7745c5c3_Err = templ.JoinStringErrs(data.CSRFToken)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 847, Col: 65}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var72))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 128, "\"><div><label class=\"block text-sm text-gray-400 mb-1\">Type repository name to confirm</label> <input type=\"text\" name=\"confirm_name\" required placeholder=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var73 string
		templ_7745c5c3_Var73, templ_7745c5c3_Err = templ.JoinStringErrs(data.Repo.FullName)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 850, Col: 85}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var73))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 129, "\" class=\"w-full px-3 py-2 bg-gray-900 border border-red-600/50 rounded-lg text-white focus:border-red-500 focus:ring-1 focus:ring-red-500\"></div><div class=\"flex justify-end gap-3 pt-2\"><button type=\"button\" onclick=\"closeModal('delete-repo-modal')\" class=\"btn-ghost\">Cancel</button> <button type=\"submit\" class=\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors\">Delete Repository</button></div></form></div></div><!-- Commit Detail Modal --><div id=\"commit-detail-modal\" class=\"fixed inset-0 bg-black/60 z-50 hidden items-center justify-center\"><div class=\"bg-gray-800 rounded-xl border border-gray-700 p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto\"><div class=\"flex items-center justify-between mb-4\"><h3 class=\"text-lg font-semibold text-white\"><i class=\"fas fa-code-commit mr-2 text-orange-400\"></i> <span id=\"commit-sha-title\"></span></h3><button onclick=\"closeModal('commit-detail-modal')\" class=\"text-gray-400 hover:text-white\"><i class=\"fas fa-times\"></i></button></div><div id=\"commit-detail-content\"><div class=\"animate-pulse\"><div class=\"h-4 bg-gray-700 rounded w-3/4 mb-2\"></div><div class=\"h-4 bg-gray-700 rounded w-1/2\"></div></div></div></div></div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = tier1Scripts(data).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = tier2Scripts(data).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func tier1Scripts(data RepoDetailData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var74 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var74 == nil {
			templ_7745c5c3_Var74 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 130, "<script>\n\t\tconst repoID = '")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Var75, templ_7745c5c3_Err := templruntime.ScriptContentInsideStringLiteral(data.Repo.ID)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 890, Col: 33}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ_7745c5c3_Var75)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 131, "';\n\t\tconst csrfToken = '")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Var76, templ_7745c5c3_Err := templruntime.ScriptContentInsideStringLiteral(data.CSRFToken)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 891, Col: 38}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ_7745c5c3_Var76)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 132, "';\n\t\t\n\t\t// Modal helpers\n\t\tfunction openModal(id) {\n\t\t\tdocument.getElementById(id).classList.remove('hidden');\n\t\t\tdocument.getElementById(id).classList.add('flex');\n\t\t}\n\t\tfunction closeModal(id) {\n\t\t\tdocument.getElementById(id).classList.add('hidden');\n\t\t\tdocument.getElementById(id).classList.remove('flex');\n\t\t}\n\t\t\n\t\t// Expose modal openers globally\n\t\twindow.openCreateBranchModal = () => openModal('create-branch-modal');\n\t\twindow.openCreateTagModal = () => openModal('create-tag-modal');\n\t\twindow.openCompareModal = () => openModal('compare-modal');\n\t\twindow.openEditRepoModal = () => openModal('edit-repo-modal');\n\t\twindow.openDeleteRepoModal = () => openModal('delete-repo-modal');\n\t\t\n\t\t// Create Branch\n\t\tdocument.getElementById('create-branch-form')?.addEventListener('submit', async (e) => {\n\t\t\te.preventDefault();\n\t\t\tconst form = e.target;\n\t\t\tconst data = {\n\t\t\t\tname: form.name.value,\n\t\t\t\tsource: form.source.value\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${repoID}/branches`, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'X-CSRF-Token': csrfToken\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify(data)\n\t\t\t\t});\n\t\t\t\tif (!resp.ok) throw new Error(await resp.text());\n\t\t\t\tcloseModal('create-branch-modal');\n\t\t\t\twindow.location.reload();\n\t\t\t} catch (err) {\n\t\t\t\talert('Error creating branch: ' + err.message);\n\t\t\t}\n\t\t});\n\t\t\n\t\t// Create Tag\n\t\tdocument.getElementById('create-tag-form')?.addEventListener('submit', async (e) => {\n\t\t\te.preventDefault();\n\t\t\tconst form = e.target;\n\t\t\tconst data = {\n\t\t\t\tname: form.name.value,\n\t\t\t\ttarget: form.target.value || '")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Var77, templ_7745c5c3_Err := templruntime.ScriptContentInsideStringLiteral(data.CurrentBranch)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 941, Col: 55}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ_7745c5c3_Var77)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 133, "',\n\t\t\t\tmessage: form.message.value\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${repoID}/tags`, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'X-CSRF-Token': csrfToken\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify(data)\n\t\t\t\t});\n\t\t\t\tif (!resp.ok) throw new Error(await resp.text());\n\t\t\t\tcloseModal('create-tag-modal');\n\t\t\t\twindow.location.reload();\n\t\t\t} catch (err) {\n\t\t\t\talert('Error creating tag: ' + err.message);\n\t\t\t}\n\t\t});\n\t\t\n\t\t// Compare\n\t\tdocument.getElementById('compare-form')?.addEventListener('submit', async (e) => {\n\t\t\te.preventDefault();\n\t\t\tconst base = document.getElementById('compare-base').value;\n\t\t\tconst head = document.getElementById('compare-head').value;\n\t\t\t\n\t\t\ttry {\n\t\t\t\t// Get comparison data\n\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${repoID}/compare?base=${encodeURIComponent(base)}&head=${encodeURIComponent(head)}`);\n\t\t\t\tif (!resp.ok) throw new Error(await resp.text());\n\t\t\t\tconst compare = await resp.json();\n\t\t\t\t\n\t\t\t\t// Get diff\n\t\t\t\tconst diffResp = await fetch(`/integrations/gitea/repos/${repoID}/diff?base=${encodeURIComponent(base)}&head=${encodeURIComponent(head)}`);\n\t\t\t\tconst diff = await diffResp.text();\n\t\t\t\t\n\t\t\t\t// Show results\n\t\t\t\tdocument.getElementById('compare-results').classList.remove('hidden');\n\t\t\t\tdocument.getElementById('compare-stats').innerHTML = \n\t\t\t\t\t`<span class=\"text-green-400\">${compare.total_commits} commits</span> ahead of ${base}`;\n\t\t\t\tdocument.getElementById('compare-diff').querySelector('pre').textContent = diff || 'No differences';\n\t\t\t} catch (err) {\n\t\t\t\talert('Error comparing: ' + err.message);\n\t\t\t}\n\t\t});\n\t\t\n\t\t// View commit detail\n\t\twindow.viewCommit = async (sha) => {\n\t\t\tdocument.getElementById('commit-sha-title').textContent = sha.substring(0, 7);\n\t\t\topenModal('commit-detail-modal');\n\t\t\t\n\t\t\ttry {\n\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${repoID}/commits/${sha}`);\n\t\t\t\tif (!resp.ok) throw new Error(await resp.text());\n\t\t\t\tconst commit = await resp.json();\n\t\t\t\t\n\t\t\t\tconst content = document.getElementById('commit-detail-content');\n\t\t\t\tcontent.innerHTML = `\n\t\t\t\t\t<div class=\"space-y-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p class=\"text-white font-medium\">${escapeHtml(commit.commit.message)}<\\/p>\n\t\t\t\t\t\t\t<p class=\"text-sm text-gray-400 mt-2\">\n\t\t\t\t\t\t\t\t<i class=\"fas fa-user mr-1\"><\\/i>${commit.commit.author?.name || 'Unknown'}\n\t\t\t\t\t\t\t\t<span class=\"mx-2\">â€¢<\\/span>\n\t\t\t\t\t\t\t\t<i class=\"fas fa-clock mr-1\"><\\/i>${commit.commit.author?.date || ''}\n\t\t\t\t\t\t\t<\\/p>\n\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t<div class=\"text-sm\">\n\t\t\t\t\t\t\t<span class=\"text-gray-500\">SHA:<\\/span>\n\t\t\t\t\t\t\t<code class=\"text-gray-300 ml-2\">${commit.sha}<\\/code>\n\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t${commit.stats ? `\n\t\t\t\t\t\t\t<div class=\"flex gap-4 text-sm\">\n\t\t\t\t\t\t\t\t<span class=\"text-green-400\">+${commit.stats.additions}<\\/span>\n\t\t\t\t\t\t\t\t<span class=\"text-red-400\">-${commit.stats.deletions}<\\/span>\n\t\t\t\t\t\t\t\t<span class=\"text-gray-400\">${commit.stats.total} changes<\\/span>\n\t\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t` : ''}\n\t\t\t\t\t\t${commit.files?.length ? `\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<h4 class=\"text-sm font-medium text-gray-300 mb-2\">Files changed (${commit.files.length})<\\/h4>\n\t\t\t\t\t\t\t\t<div class=\"space-y-1 max-h-60 overflow-y-auto\">\n\t\t\t\t\t\t\t\t\t${commit.files.map(f => `\n\t\t\t\t\t\t\t\t\t\t<div class=\"text-sm flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"${f.status === 'added' ? 'text-green-400' : f.status === 'removed' ? 'text-red-400' : 'text-yellow-400'}\">\n\t\t\t\t\t\t\t\t\t\t\t\t${f.status === 'added' ? '+' : f.status === 'removed' ? '-' : 'M'}\n\t\t\t\t\t\t\t\t\t\t\t<\\/span>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-gray-300 font-mono\">${escapeHtml(f.filename)}<\\/span>\n\t\t\t\t\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t\t\t\t`).join('')}\n\t\t\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t` : ''}\n\t\t\t\t\t<\\/div>\n\t\t\t\t`;\n\t\t\t} catch (err) {\n\t\t\t\tdocument.getElementById('commit-detail-content').innerHTML =\n\t\t\t\t\t`<p class=\"text-red-400\">Error loading commit: ${escapeHtml(err.message)}<\\/p>`;\n\t\t\t}\n\t\t};\n\t\t\n\t\tfunction escapeHtml(text) {\n\t\t\tconst div = document.createElement('div');\n\t\t\tdiv.textContent = text;\n\t\t\treturn div.innerHTML;\n\t\t}\n\t\t\n\t\t// Close modals on Escape key\n\t\tdocument.addEventListener('keydown', (e) => {\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\tdocument.querySelectorAll('.fixed.z-50').forEach(modal => {\n\t\t\t\t\tmodal.classList.add('hidden');\n\t\t\t\t\tmodal.classList.remove('flex');\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\t// Close modals on backdrop click\n\t\tdocument.querySelectorAll('.fixed.z-50').forEach(modal => {\n\t\t\tmodal.addEventListener('click', (e) => {\n\t\t\t\tif (e.target === modal) {\n\t\t\t\t\tmodal.classList.add('hidden');\n\t\t\t\t\tmodal.classList.remove('flex');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t</script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

// ============================================================================
// Tier 2 Modals: Pull Requests, Issues, Collaborators
// ============================================================================
func tier2Modals(data RepoDetailData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var78 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var78 == nil {
			templ_7745c5c3_Var78 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 134, "<!-- Create PR Modal --><div id=\"create-pr-modal\" class=\"fixed inset-0 bg-black/60 z-50 hidden items-center justify-center\"><div class=\"bg-gray-800 rounded-xl border border-gray-700 p-6 w-full max-w-lg mx-4\"><h3 class=\"text-lg font-semibold text-white mb-4\"><i class=\"fas fa-code-pull-request mr-2 text-green-400\"></i>Create Pull Request</h3><form id=\"create-pr-form\" class=\"space-y-4\"><input type=\"hidden\" name=\"csrf_token\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var79 string
		templ_7745c5c3_Var79, templ_7745c5c3_Err = templ.JoinStringErrs(data.CSRFToken)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 1082, Col: 65}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var79))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 135, "\"><div><label class=\"block text-sm text-gray-400 mb-1\">Title</label> <input type=\"text\" name=\"title\" required placeholder=\"What does this PR do?\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500\"></div><div class=\"grid grid-cols-2 gap-4\"><div><label class=\"block text-sm text-gray-400 mb-1\">Head (source)</label> <select name=\"head\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		for _, branch := range data.Branches {
			if branch.Name == data.CurrentBranch && !branch.IsDefault {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 136, "<option value=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var80 string
				templ_7745c5c3_Var80, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 1094, Col: 36}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var80))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 137, "\" selected>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var81 string
				templ_7745c5c3_Var81, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 1094, Col: 61}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var81))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 138, "</option>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 139, "<option value=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var82 string
				templ_7745c5c3_Var82, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 1096, Col: 36}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var82))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 140, "\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var83 string
				templ_7745c5c3_Var83, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 1096, Col: 52}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var83))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 141, "</option>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 142, "</select></div><div><label class=\"block text-sm text-gray-400 mb-1\">Base (target)</label> <select name=\"base\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		for _, branch := range data.Branches {
			if branch.IsDefault {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 143, "<option value=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var84 string
				templ_7745c5c3_Var84, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 1106, Col: 36}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var84))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 144, "\" selected>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var85 string
				templ_7745c5c3_Var85, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 1106, Col: 61}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var85))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 145, "</option>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 146, "<option value=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var86 string
				templ_7745c5c3_Var86, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 1108, Col: 36}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var86))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 147, "\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var87 string
				templ_7745c5c3_Var87, templ_7745c5c3_Err = templ.JoinStringErrs(branch.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 1108, Col: 52}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var87))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 148, "</option>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 149, "</select></div></div><div><label class=\"block text-sm text-gray-400 mb-1\">Description (optional)</label> <textarea name=\"body\" rows=\"4\" placeholder=\"Describe your changes...\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white resize-none\"></textarea></div><div class=\"flex justify-end gap-3 pt-2\"><button type=\"button\" onclick=\"closeModal('create-pr-modal')\" class=\"btn-ghost\">Cancel</button> <button type=\"submit\" class=\"btn-primary\">Create Pull Request</button></div></form></div></div><!-- Create Issue Modal --><div id=\"create-issue-modal\" class=\"fixed inset-0 bg-black/60 z-50 hidden items-center justify-center\"><div class=\"bg-gray-800 rounded-xl border border-gray-700 p-6 w-full max-w-lg mx-4\"><h3 class=\"text-lg font-semibold text-white mb-4\"><i class=\"fas fa-circle-exclamation mr-2 text-yellow-400\"></i>Create Issue</h3><form id=\"create-issue-form\" class=\"space-y-4\"><input type=\"hidden\" name=\"csrf_token\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var88 string
		templ_7745c5c3_Var88, templ_7745c5c3_Err = templ.JoinStringErrs(data.CSRFToken)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/detail.templ`, Line: 1134, Col: 65}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var88))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 150, "\"><div><label class=\"block text-sm text-gray-400 mb-1\">Title</label> <input type=\"text\" name=\"title\" required placeholder=\"Issue title\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500\"></div><div><label class=\"block text-sm text-gray-400 mb-1\">Description</label> <textarea name=\"body\" rows=\"6\" placeholder=\"Describe the issue...\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white resize-none\"></textarea></div><div class=\"flex justify-end gap-3 pt-2\"><button type=\"button\" onclick=\"closeModal('create-issue-modal')\" class=\"btn-ghost\">Cancel</button> <button type=\"submit\" class=\"btn-primary\">Create Issue</button></div></form></div></div><!-- Collaborators Modal --><div id=\"collaborators-modal\" class=\"fixed inset-0 bg-black/60 z-50 hidden items-center justify-center\"><div class=\"bg-gray-800 rounded-xl border border-gray-700 p-6 w-full max-w-lg mx-4 max-h-[80vh] flex flex-col\"><h3 class=\"text-lg font-semibold text-white mb-4 flex items-center justify-between\"><span><i class=\"fas fa-users mr-2 text-blue-400\"></i>Collaborators</span> <button onclick=\"closeModal('collaborators-modal')\" class=\"text-gray-400 hover:text-white\"><i class=\"fas fa-times\"></i></button></h3><div id=\"collaborators-content\" class=\"flex-1 overflow-y-auto\"><div class=\"text-center py-8 text-gray-400\"><i class=\"fas fa-spinner fa-spin text-2xl mb-2\"></i><p>Loading collaborators...</p></div></div><div class=\"border-t border-gray-700 pt-4 mt-4\"><form id=\"add-collaborator-form\" class=\"flex gap-2\"><input type=\"text\" name=\"username\" placeholder=\"Username\" required class=\"flex-1 px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white text-sm\"> <select name=\"permission\" class=\"px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white text-sm\"><option value=\"read\">Read</option> <option value=\"write\" selected>Write</option> <option value=\"admin\">Admin</option></select> <button type=\"submit\" class=\"btn-primary text-sm\">Add</button></form></div></div></div><!-- PR Detail Modal --><div id=\"pr-detail-modal\" class=\"fixed inset-0 bg-black/60 z-50 hidden items-center justify-center\"><div class=\"bg-gray-800 rounded-xl border border-gray-700 p-6 w-full max-w-3xl mx-4 max-h-[85vh] flex flex-col\"><div class=\"flex items-center justify-between mb-4\"><h3 class=\"text-lg font-semibold text-white\"><i class=\"fas fa-code-pull-request mr-2 text-green-400\"></i> <span id=\"pr-detail-title\">Pull Request</span></h3><button onclick=\"closeModal('pr-detail-modal')\" class=\"text-gray-400 hover:text-white\"><i class=\"fas fa-times\"></i></button></div><div id=\"pr-detail-content\" class=\"flex-1 overflow-y-auto\"><div class=\"text-center py-8 text-gray-400\"><i class=\"fas fa-spinner fa-spin text-2xl\"></i></div></div></div></div><!-- Issue Detail Modal --><div id=\"issue-detail-modal\" class=\"fixed inset-0 bg-black/60 z-50 hidden items-center justify-center\"><div class=\"bg-gray-800 rounded-xl border border-gray-700 p-6 w-full max-w-3xl mx-4 max-h-[85vh] flex flex-col\"><div class=\"flex items-center justify-between mb-4\"><h3 class=\"text-lg font-semibold text-white\"><i class=\"fas fa-circle-exclamation mr-2 text-yellow-400\"></i> <span id=\"issue-detail-title\">Issue</span></h3><button onclick=\"closeModal('issue-detail-modal')\" class=\"text-gray-400 hover:text-white\"><i class=\"fas fa-times\"></i></button></div><div id=\"issue-detail-content\" class=\"flex-1 overflow-y-auto\"><div class=\"text-center py-8 text-gray-400\"><i class=\"fas fa-spinner fa-spin text-2xl\"></i></div></div></div></div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

// ============================================================================
// Tier 2 Scripts
// ============================================================================
func tier2Scripts(data RepoDetailData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var89 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var89 == nil {
			templ_7745c5c3_Var89 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 151, "<script>\n\t\tconst tier2RepoID = { templ.JSONString(data.Repo.ID) };\n\t\tconst tier2CSRF = { templ.JSONString(data.CSRFToken) };\n\n\t\t// Modal helpers\n\t\tfunction openCreatePRModal() {\n\t\t\tdocument.getElementById('create-pr-modal').classList.remove('hidden');\n\t\t\tdocument.getElementById('create-pr-modal').classList.add('flex');\n\t\t}\n\n\t\tfunction openCreateIssueModal() {\n\t\t\tdocument.getElementById('create-issue-modal').classList.remove('hidden');\n\t\t\tdocument.getElementById('create-issue-modal').classList.add('flex');\n\t\t}\n\n\t\tfunction openCollaboratorsModal() {\n\t\t\tdocument.getElementById('collaborators-modal').classList.remove('hidden');\n\t\t\tdocument.getElementById('collaborators-modal').classList.add('flex');\n\t\t\tloadCollaborators();\n\t\t}\n\n\t\t// Load collaborators\n\t\tasync function loadCollaborators() {\n\t\t\tconst container = document.getElementById('collaborators-content');\n\t\t\ttry {\n\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${tier2RepoID}/collaborators`);\n\t\t\t\tif (!resp.ok) throw new Error('Failed to load collaborators');\n\t\t\t\tconst collabs = await resp.json();\n\t\t\t\t\n\t\t\t\tif (!collabs || collabs.length === 0) {\n\t\t\t\t\tcontainer.innerHTML = '<p class=\"text-gray-400 text-center py-4\">No collaborators found</p>';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcontainer.innerHTML = collabs.map(c => `\n\t\t\t\t\t<div class=\"flex items-center justify-between py-2 px-3 hover:bg-gray-700/30 rounded-lg\">\n\t\t\t\t\t\t<div class=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t<img src=\"${c.avatar_url || '/static/img/default-avatar.png'}\" \n\t\t\t\t\t\t\t\tclass=\"w-8 h-8 rounded-full\" alt=\"${escapeHtml(c.login)}\"/>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\"text-white text-sm\">${escapeHtml(c.login)}</div>\n\t\t\t\t\t\t\t\t<div class=\"text-xs text-gray-500\">${escapeHtml(c.full_name || '')}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t<span class=\"text-xs px-2 py-1 rounded ${\n\t\t\t\t\t\t\t\tc.permissions?.admin ? 'bg-red-500/20 text-red-400' :\n\t\t\t\t\t\t\t\tc.permissions?.push ? 'bg-blue-500/20 text-blue-400' :\n\t\t\t\t\t\t\t\t'bg-gray-700 text-gray-400'\n\t\t\t\t\t\t\t}\">\n\t\t\t\t\t\t\t\t${c.permissions?.admin ? 'Admin' : c.permissions?.push ? 'Write' : 'Read'}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<button onclick=\"removeCollaborator('${escapeHtml(c.login)}')\"\n\t\t\t\t\t\t\t\tclass=\"text-gray-400 hover:text-red-400 p-1\">\n\t\t\t\t\t\t\t\t<i class=\"fas fa-times\"></i>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`).join('');\n\t\t\t} catch (err) {\n\t\t\t\tcontainer.innerHTML = `<p class=\"text-red-400 text-center py-4\">${escapeHtml(err.message)}</p>`;\n\t\t\t}\n\t\t}\n\n\t\t// Add collaborator\n\t\tdocument.getElementById('add-collaborator-form')?.addEventListener('submit', async (e) => {\n\t\t\te.preventDefault();\n\t\t\tconst form = e.target;\n\t\t\tconst username = form.username.value.trim();\n\t\t\tconst permission = form.permission.value;\n\t\t\t\n\t\t\tif (!username) return;\n\n\t\t\ttry {\n\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${tier2RepoID}/collaborators/${encodeURIComponent(username)}`, {\n\t\t\t\t\tmethod: 'PUT',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'X-CSRF-Token': tier2CSRF\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({ permission })\n\t\t\t\t});\n\t\t\t\tif (!resp.ok) throw new Error('Failed to add collaborator');\n\t\t\t\tform.reset();\n\t\t\t\tloadCollaborators();\n\t\t\t} catch (err) {\n\t\t\t\talert('Error: ' + err.message);\n\t\t\t}\n\t\t});\n\n\t\t// Remove collaborator\n\t\tasync function removeCollaborator(username) {\n\t\t\tif (!confirm(`Remove ${username} from collaborators?`)) return;\n\t\t\ttry {\n\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${tier2RepoID}/collaborators/${encodeURIComponent(username)}`, {\n\t\t\t\t\tmethod: 'DELETE',\n\t\t\t\t\theaders: { 'X-CSRF-Token': tier2CSRF }\n\t\t\t\t});\n\t\t\t\tif (!resp.ok) throw new Error('Failed to remove collaborator');\n\t\t\t\tloadCollaborators();\n\t\t\t} catch (err) {\n\t\t\t\talert('Error: ' + err.message);\n\t\t\t}\n\t\t}\n\n\t\t// Create PR\n\t\tdocument.getElementById('create-pr-form')?.addEventListener('submit', async (e) => {\n\t\t\te.preventDefault();\n\t\t\tconst form = e.target;\n\t\t\tconst data = {\n\t\t\t\ttitle: form.title.value,\n\t\t\t\tbody: form.body.value,\n\t\t\t\thead: form.head.value,\n\t\t\t\tbase: form.base.value\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${tier2RepoID}/pulls`, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'X-CSRF-Token': tier2CSRF\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify(data)\n\t\t\t\t});\n\t\t\t\tif (!resp.ok) {\n\t\t\t\t\tconst errText = await resp.text();\n\t\t\t\t\tthrow new Error(errText || 'Failed to create PR');\n\t\t\t\t}\n\t\t\t\tcloseModal('create-pr-modal');\n\t\t\t\twindow.location.href = `/integrations/gitea/repos/${tier2RepoID}/pulls?tab=pulls`;\n\t\t\t} catch (err) {\n\t\t\t\talert('Error: ' + err.message);\n\t\t\t}\n\t\t});\n\n\t\t// Create Issue\n\t\tdocument.getElementById('create-issue-form')?.addEventListener('submit', async (e) => {\n\t\t\te.preventDefault();\n\t\t\tconst form = e.target;\n\t\t\tconst data = {\n\t\t\t\ttitle: form.title.value,\n\t\t\t\tbody: form.body.value\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${tier2RepoID}/issues`, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'X-CSRF-Token': tier2CSRF\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify(data)\n\t\t\t\t});\n\t\t\t\tif (!resp.ok) {\n\t\t\t\t\tconst errText = await resp.text();\n\t\t\t\t\tthrow new Error(errText || 'Failed to create issue');\n\t\t\t\t}\n\t\t\t\tcloseModal('create-issue-modal');\n\t\t\t\twindow.location.href = `/integrations/gitea/repos/${tier2RepoID}/issues?tab=issues`;\n\t\t\t} catch (err) {\n\t\t\t\talert('Error: ' + err.message);\n\t\t\t}\n\t\t});\n\n\t\t// View PR detail\n\t\tasync function viewPR(number) {\n\t\t\tdocument.getElementById('pr-detail-modal').classList.remove('hidden');\n\t\t\tdocument.getElementById('pr-detail-modal').classList.add('flex');\n\t\t\tdocument.getElementById('pr-detail-content').innerHTML = '<div class=\"text-center py-8 text-gray-400\"><i class=\"fas fa-spinner fa-spin text-2xl\"></i></div>';\n\n\t\t\ttry {\n\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${tier2RepoID}/pulls/${number}`);\n\t\t\t\tif (!resp.ok) throw new Error('Failed to load PR');\n\t\t\t\tconst pr = await resp.json();\n\n\t\t\t\tdocument.getElementById('pr-detail-title').textContent = `#${pr.number} ${pr.title}`;\n\t\t\t\tdocument.getElementById('pr-detail-content').innerHTML = `\n\t\t\t\t\t<div class=\"space-y-4\">\n\t\t\t\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t<span class=\"px-2 py-1 rounded text-sm ${pr.state === 'open' ? 'bg-green-500/20 text-green-400' : pr.merged ? 'bg-purple-500/20 text-purple-400' : 'bg-red-500/20 text-red-400'}\">\n\t\t\t\t\t\t\t\t${pr.merged ? 'Merged' : pr.state}\n\t\t\t\t\t\t\t<\\/span>\n\t\t\t\t\t\t\t<span class=\"text-gray-400 text-sm\">${escapeHtml(pr.user?.login || 'unknown')} wants to merge<\\/span>\n\t\t\t\t\t\t\t<code class=\"text-xs bg-gray-700 px-2 py-0.5 rounded\">${escapeHtml(pr.head?.ref)}<\\/code>\n\t\t\t\t\t\t\t<span class=\"text-gray-400\">â†’<\\/span>\n\t\t\t\t\t\t\t<code class=\"text-xs bg-gray-700 px-2 py-0.5 rounded\">${escapeHtml(pr.base?.ref)}<\\/code>\n\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t${pr.body ? `<div class=\"prose prose-invert prose-sm max-w-none bg-gray-900 p-4 rounded-lg\">${escapeHtml(pr.body)}<\\/div>` : ''}\n\t\t\t\t\t\t${pr.mergeable && pr.state === 'open' && !pr.merged ? `\n\t\t\t\t\t\t\t<div class=\"flex items-center gap-2 pt-4 border-t border-gray-700\">\n\t\t\t\t\t\t\t\t<button onclick=\"mergePR(${pr.number})\" class=\"btn-primary\">\n\t\t\t\t\t\t\t\t\t<i class=\"fas fa-code-merge mr-2\"><\\/i>Merge Pull Request\n\t\t\t\t\t\t\t\t<\\/button>\n\t\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t` : ''}\n\t\t\t\t\t<\\/div>\n\t\t\t\t`;\n\t\t\t} catch (err) {\n\t\t\t\tdocument.getElementById('pr-detail-content').innerHTML = `<p class=\"text-red-400\">${escapeHtml(err.message)}<\\/p>`;\n\t\t\t}\n\t\t}\n\n\t\t// Merge PR\n\t\tasync function mergePR(number) {\n\t\t\tif (!confirm('Merge this pull request?')) return;\n\t\t\ttry {\n\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${tier2RepoID}/pulls/${number}/merge`, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'X-CSRF-Token': tier2CSRF\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({ Do: 'merge' })\n\t\t\t\t});\n\t\t\t\tif (!resp.ok) throw new Error('Failed to merge PR');\n\t\t\t\tcloseModal('pr-detail-modal');\n\t\t\t\tlocation.reload();\n\t\t\t} catch (err) {\n\t\t\t\talert('Error: ' + err.message);\n\t\t\t}\n\t\t}\n\n\t\t// View Issue detail\n\t\tasync function viewIssue(number) {\n\t\t\tdocument.getElementById('issue-detail-modal').classList.remove('hidden');\n\t\t\tdocument.getElementById('issue-detail-modal').classList.add('flex');\n\t\t\tdocument.getElementById('issue-detail-content').innerHTML = '<div class=\"text-center py-8 text-gray-400\"><i class=\"fas fa-spinner fa-spin text-2xl\"></i></div>';\n\n\t\t\ttry {\n\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${tier2RepoID}/issues/${number}`);\n\t\t\t\tif (!resp.ok) throw new Error('Failed to load issue');\n\t\t\t\tconst issue = await resp.json();\n\n\t\t\t\tconst commentsResp = await fetch(`/integrations/gitea/repos/${tier2RepoID}/issues/${number}/comments`);\n\t\t\t\tconst comments = commentsResp.ok ? await commentsResp.json() : [];\n\n\t\t\t\tdocument.getElementById('issue-detail-title').textContent = `#${issue.number} ${issue.title}`;\n\t\t\t\tdocument.getElementById('issue-detail-content').innerHTML = `\n\t\t\t\t\t<div class=\"space-y-4\">\n\t\t\t\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t<span class=\"px-2 py-1 rounded text-sm ${issue.state === 'open' ? 'bg-green-500/20 text-green-400' : 'bg-gray-500/20 text-gray-400'}\">\n\t\t\t\t\t\t\t\t${issue.state}\n\t\t\t\t\t\t\t<\\/span>\n\t\t\t\t\t\t\t<span class=\"text-gray-400 text-sm\">Opened by ${escapeHtml(issue.user?.login || 'unknown')}<\\/span>\n\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t${issue.body ? `<div class=\"prose prose-invert prose-sm max-w-none bg-gray-900 p-4 rounded-lg\">${escapeHtml(issue.body)}<\\/div>` : ''}\n\t\t\t\t\t\t${comments.length > 0 ? `\n\t\t\t\t\t\t\t<div class=\"border-t border-gray-700 pt-4\">\n\t\t\t\t\t\t\t\t<h4 class=\"text-sm font-medium text-gray-300 mb-3\">Comments (${comments.length})<\\/h4>\n\t\t\t\t\t\t\t\t<div class=\"space-y-3\">\n\t\t\t\t\t\t\t\t\t${comments.map(c => `\n\t\t\t\t\t\t\t\t\t\t<div class=\"bg-gray-900 p-3 rounded-lg\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex items-center gap-2 mb-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-sm font-medium text-white\">${escapeHtml(c.user?.login || 'unknown')}<\\/span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-xs text-gray-500\">${new Date(c.created_at).toLocaleString()}<\\/span>\n\t\t\t\t\t\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"text-sm text-gray-300\">${escapeHtml(c.body)}<\\/div>\n\t\t\t\t\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t\t\t\t`).join('')}\n\t\t\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t` : ''}\n\t\t\t\t\t\t<div class=\"border-t border-gray-700 pt-4\">\n\t\t\t\t\t\t\t<form id=\"add-comment-form-${issue.number}\" class=\"flex gap-2\">\n\t\t\t\t\t\t\t\t<input type=\"text\" name=\"body\" placeholder=\"Add a comment...\"\n\t\t\t\t\t\t\t\t\tclass=\"flex-1 px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white text-sm\"\\/>\n\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"btn-primary text-sm\">Comment<\\/button>\n\t\t\t\t\t\t\t<\\/form>\n\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t<\\/div>\n\t\t\t\t`;\n\n\t\t\t\t// Comment form handler\n\t\t\t\tdocument.getElementById(`add-comment-form-${issue.number}`)?.addEventListener('submit', async (e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tconst body = e.target.body.value.trim();\n\t\t\t\t\tif (!body) return;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${tier2RepoID}/issues/${issue.number}/comments`, {\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t\t'X-CSRF-Token': tier2CSRF\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: JSON.stringify({ body })\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!resp.ok) throw new Error('Failed to add comment');\n\t\t\t\t\t\tviewIssue(issue.number); // Reload\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\talert('Error: ' + err.message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tdocument.getElementById('issue-detail-content').innerHTML = `<p class=\"text-red-400\">${escapeHtml(err.message)}</p>`;\n\t\t\t}\n\t\t}\n\t</script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
